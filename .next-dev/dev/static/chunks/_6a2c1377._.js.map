{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport type * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Checkbox({ className, ...props }: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <Check className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAA4D;IAC5F,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+eACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAU;sBAEV,cAAA,6LAAC,gNAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIzB;KAlBS","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/components/PinPrompt.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { toast } from \"sonner\"\r\n\r\ninterface PinPromptProps {\r\n    isOpen: boolean\r\n    onClose: () => void\r\n    onConfirm: (pin: string) => void\r\n    isLoading?: boolean\r\n}\r\n\r\nexport function PinPrompt({ isOpen, onClose, onConfirm, isLoading }: PinPromptProps) {\r\n    const [pin, setPin] = useState(\"\")\r\n\r\n    const handleConfirm = () => {\r\n        if (pin.length !== 4) {\r\n            toast.error(\"Please enter a 4-digit PIN\")\r\n            return\r\n        }\r\n        onConfirm(pin)\r\n        setPin(\"\")\r\n    }\r\n\r\n    return (\r\n        <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\r\n            <DialogContent className=\"sm:max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Enter Transaction PIN</DialogTitle>\r\n                    <DialogDescription>\r\n                        Please enter your 4-digit transaction PIN to authorize this request.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"space-y-4 py-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"pin\" className=\"text-center block\">PIN</Label>\r\n                        <Input\r\n                            id=\"pin\"\r\n                            type=\"password\"\r\n                            inputMode=\"numeric\"\r\n                            maxLength={4}\r\n                            value={pin}\r\n                            onChange={(e) => setPin(e.target.value.replace(/\\D/g, \"\"))}\r\n                            className=\"text-center text-2xl tracking-[1em]\"\r\n                            placeholder=\"••••\"\r\n                            autoFocus\r\n                            onKeyDown={(e) => {\r\n                                if (e.key === \"Enter\") handleConfirm()\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <DialogFooter>\r\n                    <Button variant=\"outline\" onClick={onClose} disabled={isLoading}>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleConfirm} disabled={isLoading || pin.length !== 4} className=\"bg-[#3457D5]\">\r\n                        {isLoading ? \"Verifying...\" : \"Confirm PIN\"}\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAQA;AACA;AACA;AACA;;;AAdA;;;;;;;AAuBO,SAAS,UAAU,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAkB;;IAC/E,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAC;IAE/B,MAAM,gBAAgB;QAClB,IAAI,IAAI,MAAM,KAAK,GAAG;YAClB,oJAAK,CAAC,KAAK,CAAC;YACZ;QACJ;QACA,UAAU;QACV,OAAO;IACX;IAEA,qBACI,6LAAC,wIAAM;QAAC,MAAM;QAAQ,cAAc,CAAC,OAAS,CAAC,QAAQ;kBACnD,cAAA,6LAAC,+IAAa;YAAC,WAAU;;8BACrB,6LAAC,8IAAY;;sCACT,6LAAC,6IAAW;sCAAC;;;;;;sCACb,6LAAC,mJAAiB;sCAAC;;;;;;;;;;;;8BAIvB,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,sIAAK;gCAAC,SAAQ;gCAAM,WAAU;0CAAoB;;;;;;0CACnD,6LAAC,sIAAK;gCACF,IAAG;gCACH,MAAK;gCACL,WAAU;gCACV,WAAW;gCACX,OAAO;gCACP,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO;gCACtD,WAAU;gCACV,aAAY;gCACZ,SAAS;gCACT,WAAW,CAAC;oCACR,IAAI,EAAE,GAAG,KAAK,SAAS;gCAC3B;;;;;;;;;;;;;;;;;8BAIZ,6LAAC,8IAAY;;sCACT,6LAAC,wIAAM;4BAAC,SAAQ;4BAAU,SAAS;4BAAS,UAAU;sCAAW;;;;;;sCAGjE,6LAAC,wIAAM;4BAAC,SAAS;4BAAe,UAAU,aAAa,IAAI,MAAM,KAAK;4BAAG,WAAU;sCAC9E,YAAY,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMtD;GAnDgB;KAAA","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/service-utils.ts"],"sourcesContent":["export function isManualService(serviceId: string, subServiceId?: string): boolean {\r\n    const sId = serviceId.toLowerCase()\r\n    const subId = subServiceId?.toLowerCase()\r\n\r\n    // BVN: printout, advanced, retrieval_phone are automated\r\n    if (sId === \"bvn\") {\r\n        const auto = [\"printout\", \"retrieval\"]\r\n        return !subId || !auto.includes(subId)\r\n    }\r\n\r\n    // NIN: slip, printout, advanced are automated\r\n    if (sId === \"nin\") {\r\n        const auto = [\"slip\", \"printout\", \"advanced\"]\r\n        return !subId || !auto.includes(subId)\r\n    }\r\n\r\n    // CAC: status-report, certification, info, status are automated\r\n    if (sId === \"cac\") {\r\n        const auto = [\"status-report\", \"certification\", \"status\", \"info\"]\r\n        return !subId || !auto.includes(subId)\r\n    }\r\n\r\n    // POS and Software: Always manual\r\n    if (sId === \"pos-requests\" || sId === \"software-development\") return true\r\n\r\n    return false\r\n}\r\n\r\nexport function handleServiceError(resp: any, toast: any, title = \"Error\") {\r\n    const message = resp.error || resp.message || \"An unexpected error occurred\"\r\n    toast({\r\n        title,\r\n        description: message,\r\n        variant: \"destructive\",\r\n    })\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,gBAAgB,SAAiB,EAAE,YAAqB;IACpE,MAAM,MAAM,UAAU,WAAW;IACjC,MAAM,QAAQ,cAAc;IAE5B,yDAAyD;IACzD,IAAI,QAAQ,OAAO;QACf,MAAM,OAAO;YAAC;YAAY;SAAY;QACtC,OAAO,CAAC,SAAS,CAAC,KAAK,QAAQ,CAAC;IACpC;IAEA,8CAA8C;IAC9C,IAAI,QAAQ,OAAO;QACf,MAAM,OAAO;YAAC;YAAQ;YAAY;SAAW;QAC7C,OAAO,CAAC,SAAS,CAAC,KAAK,QAAQ,CAAC;IACpC;IAEA,gEAAgE;IAChE,IAAI,QAAQ,OAAO;QACf,MAAM,OAAO;YAAC;YAAiB;YAAiB;YAAU;SAAO;QACjE,OAAO,CAAC,SAAS,CAAC,KAAK,QAAQ,CAAC;IACpC;IAEA,kCAAkC;IAClC,IAAI,QAAQ,kBAAkB,QAAQ,wBAAwB,OAAO;IAErE,OAAO;AACX;AAEO,SAAS,mBAAmB,IAAS,EAAE,KAAU,EAAE,QAAQ,OAAO;IACrE,MAAM,UAAU,KAAK,KAAK,IAAI,KAAK,OAAO,IAAI;IAC9C,MAAM;QACF;QACA,aAAa;QACb,SAAS;IACb;AACJ","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/client-pdf.ts"],"sourcesContent":["function getDispositionFilename(res: Response): string | undefined {\n  const disp = res.headers.get(\"Content-Disposition\") || \"\"\n  const m = disp.match(/filename=\"([^\"]+)\"/i)\n  return m?.[1]\n}\n\nexport async function downloadPdfViaServer(\n  templateId: string,\n  action: string,\n  params: Record<string, any>,\n  fileName?: string,\n  data?: Record<string, any>\n): Promise<void> {\n  const res = await fetch(\"/api/pdf\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ templateId, action, params, fileName, data }),\n  })\n\n  if (!res.ok) {\n    let msg = \"Failed to generate PDF\"\n    try {\n      const err = await res.json()\n      msg = err?.error || msg\n    } catch {}\n    throw new Error(msg)\n  }\n\n  const blob = await res.blob()\n  const url = URL.createObjectURL(blob)\n  const suggested = getDispositionFilename(res)\n  const fname = (fileName || suggested || `${action}-slip-${Date.now()}.pdf`)\n  const a = document.createElement(\"a\")\n  a.href = url\n  a.download = fname.endsWith(\".pdf\") ? fname : `${fname}.pdf`\n  document.body.appendChild(a)\n  a.click()\n  a.remove()\n  URL.revokeObjectURL(url)\n}\n\nexport async function downloadPdfAuto(\n  action: string,\n  params: Record<string, any>,\n  fileName?: string,\n  slipType?: string\n): Promise<void> {\n  const r = await fetch(\"/api/templates/resolve\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ action, slipType }),\n  })\n  if (!r.ok) {\n    let msg = \"Failed to resolve template\"\n    try { const j = await r.json(); msg = j?.error || msg } catch {}\n    throw new Error(msg)\n  }\n  const j = await r.json()\n  const id = j?.templateId\n  if (!id) throw new Error(\"Template ID missing\")\n  await downloadPdfViaServer(id, action, params, fileName)\n}\n\nexport async function downloadPdfAutoWithData(\n  action: string,\n  data: Record<string, any>,\n  fileName?: string,\n  slipType?: string\n): Promise<void> {\n  const r = await fetch(\"/api/templates/resolve\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ action, slipType }),\n  })\n  if (!r.ok) {\n    let msg = \"Failed to resolve template\"\n    try { const j = await r.json(); msg = j?.error || msg } catch {}\n    throw new Error(msg)\n  }\n  const j = await r.json()\n  const id = j?.templateId\n  if (!id) throw new Error(\"Template ID missing\")\n  await downloadPdfViaServer(id, action, {}, fileName, data)\n}\n"],"names":[],"mappings":";;;;;;;;AAAA,SAAS,uBAAuB,GAAa;IAC3C,MAAM,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,0BAA0B;IACvD,MAAM,IAAI,KAAK,KAAK,CAAC;IACrB,OAAO,GAAG,CAAC,EAAE;AACf;AAEO,eAAe,qBACpB,UAAkB,EAClB,MAAc,EACd,MAA2B,EAC3B,QAAiB,EACjB,IAA0B;IAE1B,MAAM,MAAM,MAAM,MAAM,YAAY;QAClC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YAAE;YAAY;YAAQ;YAAQ;YAAU;QAAK;IACpE;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,IAAI,MAAM;QACV,IAAI;YACF,MAAM,MAAM,MAAM,IAAI,IAAI;YAC1B,MAAM,KAAK,SAAS;QACtB,EAAE,OAAM,CAAC;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,MAAM,MAAM,IAAI,eAAe,CAAC;IAChC,MAAM,YAAY,uBAAuB;IACzC,MAAM,QAAS,YAAY,aAAa,GAAG,OAAO,MAAM,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC;IAC1E,MAAM,IAAI,SAAS,aAAa,CAAC;IACjC,EAAE,IAAI,GAAG;IACT,EAAE,QAAQ,GAAG,MAAM,QAAQ,CAAC,UAAU,QAAQ,GAAG,MAAM,IAAI,CAAC;IAC5D,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,EAAE,KAAK;IACP,EAAE,MAAM;IACR,IAAI,eAAe,CAAC;AACtB;AAEO,eAAe,gBACpB,MAAc,EACd,MAA2B,EAC3B,QAAiB,EACjB,QAAiB;IAEjB,MAAM,IAAI,MAAM,MAAM,0BAA0B;QAC9C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YAAE;YAAQ;QAAS;IAC1C;IACA,IAAI,CAAC,EAAE,EAAE,EAAE;QACT,IAAI,MAAM;QACV,IAAI;YAAE,MAAM,IAAI,MAAM,EAAE,IAAI;YAAI,MAAM,GAAG,SAAS;QAAI,EAAE,OAAM,CAAC;QAC/D,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,IAAI,MAAM,EAAE,IAAI;IACtB,MAAM,KAAK,GAAG;IACd,IAAI,CAAC,IAAI,MAAM,IAAI,MAAM;IACzB,MAAM,qBAAqB,IAAI,QAAQ,QAAQ;AACjD;AAEO,eAAe,wBACpB,MAAc,EACd,IAAyB,EACzB,QAAiB,EACjB,QAAiB;IAEjB,MAAM,IAAI,MAAM,MAAM,0BAA0B;QAC9C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YAAE;YAAQ;QAAS;IAC1C;IACA,IAAI,CAAC,EAAE,EAAE,EAAE;QACT,IAAI,MAAM;QACV,IAAI;YAAE,MAAM,IAAI,MAAM,EAAE,IAAI;YAAI,MAAM,GAAG,SAAS;QAAI,EAAE,OAAM,CAAC;QAC/D,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,IAAI,MAAM,EAAE,IAAI;IACtB,MAAM,KAAK,GAAG;IACd,IAAI,CAAC,IAAI,MAAM,IAAI,MAAM;IACzB,MAAM,qBAAqB,IAAI,QAAQ,CAAC,GAAG,UAAU;AACvD","debugId":null}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/hooks/useDynamicPricing.ts"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useMemo, useState, useCallback } from \"react\"\nimport { authFetch } from \"@/lib/client-auth\"\n\ntype Role = \"user\" | \"marketer\"\n\nexport interface DynamicPricingResult {\n  price: number | null\n  isLoading: boolean\n  error: string | null\n  reference?: string\n  submitService: (formData: Record<string, any>) => Promise<{\n    ok: boolean\n    reference?: string\n    message?: string\n    data?: any\n    error?: string\n  }>\n}\n\nfunction detectRoleFromUser(user: any): Role {\n  try {\n    const roleStr = String(user?.role || \"\").toLowerCase()\n    const roles: string[] = Array.isArray(user?.roles) ? user.roles.map((r: any) => String(r).toLowerCase()) : []\n    const isMarketer = roleStr.includes(\"marketer\") || roles.includes(\"marketer\") || user?.isMarketer === true\n    return isMarketer ? \"marketer\" : \"user\"\n  } catch {\n    return \"user\"\n  }\n}\n\nasync function detectRoleFallback(): Promise<Role> {\n  try {\n    const res = await fetch(\"/api/me\")\n    if (!res.ok) return \"user\"\n    const data = await res.json().catch(() => null)\n    return detectRoleFromUser(data?.user || data)\n  } catch {\n    return \"user\"\n  }\n}\n\nfunction mapVerificationAction(category: string, subservice: string): string | null {\n  const c = category.trim().toLowerCase()\n  const s = subservice.trim().toLowerCase()\n  if (c === \"nin\") {\n    if (s === \"slip\") return \"nin.slip\"\n    if (s === \"printout\") return \"nin.printout\"\n    if (s === \"advanced\" || s === \"verification\") return \"nin.advanced\"\n  }\n  if (c === \"bvn\") {\n    if (s === \"printout\") return \"bvn.printout\"\n    if (s === \"retrieval\" || s === \"retrieval_phone\") return \"bvn.retrieval_phone\"\n    if (s === \"advanced\" || s === \"verification\") return \"bvn.advanced\"\n  }\n  if (c === \"cac\") {\n    if (s === \"info\") return \"cac.info\"\n    if (s === \"status\") return \"cac.status\"\n  }\n  if (c === \"passport\") {\n    if (s === \"verify\" || s === \"verification\" || s === \"basic\") return \"passport.verify\"\n  }\n  if (c === \"phone\") {\n    // Use advanced route for richer details\n    if (s === \"advanced\" || s === \"verification\" || s === \"basic\") return \"phone.verify_advanced\"\n  }\n  if (c === \"driver-license\" || c === \"drivers_license\") {\n    if (s === \"basic\" || s === \"verification\") return \"drivers_license.verify\"\n  }\n  if (c === \"voters-card\" || c === \"voters\") {\n    if (s === \"basic\" || s === \"full\" || s === \"verification\") return \"voters.verify\"\n  }\n  if (c === \"plate-number\" || c === \"plate\") {\n    if (s === \"basic\" || s === \"verification\") return \"plate.verify\"\n  }\n  if (c === \"tin\") {\n    if (s === \"basic\" || s === \"certificate\" || s === \"verification\") return \"tin.verify\"\n  }\n  // Extend with other verification categories as needed\n  return null\n}\n\nexport function useDynamicPricing(\n  category: string,\n  subservice: string,\n  variant: string,\n  params?: Record<string, string | number | boolean>,\n  user?: any,\n): DynamicPricingResult {\n  const [role, setRole] = useState<Role>(() => detectRoleFromUser(user))\n  const [price, setPrice] = useState<number | null>(null)\n  const [isLoading, setIsLoading] = useState<boolean>(false)\n  const [error, setError] = useState<string | null>(null)\n  const [reference, setReference] = useState<string | undefined>(undefined)\n\n  const normalized = useMemo(() => ({\n    category: String(category || \"\").trim(),\n    subservice: String(subservice || \"\").trim(),\n    variant: String(variant || \"\").trim(),\n  }), [category, subservice, variant])\n\n  // Stable key for params to avoid effect loops caused by object identity changes\n  const paramsKey = useMemo(() => {\n    if (!params || typeof params !== \"object\") return \"\"\n    const entries = Object.entries(params).filter(([_, v]) => v !== undefined && v !== null)\n    if (!entries.length) return \"\"\n    entries.sort(([a], [b]) => a.localeCompare(b))\n    return entries.map(([k, v]) => `${k}=${String(v)}`).join(\"|\")\n  }, [params])\n\n  useEffect(() => {\n    let cancelled = false\n    const run = async () => {\n      setIsLoading(true)\n      setError(null)\n      try {\n        // Resolve role if not determinable from provided user\n        const r = user ? detectRoleFromUser(user) : await detectRoleFallback()\n        if (!cancelled) setRole(r)\n\n        // Fetch dynamic price\n        const qpEntries: Array<[string, string]> = [\n          [\"category\", normalized.category],\n          [\"subservice\", normalized.subservice],\n          [\"variant\", normalized.variant],\n          [\"role\", r],\n        ]\n        if (params && typeof params === \"object\") {\n          const dyn = Object.entries(params).filter(([_, v]) => v !== undefined && v !== null)\n          dyn.sort(([a], [b]) => a.localeCompare(b))\n          for (const [k, v] of dyn) qpEntries.push([k, String(v)])\n        }\n        const qs = new URLSearchParams(qpEntries)\n        const res = await fetch(`/api/pricing?${qs.toString()}`, { cache: \"no-store\" })\n        const data = await res.json().catch(() => null)\n        if (!res.ok) {\n          throw new Error(String(data?.error || \"Failed to load pricing\"))\n        }\n        const p = data?.price\n        setPrice(typeof p === \"number\" ? p : null)\n      } catch (err: any) {\n        setError(err?.message || \"Failed to fetch pricing\")\n        setPrice(null)\n      } finally {\n        if (!cancelled) setIsLoading(false)\n      }\n    }\n    run()\n    return () => { cancelled = true }\n  }, [normalized.category, normalized.subservice, normalized.variant, paramsKey, user])\n\n  const submitService = useCallback(async (formData: Record<string, any>) => {\n    try {\n      const body = {\n        amount: Number(formData.amount),\n        idempotencyKey: typeof formData.idempotencyKey === \"string\" ? formData.idempotencyKey : undefined,\n        params: { ...(formData || {}) },\n        subServiceId: normalized.variant || undefined,\n        action: mapVerificationAction(normalized.category, normalized.subservice) || undefined,\n        pin: formData.pin,\n      }\n      const res = await authFetch(`/api/service/${encodeURIComponent(normalized.category)}/${encodeURIComponent(normalized.subservice)}`, {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify(body),\n      })\n      const data = await res.json().catch(() => null)\n      if (!res.ok) {\n        return { ok: false, error: String(data?.error || `Service failed (${res.status})`), message: String(data?.message || \"Failed\"), data }\n      }\n      setReference(String(data?.reference || \"\"))\n      return { ok: true, reference: String(data?.reference || \"\"), message: String(data?.message || \"\"), data }\n    } catch (err: any) {\n      return { ok: false, error: String(err?.message || err) }\n    }\n  }, [normalized.category, normalized.subservice, normalized.variant])\n\n  return { price, isLoading, error, reference, submitService }\n}\n\nexport default useDynamicPricing"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/app/services/verification/voters-card/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent } from \"@/components/ui/card\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { Checkbox } from \"@/components/ui/checkbox\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Dialog, DialogContent, DialogTitle } from \"@/components/ui/dialog\"\r\nimport { Info, Download, CheckCircle } from \"lucide-react\"\r\nimport { PinPrompt } from \"@/components/PinPrompt\"\r\nimport { handleServiceError } from \"@/lib/service-utils\"\r\nimport Link from \"next/link\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { Toaster } from \"@/components/ui/toaster\"\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\nimport jsPDF from \"jspdf\"\r\nimport { downloadPdfViaServer, downloadPdfAuto } from \"@/lib/client-pdf\"\r\nimport useDynamicPricing from \"@/hooks/useDynamicPricing\"\r\n\r\nconst SLIP_TYPES = [\r\n  { value: \"basic\", label: \"Basic Data Slip\" },\r\n  { value: \"full\", label: \"Full Voter's ID Card\" },\r\n]\r\n\r\nexport default function VotersCardVerificationPage() {\r\n  const { toast } = useToast()\r\n  const [showWarning, setShowWarning] = useState(false)\r\n  const [number, setNumber] = useState(\"\")\r\n  const [lastName, setLastName] = useState(\"\")\r\n  const [firstName, setFirstName] = useState(\"\")\r\n  const [dob, setDob] = useState(\"\")\r\n  const [lga, setLga] = useState(\"\")\r\n  const [state, setState] = useState(\"\")\r\n  const [slipType, setSlipType] = useState(\"basic\")\r\n  const [consentChecked, setConsentChecked] = useState(false)\r\n  const [termsAccepted, setTermsAccepted] = useState(false)\r\n  const [isVerifying, setIsVerifying] = useState(false)\r\n  const [showResult, setShowResult] = useState(false)\r\n  const { price: servicePrice, isLoading, error: pricingError, submitService } = useDynamicPricing(\"voters-card\", slipType, slipType)\r\n  const [apiResult, setApiResult] = useState<any | null>(null)\r\n  const [isPinPromptOpen, setIsPinPromptOpen] = useState(false)\r\n  const [pendingPayload, setPendingPayload] = useState<any>(null)\r\n  const [errorMsg, setErrorMsg] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    setShowWarning(true)\r\n  }, [])\r\n\r\n  // Pricing handled by useDynamicPricing\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!consentChecked || !termsAccepted) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Please accept consent and terms to continue\",\r\n        variant: \"destructive\",\r\n      })\r\n      return\r\n    }\r\n\r\n    if (!number) {\r\n      toast({ title: \"Error\", description: \"Please enter Voter number\", variant: \"destructive\" })\r\n      return\r\n    }\r\n\r\n    try {\r\n      setIsVerifying(true)\r\n      setErrorMsg(null)\r\n      setApiResult(null)\r\n\r\n      setPendingPayload({\r\n        amount: Number(servicePrice || 500),\r\n        idempotencyKey: crypto.randomUUID(),\r\n        number, lastName, firstName, dob, lga, state, slipType,\r\n      })\r\n      setIsPinPromptOpen(true)\r\n    } finally {\r\n      setIsVerifying(false)\r\n    }\r\n  }\r\n\r\n  const handlePinConfirm = async (pin: string) => {\r\n    setIsPinPromptOpen(false)\r\n    setIsVerifying(true)\r\n    setErrorMsg(null)\r\n    setApiResult(null)\r\n\r\n    try {\r\n      const resp = await submitService({ ...pendingPayload, pin })\r\n      if (!resp.ok) {\r\n        handleServiceError(resp, toast, \"Verification Failed\")\r\n        setShowResult(false)\r\n        return\r\n      }\r\n\r\n      setApiResult(resp.data)\r\n      setShowResult(true)\r\n      toast({ title: \"Success\", description: \"Voter's Card verification completed!\" })\r\n    } catch (err: any) {\r\n      const message = err?.message || \"Network error during verification\"\r\n      setErrorMsg(message)\r\n      toast({ title: \"Error\", description: message, variant: \"destructive\" })\r\n    } finally {\r\n      setIsVerifying(false)\r\n    }\r\n  }\r\n\r\n  const generatePDF = async () => {\r\n    const tplId = process.env.NEXT_PUBLIC_TEMPLATE_ID_VOTERS_VERIFY\r\n    if (tplId) {\r\n      try {\r\n        await downloadPdfViaServer(tplId, \"voters.verify\", { number, lastName, firstName, dob, lga, state }, String(slipType).toLowerCase() === \"full\" ? \"voters-card-full\" : \"voters-card-verification\")\r\n        toast({ title: \"Success\", description: \"Downloaded Voter's slip\" })\r\n        return\r\n      } catch (err: any) {\r\n        toast({ title: \"Error\", description: err?.message || \"Failed to generate PDF\", variant: \"destructive\" })\r\n      }\r\n    }\r\n    try {\r\n      await downloadPdfAuto(\"voters.verify\", { number, lastName, firstName, dob, lga, state }, String(slipType).toLowerCase() === \"full\" ? \"voters-card-full\" : \"voters-card-verification\", slipType)\r\n      toast({ title: \"Success\", description: \"Downloaded Voter's slip\" })\r\n      return\r\n    } catch { }\r\n    const data: any = apiResult?.data ?? (apiResult as any)?.result ?? {}\r\n    const fullName = data.full_name || `${data.first_name || \"\"} ${data.last_name || \"\"}`.trim()\r\n    const vinNum = data.number || data.votersCardNumber || data.vin || number\r\n\r\n    const doc = new jsPDF()\r\n    doc.setFontSize(18)\r\n    doc.text(\"UFriends Information Technology\", 70, 15)\r\n    doc.setFontSize(14)\r\n    doc.text(\"Voter's Card Verification Slip\", 70, 25)\r\n    doc.setFontSize(10)\r\n    doc.text(`Date: ${new Date().toLocaleString()}`, 15, 40)\r\n    doc.text(`VIN: ${vinNum}`, 15, 50)\r\n    if (fullName) doc.text(`Name: ${fullName}`, 15, 60)\r\n    doc.text(`Slip Type: ${SLIP_TYPES.find((t) => t.value === slipType)?.label}`, 15, 70)\r\n    doc.text(`Price: ₦${servicePrice ?? 0}`, 15, 80)\r\n    doc.text(\"Status: Verified\", 15, 90)\r\n    doc.text(\"Note: This is a verification slip generated by UFriends.com.ng\", 15, 250)\r\n    doc.save(`voters-card-verification-${Date.now()}.pdf`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#F9F7F3] p-4 md:p-8\">\r\n      <Toaster />\r\n\r\n      <Dialog open={showWarning} onOpenChange={setShowWarning}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogTitle className=\"sr-only\">Privacy & Data Protection</DialogTitle>\r\n          <div className=\"flex flex-col items-center text-center space-y-4 p-6\">\r\n            <div className=\"w-16 h-16 rounded-full border-2 border-[#3457D5] bg-[#CCCCFF]/20 flex items-center justify-center\">\r\n              <Info className=\"h-8 w-8 text-[#3457D5]\" />\r\n            </div>\r\n            <h2 className=\"text-xl font-semibold text-gray-900\">Privacy & Data Protection</h2>\r\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\r\n              This service processes personal data. By proceeding, you confirm that you have obtained necessary consent\r\n              and legal authority. You assume full liability for unauthorized access. We cooperate fully with regulators\r\n              in cases of misuse.\r\n            </p>\r\n            <Button\r\n              onClick={() => setShowWarning(false)}\r\n              className=\"bg-[#3457D5] hover:bg-[#3457D5]/90 text-white px-8\"\r\n            >\r\n              I Understand\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <AnimatePresence mode=\"wait\">\r\n          {!showResult ? (\r\n            <motion.div\r\n              key=\"form\"\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -20 }}\r\n            >\r\n              <Card className=\"shadow-lg border-[#CCCCFF]/30\">\r\n                <CardContent className=\"p-6 md:p-8\">\r\n                  <h1 className=\"text-2xl font-bold mb-2 text-gray-900\">Voter's Card Verification</h1>\r\n                  <p className=\"text-sm text-gray-600 mb-8\">\r\n                    Verify Permanent Voter's Card (PVC) details with INEC database\r\n                  </p>\r\n\r\n                  <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-sm font-medium\">Voter Identification Number (VIN)</Label>\r\n                      <Input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter Voter number\"\r\n                        value={number}\r\n                        onChange={(e) => {\r\n                          const value = e.target.value.replace(/[^a-zA-Z0-9]/g, \"\").slice(0, 19)\r\n                          setNumber(value)\r\n                        }}\r\n                        maxLength={19}\r\n                        className=\"border-[#CCCCFF] focus:border-[#3457D5]\"\r\n                        required\r\n                      />\r\n                      <p className=\"text-xs text-muted-foreground\">Maximum 19 alphanumeric characters</p>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-sm font-medium\">First Name</Label>\r\n                        <Input type=\"text\" value={firstName} onChange={(e) => setFirstName(e.target.value)} />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-sm font-medium\">Last Name</Label>\r\n                        <Input type=\"text\" value={lastName} onChange={(e) => setLastName(e.target.value)} />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-sm font-medium\">Date of Birth</Label>\r\n                        <Input type=\"date\" value={dob} onChange={(e) => setDob(e.target.value)} />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"text-sm font-medium\">LGA</Label>\r\n                        <Input type=\"text\" value={lga} onChange={(e) => setLga(e.target.value)} />\r\n                      </div>\r\n                      <div className=\"space-y-2 md:col-span-2\">\r\n                        <Label className=\"text-sm font-medium\">State</Label>\r\n                        <Input type=\"text\" value={state} onChange={(e) => setState(e.target.value)} />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"text-sm font-medium\">Slip Type</Label>\r\n                      <Select value={slipType} onValueChange={setSlipType}>\r\n                        <SelectTrigger className=\"w-full border-[#CCCCFF] focus:border-[#3457D5]\">\r\n                          <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          {SLIP_TYPES.map((type) => (\r\n                            <SelectItem key={type.value} value={type.value}>\r\n                              {type.label}\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div className=\"space-y-4 border-t border-[#CCCCFF]/50 pt-4\">\r\n                      <div className=\"flex items-start space-x-3\">\r\n                        <Checkbox\r\n                          id=\"consent\"\r\n                          checked={consentChecked}\r\n                          onCheckedChange={(checked) => setConsentChecked(checked === true)}\r\n                          className=\"mt-1 border-[#3457D5] data-[state=checked]:bg-[#3457D5]\"\r\n                        />\r\n                        <Label htmlFor=\"consent\" className=\"text-sm text-gray-700 cursor-pointer leading-relaxed\">\r\n                          I confirm that I have obtained the data subject's consent for this verification.\r\n                        </Label>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-start space-x-3\">\r\n                        <Checkbox\r\n                          id=\"terms\"\r\n                          checked={termsAccepted}\r\n                          onCheckedChange={(checked) => setTermsAccepted(checked === true)}\r\n                          className=\"mt-1 border-[#3457D5] data-[state=checked]:bg-[#3457D5]\"\r\n                        />\r\n                        <Label htmlFor=\"terms\" className=\"text-sm text-gray-700 cursor-pointer leading-relaxed\">\r\n                          I agree to the{\" \"}\r\n                          <Link href=\"/terms\" className=\"text-[#3457D5] hover:underline\">\r\n                            Terms of Service\r\n                          </Link>{\" \"}\r\n                          and{\" \"}\r\n                          <Link href=\"/privacy\" className=\"text-[#3457D5] hover:underline\">\r\n                            Privacy Policy\r\n                          </Link>\r\n                        </Label>\r\n                      </div>\r\n                      {errorMsg ? <p className=\"text-sm text-red-600\">{errorMsg}</p> : null}\r\n                    </div>\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      className=\"w-full bg-[#3457D5] hover:bg-[#3457D5]/90 text-white font-medium py-6\"\r\n                      disabled={!consentChecked || !termsAccepted || isVerifying || isLoading}\r\n                    >\r\n                      {isVerifying ? \"Verifying...\" : (isLoading ? \"Fetching price...\" : `Verify - ₦${servicePrice ?? 0}`)}\r\n                    </Button>\r\n                  </form>\r\n                </CardContent>\r\n              </Card>\r\n            </motion.div>\r\n          ) : (\r\n            <motion.div key=\"result\" initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }}>\r\n              <Card className=\"shadow-lg border-[#CCCCFF]/30\">\r\n                <CardContent className=\"p-8 text-center\">\r\n                  <div className=\"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4\">\r\n                    <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n                  </div>\r\n                  <h2 className=\"text-2xl font-bold mb-2\">Verification Complete!</h2>\r\n                  <p className=\"text-gray-600 mb-6\">Voter's Card has been successfully verified.</p>\r\n                  {(() => {\r\n                    const data: any = apiResult?.data ?? (apiResult as any)?.result ?? {}\r\n                    const fullName = data.full_name || `${data.first_name || \"\"} ${data.last_name || \"\"}`.trim()\r\n                    const vinNum = data.number || data.votersCardNumber || data.vin || number\r\n                    return (\r\n                      <div className=\"text-left max-w-md mx-auto mb-6 text-sm text-gray-700\">\r\n                        <div className=\"flex justify-between\"><span className=\"font-medium\">VIN</span><span>{vinNum}</span></div>\r\n                        {fullName && <div className=\"flex justify-between\"><span className=\"font-medium\">Name</span><span>{fullName}</span></div>}\r\n                      </div>\r\n                    )\r\n                  })()}\r\n                  <Button onClick={generatePDF} className=\"bg-[#3457D5] hover:bg-[#3457D5]/90 text-white\">\r\n                    <Download className=\"h-4 w-4 mr-2\" />\r\n                    Download Slip\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n      <PinPrompt\r\n        isOpen={isPinPromptOpen}\r\n        onClose={() => setIsPinPromptOpen(false)}\r\n        onConfirm={handlePinConfirm}\r\n        isLoading={isVerifying}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}