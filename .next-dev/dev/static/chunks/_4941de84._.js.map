{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/app/dashboard/notifications/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Bell, CheckCheck, Loader2 } from \"lucide-react\"\r\nimport { authFetch } from \"@/lib/client-auth\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface Notification {\r\n    id: string\r\n    type: string\r\n    title: string\r\n    body: string\r\n    createdAt: string\r\n    readAt: string | null\r\n}\r\n\r\nexport default function NotificationsPage() {\r\n    const [notifications, setNotifications] = useState<Notification[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [markingAll, setMarkingAll] = useState(false)\r\n\r\n    const loadNotifications = async () => {\r\n        try {\r\n            const res = await authFetch(\"/api/notifications?limit=50\")\r\n            if (res.ok) {\r\n                const data = await res.json()\r\n                setNotifications(data.notifications || [])\r\n            }\r\n        } catch { } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const markAllRead = async () => {\r\n        setMarkingAll(true)\r\n        try {\r\n            await authFetch(\"/api/notifications\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ markAllRead: true }),\r\n            })\r\n            setNotifications((prev) => prev.map((n) => ({ ...n, readAt: new Date().toISOString() })))\r\n        } catch { } finally {\r\n            setMarkingAll(false)\r\n        }\r\n    }\r\n\r\n    const markAsRead = async (id: string) => {\r\n        try {\r\n            await authFetch(\"/api/notifications\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ ids: [id] }),\r\n            })\r\n            setNotifications((prev) => prev.map((n) => n.id === id ? { ...n, readAt: new Date().toISOString() } : n))\r\n        } catch { }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadNotifications()\r\n    }, [])\r\n\r\n    const formatTimeAgo = (dateStr: string) => {\r\n        const date = new Date(dateStr)\r\n        const now = new Date()\r\n        const diffMs = now.getTime() - date.getTime()\r\n        const diffMins = Math.floor(diffMs / 60000)\r\n        if (diffMins < 60) return `${diffMins} minutes ago`\r\n        const diffHours = Math.floor(diffMins / 60)\r\n        if (diffHours < 24) return `${diffHours} hours ago`\r\n        const diffDays = Math.floor(diffHours / 24)\r\n        return `${diffDays} days ago`\r\n    }\r\n\r\n    const unreadCount = notifications.filter((n) => !n.readAt).length\r\n\r\n    return (\r\n        <div className=\"space-y-6 p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"flex h-12 w-12 items-center justify-center rounded-xl bg-[#3457D5]\">\r\n                        <Bell className=\"h-6 w-6 text-white\" />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold text-[#3457D5]\">Notifications</h1>\r\n                        <p className=\"text-muted-foreground\">View all your notifications</p>\r\n                    </div>\r\n                </div>\r\n                {unreadCount > 0 && (\r\n                    <Button onClick={markAllRead} disabled={markingAll} variant=\"outline\">\r\n                        {markingAll ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <CheckCheck className=\"mr-2 h-4 w-4\" />}\r\n                        Mark all as read ({unreadCount})\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>All Notifications</CardTitle>\r\n                    <CardDescription>\r\n                        {notifications.length} notification{notifications.length !== 1 ? \"s\" : \"\"}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {loading ? (\r\n                        <div className=\"flex items-center justify-center py-8\">\r\n                            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n                        </div>\r\n                    ) : notifications.length === 0 ? (\r\n                        <div className=\"text-center py-8 text-muted-foreground\">\r\n                            <Bell className=\"mx-auto h-12 w-12 mb-4 opacity-50\" />\r\n                            <p>No notifications yet</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"divide-y\">\r\n                            {notifications.map((n) => (\r\n                                <div\r\n                                    key={n.id}\r\n                                    className={cn(\r\n                                        \"py-4 px-2 cursor-pointer hover:bg-muted/50 rounded-lg transition-colors\",\r\n                                        !n.readAt && \"bg-primary/5\"\r\n                                    )}\r\n                                    onClick={() => !n.readAt && markAsRead(n.id)}\r\n                                >\r\n                                    <div className=\"flex items-start justify-between gap-4\">\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <p className=\"font-medium\">{n.title}</p>\r\n                                                {!n.readAt && <Badge variant=\"secondary\" className=\"text-xs\">New</Badge>}\r\n                                            </div>\r\n                                            <p className=\"text-sm text-muted-foreground mt-1\">{n.body}</p>\r\n                                            <p className=\"text-xs text-muted-foreground mt-2\">{formatTimeAgo(n.createdAt)}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/check-check.js","sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/node_modules/lucide-react/src/icons/check-check.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA3IDE3bC01LTUiIC8+CiAgPHBhdGggZD0ibTIyIDEwLTcuNSA3LjVMMTMgMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCheck = createLucideIcon('CheckCheck', [\n  ['path', { d: 'M18 6 7 17l-5-5', key: '116fxf' }],\n  ['path', { d: 'm22 10-7.5 7.5L13 16', key: 'ke71qq' }],\n]);\n\nexport default CheckCheck;\n"],"names":[],"mappings":";;;;;;;;;;;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAa,gLAAA,EAAiB,YAAc,CAAA,CAAA,CAAA;IAChD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAmB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA,CAAA;IAChD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAwB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CACtD,CAAA,CAAA","debugId":null}}]
}