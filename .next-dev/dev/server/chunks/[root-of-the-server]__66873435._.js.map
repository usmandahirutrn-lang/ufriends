{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient | undefined }\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: [\"error\", \"warn\"],\n  })\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/security.ts"],"sourcesContent":["import arcjet, { shield, validateEmail } from \"@arcjet/next\"\n\ntype AJInstance = ReturnType<typeof arcjet> | null\n\n// Create a shared Arcjet instance with common rules.\n// In development, ARCJET_KEY may be missing, so we fail open.\nexport const aj: AJInstance = process.env.ARCJET_KEY\n  ? arcjet({\n      key: process.env.ARCJET_KEY!,\n      rules: [\n        shield({ mode: \"LIVE\" }),\n      ],\n    })\n  : null\n\n// Email-validation instance for routes that need email context\nexport const ajWithEmail: AJInstance = process.env.ARCJET_KEY\n  ? arcjet({\n      key: process.env.ARCJET_KEY!,\n      rules: [\n        shield({ mode: \"LIVE\" }),\n        validateEmail({ mode: \"LIVE\", deny: [\"DISPOSABLE\", \"INVALID\", \"NO_MX_RECORDS\"] }),\n      ],\n    })\n  : null\n\nexport async function protect(req: Request, opts?: { email?: string }) {\n  if (!aj) return { allowed: true }\n  try {\n    const decision = await (opts?.email && ajWithEmail\n      ? (ajWithEmail as any).protect(req as any, { email: opts.email })\n      : (aj as any).protect(req as any))\n    if (decision?.isDenied?.()) return { allowed: false }\n    return { allowed: true }\n  } catch {\n    // Fail open in dev\n    return { allowed: true }\n  }\n}"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;;AAMO,MAAM,KAAiB,QAAQ,GAAG,CAAC,UAAU,GAChD,IAAA,sKAAM,EAAC;IACL,KAAK,QAAQ,GAAG,CAAC,UAAU;IAC3B,OAAO;QACL,IAAA,2IAAM,EAAC;YAAE,MAAM;QAAO;KACvB;AACH,KACA;AAGG,MAAM,cAA0B,QAAQ,GAAG,CAAC,UAAU,GACzD,IAAA,sKAAM,EAAC;IACL,KAAK,QAAQ,GAAG,CAAC,UAAU;IAC3B,OAAO;QACL,IAAA,2IAAM,EAAC;YAAE,MAAM;QAAO;QACtB,IAAA,kJAAa,EAAC;YAAE,MAAM;YAAQ,MAAM;gBAAC;gBAAc;gBAAW;aAAgB;QAAC;KAChF;AACH,KACA;AAEG,eAAe,QAAQ,GAAY,EAAE,IAAyB;IACnE,IAAI,CAAC,IAAI,OAAO;QAAE,SAAS;IAAK;IAChC,IAAI;QACF,MAAM,WAAW,MAAM,CAAC,MAAM,SAAS,cACnC,AAAC,YAAoB,OAAO,CAAC,KAAY;YAAE,OAAO,KAAK,KAAK;QAAC,KAC7D,AAAC,GAAW,OAAO,CAAC,IAAW;QACnC,IAAI,UAAU,cAAc,OAAO;YAAE,SAAS;QAAM;QACpD,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAM;QACN,mBAAmB;QACnB,OAAO;YAAE,SAAS;QAAK;IACzB;AACF","debugId":null}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/validation.ts"],"sourcesContent":["import { z } from \"zod\"\nimport { ZodXssSanitizer, ACTION_LEVELS } from \"zod-xss-sanitizer\"\n\n// Shared XSS sanitizer instance\nexport const sanitizer = ZodXssSanitizer.sanitizer({ actionLevel: ACTION_LEVELS.SANITIZE })\n\nexport function sanitizeEmail(input: string) {\n  return sanitizer.parse(z.string().trim().toLowerCase().email().parse(input))\n}\n\nexport function sanitizeString(input: string) {\n  return sanitizer.parse(z.string().trim().min(1).parse(input))\n}\n\nexport function sanitizePhone(input: string) {\n  const schema = z.string().trim().regex(/^\\+?[0-9]{10,15}$/i, { message: \"Invalid phone\" })\n  return sanitizer.parse(schema.parse(input))\n}\n\nexport function isValidUrl(input: string) {\n  const res = z.string().url().safeParse(input)\n  return res.success\n}"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAGO,MAAM,YAAY,8KAAe,CAAC,SAAS,CAAC;IAAE,aAAa,4KAAa,CAAC,QAAQ;AAAC;AAElF,SAAS,cAAc,KAAa;IACzC,OAAO,UAAU,KAAK,CAAC,yKAAC,CAAC,MAAM,GAAG,IAAI,GAAG,WAAW,GAAG,KAAK,GAAG,KAAK,CAAC;AACvE;AAEO,SAAS,eAAe,KAAa;IAC1C,OAAO,UAAU,KAAK,CAAC,yKAAC,CAAC,MAAM,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;AACxD;AAEO,SAAS,cAAc,KAAa;IACzC,MAAM,SAAS,yKAAC,CAAC,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC,sBAAsB;QAAE,SAAS;IAAgB;IACxF,OAAO,UAAU,KAAK,CAAC,OAAO,KAAK,CAAC;AACtC;AAEO,SAAS,WAAW,KAAa;IACtC,MAAM,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,GAAG,SAAS,CAAC;IACvC,OAAO,IAAI,OAAO;AACpB","debugId":null}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\nimport type { NextAuthOptions } from \"next-auth\"\nimport Credentials from \"next-auth/providers/credentials\"\nimport { prisma } from \"@/lib/db\"\nimport bcrypt from \"bcryptjs\"\nimport { protect } from \"@/lib/security\"\nimport Joi from \"joi\"\nimport { sanitizer } from \"@/lib/validation\"\n\nconst isProd = process.env.NODE_ENV === \"production\"\n\nexport const authOptions: NextAuthOptions = {\n  session: { strategy: \"jwt\" },\n  providers: [\n    Credentials({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials, req) {\n        // Basic input validation with Joi\n        const schema = Joi.object({\n          // Allow non-public TLDs (e.g., .local) in development; enforce strict in production\n          email: isProd\n            ? Joi.string().email().required()\n            : Joi.string().email({ tlds: { allow: false } }).required(),\n          password: Joi.string().min(6).required(),\n        })\n        const { error, value } = schema.validate({\n          email: credentials?.email,\n          password: credentials?.password,\n        })\n        if (error) return null\n\n        // Sanitize email using shared sanitizer\n        const safeEmail = sanitizer.parse(value.email.trim().toLowerCase())\n\n        // Centralized protection: Shield/email validation handled by shared helper\n        try {\n          const sec = await protect(req as any, { email: safeEmail })\n          if (!sec.allowed) return null\n        } catch {\n          // Fail open to avoid login lockouts if Arcjet fails\n        }\n\n        // Credentials auth\n        const user = await prisma.user.findUnique({ where: { email: safeEmail } })\n        if (!user) return null\n        const ok = await bcrypt.compare(value.password, user.passwordHash)\n        if (!ok) return null\n        return { id: user.id, email: user.email, role: user.role }\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        ;(token as any).id = (user as any).id\n        ;(token as any).role = (user as any).role\n      }\n      return token\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        ;(session.user as any).id = (token as any).id\n        ;(session.user as any).role = (token as any).role\n      }\n      return session\n    },\n  },\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,SAAS,oDAAyB;AAEjC,MAAM,cAA+B;IAC1C,SAAS;QAAE,UAAU;IAAM;IAC3B,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW,EAAE,GAAG;gBAC9B,kCAAkC;gBAClC,MAAM,SAAS,gJAAG,CAAC,MAAM,CAAC;oBACxB,oFAAoF;oBACpF,OAAO,sCACH,0BACA,gJAAG,CAAC,MAAM,GAAG,KAAK,CAAC;wBAAE,MAAM;4BAAE,OAAO;wBAAM;oBAAE,GAAG,QAAQ;oBAC3D,UAAU,gJAAG,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,QAAQ;gBACxC;gBACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,OAAO,QAAQ,CAAC;oBACvC,OAAO,aAAa;oBACpB,UAAU,aAAa;gBACzB;gBACA,IAAI,OAAO,OAAO;gBAElB,wCAAwC;gBACxC,MAAM,YAAY,gIAAS,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,GAAG,WAAW;gBAEhE,2EAA2E;gBAC3E,IAAI;oBACF,MAAM,MAAM,MAAM,IAAA,4HAAO,EAAC,KAAY;wBAAE,OAAO;oBAAU;oBACzD,IAAI,CAAC,IAAI,OAAO,EAAE,OAAO;gBAC3B,EAAE,OAAM;gBACN,oDAAoD;gBACtD;gBAEA,mBAAmB;gBACnB,MAAM,OAAO,MAAM,qHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBAAE,OAAO;wBAAE,OAAO;oBAAU;gBAAE;gBACxE,IAAI,CAAC,MAAM,OAAO;gBAClB,MAAM,KAAK,MAAM,8IAAM,CAAC,OAAO,CAAC,MAAM,QAAQ,EAAE,KAAK,YAAY;gBACjE,IAAI,CAAC,IAAI,OAAO;gBAChB,OAAO;oBAAE,IAAI,KAAK,EAAE;oBAAE,OAAO,KAAK,KAAK;oBAAE,MAAM,KAAK,IAAI;gBAAC;YAC3D;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;;gBACN,MAAc,EAAE,GAAG,AAAC,KAAa,EAAE;gBACnC,MAAc,IAAI,GAAG,AAAC,KAAa,IAAI;YAC3C;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;;gBACd,QAAQ,IAAI,CAAS,EAAE,GAAG,AAAC,MAAc,EAAE;gBAC3C,QAAQ,IAAI,CAAS,IAAI,GAAG,AAAC,MAAc,IAAI;YACnD;YACA,OAAO;QACT;IACF;AACF","debugId":null}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/prembly.ts"],"sourcesContent":["/**\r\n * Prembly API Client\r\n * Documentation: https://docs.prembly.com/docs/welcome-to-prembly-documentation\r\n */\r\n\r\nconst PREMBLY_BASE_URL = process.env.PREMBLY_BASE_URL || 'https://api.prembly.com';\r\n\r\ninterface PremblyConfig {\r\n  apiKey: string;\r\n  appId: string;\r\n}\r\n\r\ninterface PremblyResponse<T> {\r\n  status: boolean;\r\n  detail: string;\r\n  data?: T;\r\n  error?: string;\r\n}\r\n\r\n// NIN Service Types\r\ninterface NINPrintoutParams {\r\n  nin: string;\r\n}\r\n\r\ninterface NINSlipParams {\r\n  nin: string;\r\n}\r\n\r\ninterface NINAdvancedParams {\r\n  nin: string;\r\n  phoneNumber?: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  dateOfBirth?: string;\r\n  gender?: string;\r\n}\r\n\r\n// BVN Service Types\r\ninterface BVNPrintoutParams {\r\n  bvn: string;\r\n}\r\n\r\ninterface BVNByPhoneParams {\r\n  phoneNumber: string;\r\n}\r\n\r\ninterface BVNAdvancedParams {\r\n  bvn: string;\r\n}\r\n\r\n// Phone number advanced\r\ninterface PhoneAdvancedParams {\r\n  phoneNumber: string;\r\n}\r\n\r\n// TIN Service Types\r\ninterface TINVerificationParams {\r\n  tin: string;\r\n}\r\n\r\n// Driver's License\r\ninterface DriversLicenseAdvancedParams {\r\n  licenseNumber?: string;\r\n  expiryDate?: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  dob?: string;\r\n}\r\n\r\n// Voters Card\r\ninterface VotersCardParams {\r\n  number: string;\r\n  lastName?: string;\r\n  firstName?: string;\r\n  dob?: string;\r\n  lga?: string;\r\n  state?: string;\r\n}\r\n\r\n// CAC Service Types (Advance)\r\ninterface CACAdvanceParams {\r\n  // unified params aligning to Prembly Advance CAC\r\n  number: string; // RC or BN or IT number\r\n  companyType?: 'RC' | 'BN' | 'IT';\r\n  companyName?: string;\r\n}\r\n\r\n// International Passport\r\ninterface InternationalPassportV2Params {\r\n  passportNumber: string;\r\n  lastName?: string;\r\n}\r\n\r\n// Plate Number\r\ninterface PlateNumberParams {\r\n  plateNumber: string;\r\n}\r\n\r\n/**\r\n * Prembly API Client for identity verification services\r\n */\r\nexport class PremblyClient {\r\n  private apiKey: string;\r\n  private appId: string;\r\n  \r\n  constructor(config: PremblyConfig) {\r\n    this.apiKey = config.apiKey;\r\n    this.appId = config.appId;\r\n  }\r\n\r\n  private async makeRequest<T>(endpoint: string, method: string, data?: any): Promise<PremblyResponse<T>> {\r\n    try {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.log('[Prembly] env check', {\r\n          baseUrl: PREMBLY_BASE_URL,\r\n          endpoint,\r\n          hasApiKey: !!this.apiKey,\r\n          hasAppId: !!this.appId,\r\n        })\r\n      }\r\n      const response = await fetch(`${PREMBLY_BASE_URL}${endpoint}`, {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'x-api-key': this.apiKey,\r\n          'app-id': this.appId,\r\n        },\r\n        body: data ? JSON.stringify(data) : undefined,\r\n      });\r\n\r\n      const contentType = response.headers.get('content-type') || '';\r\n      let result: any;\r\n      if (contentType.includes('application/json')) {\r\n        result = await response.json();\r\n      } else {\r\n        const text = await response.text();\r\n        throw new Error(`Unexpected response from Prembly (${response.status}): ${text.slice(0, 200)}...`);\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        const msg = typeof result?.error === 'string' ? result.error\r\n          : typeof result?.detail === 'string' ? result.detail\r\n          : typeof result?.message === 'string' ? result.message\r\n          : 'Failed to process request';\r\n        throw new Error(msg);\r\n      }\r\n      \r\n      return result;\r\n    } catch (error: any) {\r\n      console.error('Prembly API Error:', error);\r\n      return {\r\n        status: false,\r\n        detail: error.message || 'An error occurred while processing your request',\r\n        error: error.message,\r\n      };\r\n    }\r\n  }\r\n\r\n  // NIN Services\r\n  async getNINPrintout(params: NINPrintoutParams) {\r\n    const payload: any = { number_nin: params.nin }\r\n    return this.makeRequest('/verification/vnin', 'POST', payload);\r\n  }\r\n\r\n  async getNINSlip(params: NINSlipParams) {\r\n    const payload: any = { number_nin: params.nin }\r\n    return this.makeRequest('/verification/vnin', 'POST', payload);\r\n  }\r\n\r\n  async getNINAdvanced(params: NINAdvancedParams) {\r\n    const payload: any = { number_nin: params.nin }\r\n    if (params.phoneNumber) payload.phone_number = params.phoneNumber\r\n    if (params.firstName) payload.first_name = params.firstName\r\n    if (params.lastName) payload.last_name = params.lastName\r\n    if (params.dateOfBirth) payload.date_of_birth = params.dateOfBirth\r\n    if (params.gender) payload.gender = params.gender\r\n    return this.makeRequest('/verification/vnin', 'POST', payload)\r\n  }\r\n\r\n  // BVN Services (use documented endpoints)\r\n  async getBVNPrintout(params: BVNPrintoutParams) {\r\n    const payload = { number: params.bvn } as any\r\n    return this.makeRequest('/verification/bvn', 'POST', payload);\r\n  }\r\n\r\n  async getBVNByPhone(params: BVNByPhoneParams) {\r\n    // Per docs: POST /verification/bvn_with_phone_advance with payload { phone_number }\r\n    const payload = { phone_number: params.phoneNumber } as any;\r\n    return this.makeRequest('/verification/bvn_with_phone_advance', 'POST', payload);\r\n  }\r\n\r\n  async getBVNAdvanced(params: BVNAdvancedParams) {\r\n    return this.makeRequest('/verification/bvn/advance', 'POST', params);\r\n  }\r\n\r\n  // Phone Number (Advanced)\r\n  async verifyPhoneAdvanced(params: PhoneAdvancedParams) {\r\n    const payload = { phone_number: params.phoneNumber } as any\r\n    return this.makeRequest('/verification/phone_number/advance', 'POST', payload)\r\n  }\r\n\r\n  // TIN\r\n  async verifyTIN(params: TINVerificationParams) {\r\n    return this.makeRequest('/verification/global/tin-check', 'POST', params);\r\n  }\r\n\r\n  // Driver's License (Advanced)\r\n  async verifyDriversLicenseAdvanced(params: DriversLicenseAdvancedParams) {\r\n    const payload: any = {}\r\n    if (params.licenseNumber) payload.license_number = params.licenseNumber\r\n    if (params.expiryDate) payload.expiry_date = params.expiryDate\r\n    if (params.firstName) payload.first_name = params.firstName\r\n    if (params.lastName) payload.last_name = params.lastName\r\n    if (params.dob) payload.dob = params.dob\r\n    return this.makeRequest('/verification/drivers_license/advance/v2', 'POST', payload)\r\n  }\r\n\r\n  // Voters Card\r\n  async verifyVotersCard(params: VotersCardParams) {\r\n    const payload: any = { number: params.number }\r\n    if (params.lastName) payload.last_name = params.lastName\r\n    if (params.firstName) payload.first_name = params.firstName\r\n    if (params.dob) payload.dob = params.dob\r\n    if (params.lga) payload.lga = params.lga\r\n    if (params.state) payload.state = params.state\r\n    return this.makeRequest('/verification/voters_card', 'POST', payload)\r\n  }\r\n\r\n  // CAC Services (Advance)\r\n  async getCACInfo(params: CACAdvanceParams) {\r\n    // Docs: POST /verification/cac/advance with rc_number, company_type, company_name\r\n    const payload: any = {}\r\n    if (params.number) payload.rc_number = String(params.number)\r\n    if (params.companyType) payload.company_type = String(params.companyType)\r\n    if (params.companyName) payload.company_name = String(params.companyName)\r\n    return this.makeRequest('/verification/cac/advance', 'POST', payload)\r\n  }\r\n\r\n  async getCACAdvanced(params: CACAdvanceParams) {\r\n    const payload: any = {}\r\n    if (params.number) payload.rc_number = String(params.number)\r\n    if (params.companyType) payload.company_type = String(params.companyType)\r\n    if (params.companyName) payload.company_name = String(params.companyName)\r\n    return this.makeRequest('/verification/cac/advance', 'POST', payload)\r\n  }\r\n\r\n  async getCACStatusReport(params: CACAdvanceParams) {\r\n    const payload: any = {}\r\n    if (params.number) payload.rc_number = String(params.number)\r\n    if (params.companyType) payload.company_type = String(params.companyType)\r\n    if (params.companyName) payload.company_name = String(params.companyName)\r\n    return this.makeRequest('/verification/cac/advance', 'POST', payload)\r\n  }\r\n\r\n  // International Passport v2\r\n  async verifyInternationalPassportV2(params: InternationalPassportV2Params) {\r\n    const payload: any = { passport_number: params.passportNumber }\r\n    if (params.lastName) payload.last_name = params.lastName\r\n    return this.makeRequest('/verification/national_passport_v2', 'POST', payload)\r\n  }\r\n\r\n  // Plate Number\r\n  async verifyPlateNumber(params: PlateNumberParams) {\r\n    const payload = { plate_number: params.plateNumber } as any\r\n    return this.makeRequest('/verification/vehicle', 'POST', payload)\r\n  }\r\n}\r\n\r\n// Create and export a singleton instance with environment variables\r\nexport const premblyClient = new PremblyClient({\r\n  apiKey: process.env.PREMBLY_API_KEY || '',\r\n  appId: process.env.PREMBLY_APP_ID || '',\r\n});\r\n\r\nexport default premblyClient;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/prembly-sdk-adapter.ts"],"sourcesContent":["import premblyHttpClient, { PremblyClient as HttpPremblyClient } from \"./prembly\"\n\n// Optional SDK imports. We keep usage minimal and fallback to HTTP client when unsupported.\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport { PremblyDataVerification, PremblyGeneralVerification, PremblyDocumentVerification, PremblyGlobalBusinessVerification } from \"prembly-pass\"\n\n// Shape normalization helper to keep the same response contract our routes expect\nfunction ok<T>(data: T, detail = \"OK\") {\n  return { status: true, detail, data }\n}\nfunction fail(message: string) {\n  return { status: false, detail: message, error: message }\n}\n\n// Singleton SDK instances (created lazily)\nlet dataVerification: any | null = null\nlet generalVerification: any | null = null\nlet documentVerification: any | null = null\nlet globalBusinessVerification: any | null = null\n\nfunction ensureSdkInstances() {\n  const apiKey = process.env.PREMBLY_API_KEY || \"\"\n  const appId = process.env.PREMBLY_APP_ID || \"\"\n  if (!apiKey || !appId) return false\n  try {\n    if (!dataVerification) dataVerification = new PremblyDataVerification(apiKey, appId)\n    if (!generalVerification) generalVerification = new PremblyGeneralVerification(apiKey, appId)\n    if (!documentVerification) documentVerification = new PremblyDocumentVerification(apiKey, appId)\n    if (!globalBusinessVerification) globalBusinessVerification = new PremblyGlobalBusinessVerification(apiKey, appId)\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\n// Adapter exposing the same methods as our HTTP client. Unknowns fall back to HTTP client.\nconst sdkBackedClient: HttpPremblyClient & Record<string, any> = {\n  // Delegate to original HTTP client's private fields through the instance we import\n  ...(premblyHttpClient as any),\n\n  // Plate Number via SDK (Data Verification)\n  async verifyPlateNumber(params: { plateNumber: string }) {\n    try {\n      if (ensureSdkInstances()) {\n        const res = await dataVerification.verifyPlateNumber(params.plateNumber)\n        // Normalize into our standard response\n        return ok(res)\n      }\n    } catch (e: any) {\n      return fail(e?.message || String(e))\n    }\n    // Fallback to HTTP client\n    return premblyHttpClient.verifyPlateNumber(params)\n  },\n\n  // Everything else falls back to the HTTP client for now\n  async getBVNPrintout(params: any) { return premblyHttpClient.getBVNPrintout(params) },\n  async getBVNByPhone(params: any) { return premblyHttpClient.getBVNByPhone(params) },\n  async getBVNAdvanced(params: any) { return premblyHttpClient.getBVNAdvanced(params) },\n\n  async getNINPrintout(params: any) { return premblyHttpClient.getNINPrintout(params) },\n  async getNINSlip(params: any) { return premblyHttpClient.getNINSlip(params) },\n  async getNINAdvanced(params: any) { return premblyHttpClient.getNINAdvanced(params) },\n\n  async getCACInfo(params: any) { return premblyHttpClient.getCACInfo(params) },\n  async getCACAdvanced(params: any) { return premblyHttpClient.getCACAdvanced(params) },\n  async getCACStatusReport(params: any) { return premblyHttpClient.getCACStatusReport(params) },\n\n  async verifyInternationalPassportV2(params: any) { return premblyHttpClient.verifyInternationalPassportV2(params) },\n  async verifyTIN(params: any) { return premblyHttpClient.verifyTIN(params) },\n  async verifyVotersCard(params: any) { return premblyHttpClient.verifyVotersCard(params) },\n  async verifyPhoneAdvanced(params: any) { return premblyHttpClient.verifyPhoneAdvanced(params) },\n}\n\nexport function getPrembly() {\n  const useSdk = String(process.env.USE_PREMBLY_SDK || \"\").toLowerCase() === \"true\"\n  return useSdk ? (sdkBackedClient as HttpPremblyClient) : premblyHttpClient\n}\n\nexport default getPrembly"],"names":[],"mappings":";;;;;;AAAA;AAEA,4FAA4F;AAC5F,6DAA6D;AAC7D,aAAa;AACb;;;AAEA,kFAAkF;AAClF,SAAS,GAAM,IAAO,EAAE,SAAS,IAAI;IACnC,OAAO;QAAE,QAAQ;QAAM;QAAQ;IAAK;AACtC;AACA,SAAS,KAAK,OAAe;IAC3B,OAAO;QAAE,QAAQ;QAAO,QAAQ;QAAS,OAAO;IAAQ;AAC1D;AAEA,2CAA2C;AAC3C,IAAI,mBAA+B;AACnC,IAAI,sBAAkC;AACtC,IAAI,uBAAmC;AACvC,IAAI,6BAAyC;AAE7C,SAAS;IACP,MAAM,SAAS,QAAQ,GAAG,CAAC,eAAe,IAAI;IAC9C,MAAM,QAAQ,QAAQ,GAAG,CAAC,cAAc,IAAI;IAC5C,IAAI,CAAC,UAAU,CAAC,OAAO,OAAO;IAC9B,IAAI;QACF,IAAI,CAAC,kBAAkB,mBAAmB,IAAI,6KAAuB,CAAC,QAAQ;QAC9E,IAAI,CAAC,qBAAqB,sBAAsB,IAAI,gLAA0B,CAAC,QAAQ;QACvF,IAAI,CAAC,sBAAsB,uBAAuB,IAAI,iLAA2B,CAAC,QAAQ;QAC1F,IAAI,CAAC,4BAA4B,6BAA6B,IAAI,uLAAiC,CAAC,QAAQ;QAC5G,OAAO;IACT,EAAE,OAAO,GAAG;QACV,OAAO;IACT;AACF;AAEA,2FAA2F;AAC3F,MAAM,kBAA2D;IAC/D,mFAAmF;IACnF,GAAI,2HAAiB;IAErB,2CAA2C;IAC3C,MAAM,mBAAkB,MAA+B;QACrD,IAAI;YACF,IAAI,sBAAsB;gBACxB,MAAM,MAAM,MAAM,iBAAiB,iBAAiB,CAAC,OAAO,WAAW;gBACvE,uCAAuC;gBACvC,OAAO,GAAG;YACZ;QACF,EAAE,OAAO,GAAQ;YACf,OAAO,KAAK,GAAG,WAAW,OAAO;QACnC;QACA,0BAA0B;QAC1B,OAAO,2HAAiB,CAAC,iBAAiB,CAAC;IAC7C;IAEA,wDAAwD;IACxD,MAAM,gBAAe,MAAW;QAAI,OAAO,2HAAiB,CAAC,cAAc,CAAC;IAAQ;IACpF,MAAM,eAAc,MAAW;QAAI,OAAO,2HAAiB,CAAC,aAAa,CAAC;IAAQ;IAClF,MAAM,gBAAe,MAAW;QAAI,OAAO,2HAAiB,CAAC,cAAc,CAAC;IAAQ;IAEpF,MAAM,gBAAe,MAAW;QAAI,OAAO,2HAAiB,CAAC,cAAc,CAAC;IAAQ;IACpF,MAAM,YAAW,MAAW;QAAI,OAAO,2HAAiB,CAAC,UAAU,CAAC;IAAQ;IAC5E,MAAM,gBAAe,MAAW;QAAI,OAAO,2HAAiB,CAAC,cAAc,CAAC;IAAQ;IAEpF,MAAM,YAAW,MAAW;QAAI,OAAO,2HAAiB,CAAC,UAAU,CAAC;IAAQ;IAC5E,MAAM,gBAAe,MAAW;QAAI,OAAO,2HAAiB,CAAC,cAAc,CAAC;IAAQ;IACpF,MAAM,oBAAmB,MAAW;QAAI,OAAO,2HAAiB,CAAC,kBAAkB,CAAC;IAAQ;IAE5F,MAAM,+BAA8B,MAAW;QAAI,OAAO,2HAAiB,CAAC,6BAA6B,CAAC;IAAQ;IAClH,MAAM,WAAU,MAAW;QAAI,OAAO,2HAAiB,CAAC,SAAS,CAAC;IAAQ;IAC1E,MAAM,kBAAiB,MAAW;QAAI,OAAO,2HAAiB,CAAC,gBAAgB,CAAC;IAAQ;IACxF,MAAM,qBAAoB,MAAW;QAAI,OAAO,2HAAiB,CAAC,mBAAmB,CAAC;IAAQ;AAChG;AAEO,SAAS;IACd,MAAM,SAAS,OAAO,QAAQ,GAAG,CAAC,eAAe,IAAI,IAAI,WAAW,OAAO;IAC3E,OAAO,SAAU,kBAAwC,2HAAiB;AAC5E;uCAEe","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/app/api/verification/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { getServerSession } from \"next-auth\"\nimport { authOptions } from \"@/lib/auth\"\nimport getPrembly from \"@/lib/prembly-sdk-adapter\"\n\n// Unified verification endpoint\n// POST /api/verification\n// Body: { action: string, params: Record<string, any> }\n// Supported actions (Prembly-backed):\n// - \"bvn.printout\"            => { bvn }\n// - \"bvn.retrieval_phone\"     => { phoneNumber }\n// - \"bvn.advanced\"            => { bvn }\n// - \"nin.printout\"            => { nin }\n// - \"nin.slip\"                => { nin }\n// - \"nin.advanced\"            => { nin, phoneNumber?, firstName?, lastName?, dateOfBirth?, gender? }\n// - \"cac.info\"                => { rcNumber }\n// - \"cac.status\"              => { rcNumber }\n// - \"passport.verify\"         => { passportNumber, lastName? }\n// - \"drivers_license.verify\"  => { licenseNumber?, expiryDate?, firstName?, lastName?, dob? }\n// - \"tin.verify\"              => { tin }\n// - \"voters.verify\"           => { vin }\n// - \"plate.verify\"            => { plateNumber }\n// - \"phone.verify_advanced\"   => { phoneNumber }\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await getServerSession(authOptions)\n    if (!session) {\n      return NextResponse.json({ error: \"Authentication required\" }, { status: 401 })\n    }\n\n    const premblyClient = getPrembly()\n\n    const body = await req.json().catch(() => ({}))\n    const action: string = String(body?.action || \"\").trim()\n    const params: Record<string, any> = (body?.params || {}) as Record<string, any>\n\n    if (!action) {\n      return NextResponse.json({ error: \"Missing 'action' in request body\" }, { status: 400 })\n    }\n\n    // Basic validators per action\n    const requireField = (key: string) => {\n      if (!params[key] || String(params[key]).trim() === \"\") {\n        throw new Error(`Missing required field: ${key}`)\n      }\n    }\n\n    let result: any\n\n    switch (action) {\n      // BVN\n      case \"bvn.printout\": {\n        requireField(\"bvn\")\n        result = await premblyClient.getBVNPrintout({ bvn: String(params.bvn) })\n        break\n      }\n      case \"bvn.retrieval_phone\": {\n        requireField(\"phoneNumber\")\n        result = await premblyClient.getBVNByPhone({ phoneNumber: String(params.phoneNumber) })\n        break\n      }\n      case \"bvn.advanced\": {\n        requireField(\"bvn\")\n        result = await premblyClient.getBVNAdvanced({ bvn: String(params.bvn) })\n        break\n      }\n\n      // NIN\n      case \"nin.printout\": {\n        requireField(\"nin\")\n        result = await premblyClient.getNINPrintout({ nin: String(params.nin) })\n        break\n      }\n      case \"nin.slip\": {\n        requireField(\"nin\")\n        result = await premblyClient.getNINSlip({ nin: String(params.nin) })\n        break\n      }\n      case \"nin.advanced\": {\n        requireField(\"nin\")\n        result = await premblyClient.getNINAdvanced({\n          nin: String(params.nin),\n          phoneNumber: params.phoneNumber ? String(params.phoneNumber) : undefined,\n          firstName: params.firstName ? String(params.firstName) : undefined,\n          lastName: params.lastName ? String(params.lastName) : undefined,\n          dateOfBirth: params.dateOfBirth ? String(params.dateOfBirth) : undefined,\n          gender: params.gender ? String(params.gender) : undefined,\n        })\n        break\n      }\n\n      // CAC (Advance) - supports RC, BN, IT via companyType\n      case \"cac.info\": {\n        const rawNumber = params.number ?? params.rcNumber\n        if (!rawNumber || String(rawNumber).trim() === \"\") throw new Error(\"Missing required field: number\")\n        const companyType = params.companyType ? String(params.companyType).toUpperCase() : undefined\n        const companyName = params.companyName ? String(params.companyName) : undefined\n        result = await premblyClient.getCACInfo({ number: String(rawNumber), companyType: companyType as any, companyName })\n        break\n      }\n      case \"cac.status\": {\n        const rawNumber = params.number ?? params.rcNumber\n        if (!rawNumber || String(rawNumber).trim() === \"\") throw new Error(\"Missing required field: number\")\n        const companyType = params.companyType ? String(params.companyType).toUpperCase() : undefined\n        const companyName = params.companyName ? String(params.companyName) : undefined\n        result = await premblyClient.getCACStatusReport({ number: String(rawNumber), companyType: companyType as any, companyName })\n        break\n      }\n\n      // Passport\n      case \"passport.verify\": {\n        requireField(\"passportNumber\")\n        result = await premblyClient.verifyInternationalPassportV2({\n          passportNumber: String(params.passportNumber),\n          lastName: params.lastName ? String(params.lastName) : undefined,\n        })\n        break\n      }\n\n      // Drivers License (Advanced v2)\n      case \"drivers_license.verify\": {\n        result = await premblyClient.verifyDriversLicenseAdvanced({\n          licenseNumber: params.licenseNumber ? String(params.licenseNumber) : undefined,\n          expiryDate: params.expiryDate ? String(params.expiryDate) : undefined,\n          firstName: params.firstName ? String(params.firstName) : undefined,\n          lastName: params.lastName ? String(params.lastName) : undefined,\n          dob: params.dob ? String(params.dob) : undefined,\n        })\n        break\n      }\n\n      // TIN\n      case \"tin.verify\": {\n        requireField(\"tin\")\n        result = await premblyClient.verifyTIN({ tin: String(params.tin) })\n        break\n      }\n\n      // Voters Card\n      case \"voters.verify\": {\n        requireField(\"number\")\n        result = await premblyClient.verifyVotersCard({\n          number: String(params.number),\n          lastName: params.lastName ? String(params.lastName) : undefined,\n          firstName: params.firstName ? String(params.firstName) : undefined,\n          dob: params.dob ? String(params.dob) : undefined,\n          lga: params.lga ? String(params.lga) : undefined,\n          state: params.state ? String(params.state) : undefined,\n        })\n        break\n      }\n\n      // Plate number\n      case \"plate.verify\": {\n        requireField(\"plateNumber\")\n        result = await premblyClient.verifyPlateNumber({ plateNumber: String(params.plateNumber) })\n        break\n      }\n\n      // Phone (advanced)\n      case \"phone.verify_advanced\": {\n        requireField(\"phoneNumber\")\n        result = await premblyClient.verifyPhoneAdvanced({ phoneNumber: String(params.phoneNumber) })\n        break\n      }\n\n      default:\n        return NextResponse.json({ error: `Unsupported action: ${action}` }, { status: 400 })\n    }\n\n    if (!result?.status) {\n      return NextResponse.json({ error: result?.detail || result?.error || \"Verification failed\" }, { status: 400 })\n    }\n\n    return NextResponse.json(result)\n  } catch (err: any) {\n    const message = err?.message || String(err) || \"Failed to process request\"\n    const isBadRequest = typeof message === \"string\" && message.startsWith(\"Missing required field:\")\n    const status = isBadRequest ? 400 : 500\n    return NextResponse.json({ error: message }, { status })\n  }\n}\n\nexport async function GET() {\n  // Discover supported actions\n  const actions = [\n    \"bvn.printout\",\n    \"bvn.retrieval_phone\",\n    \"bvn.advanced\",\n    \"nin.printout\",\n    \"nin.slip\",\n    \"nin.advanced\",\n    \"cac.info\",\n    \"cac.status\",\n    \"passport.verify\",\n    \"drivers_license.verify\",\n    \"tin.verify\",\n    \"voters.verify\",\n    \"plate.verify\",\n    \"phone.verify_advanced\",\n  ]\n  return NextResponse.json({ ok: true, actions })\n}"],"names":[],"mappings":"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","debugId":null}}]
}