{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/security.ts"],"sourcesContent":["import arcjet, { shield, validateEmail } from \"@arcjet/next\"\n\ntype AJInstance = ReturnType<typeof arcjet> | null\n\n// Create a shared Arcjet instance with common rules.\n// In development, ARCJET_KEY may be missing, so we fail open.\nexport const aj: AJInstance = process.env.ARCJET_KEY\n  ? arcjet({\n      key: process.env.ARCJET_KEY!,\n      rules: [\n        shield({ mode: \"LIVE\" }),\n      ],\n    })\n  : null\n\n// Email-validation instance for routes that need email context\nexport const ajWithEmail: AJInstance = process.env.ARCJET_KEY\n  ? arcjet({\n      key: process.env.ARCJET_KEY!,\n      rules: [\n        shield({ mode: \"LIVE\" }),\n        validateEmail({ mode: \"LIVE\", deny: [\"DISPOSABLE\", \"INVALID\", \"NO_MX_RECORDS\"] }),\n      ],\n    })\n  : null\n\nexport async function protect(req: Request, opts?: { email?: string }) {\n  if (!aj) return { allowed: true }\n  try {\n    const decision = await (opts?.email && ajWithEmail\n      ? (ajWithEmail as any).protect(req as any, { email: opts.email })\n      : (aj as any).protect(req as any))\n    if (decision?.isDenied?.()) return { allowed: false }\n    return { allowed: true }\n  } catch {\n    // Fail open in dev\n    return { allowed: true }\n  }\n}"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;;AAMO,MAAM,KAAiB,QAAQ,GAAG,CAAC,UAAU,GAChD,IAAA,sKAAM,EAAC;IACL,KAAK,QAAQ,GAAG,CAAC,UAAU;IAC3B,OAAO;QACL,IAAA,2IAAM,EAAC;YAAE,MAAM;QAAO;KACvB;AACH,KACA;AAGG,MAAM,cAA0B,QAAQ,GAAG,CAAC,UAAU,GACzD,IAAA,sKAAM,EAAC;IACL,KAAK,QAAQ,GAAG,CAAC,UAAU;IAC3B,OAAO;QACL,IAAA,2IAAM,EAAC;YAAE,MAAM;QAAO;QACtB,IAAA,kJAAa,EAAC;YAAE,MAAM;YAAQ,MAAM;gBAAC;gBAAc;gBAAW;aAAgB;QAAC;KAChF;AACH,KACA;AAEG,eAAe,QAAQ,GAAY,EAAE,IAAyB;IACnE,IAAI,CAAC,IAAI,OAAO;QAAE,SAAS;IAAK;IAChC,IAAI;QACF,MAAM,WAAW,MAAM,CAAC,MAAM,SAAS,cACnC,AAAC,YAAoB,OAAO,CAAC,KAAY;YAAE,OAAO,KAAK,KAAK;QAAC,KAC7D,AAAC,GAAW,OAAO,CAAC,IAAW;QACnC,IAAI,UAAU,cAAc,OAAO;YAAE,SAAS;QAAM;QACpD,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAM;QACN,mBAAmB;QACnB,OAAO;YAAE,SAAS;QAAK;IACzB;AACF","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/jwt.ts"],"sourcesContent":["import { SignJWT, jwtVerify, JWTPayload } from \"jose\";\n\nconst encoder = new TextEncoder();\n\nfunction getAccessSecret() {\n  const secret = process.env.JWT_SECRET || \"dev_access_secret\";\n  return encoder.encode(secret);\n}\n\nfunction getRefreshSecret() {\n  const secret = process.env.JWT_REFRESH_SECRET || \"dev_refresh_secret\";\n  return encoder.encode(secret);\n}\n\nfunction nowSeconds() {\n  return Math.floor(Date.now() / 1000);\n}\n\nexport type TokenPayload = {\n  sub: string; // user id\n  email: string;\n  role: string;\n  jti?: string; // token id for refresh\n};\n\nexport async function signAccessToken(payload: TokenPayload, expiresInSeconds = 15 * 60) {\n  return new SignJWT(payload as JWTPayload)\n    .setProtectedHeader({ alg: \"HS256\" })\n    .setIssuedAt()\n    .setExpirationTime(nowSeconds() + expiresInSeconds)\n    .sign(getAccessSecret());\n}\n\nexport async function signRefreshToken(payload: TokenPayload, expiresInSeconds = 7 * 24 * 60 * 60) {\n  return new SignJWT(payload as JWTPayload)\n    .setProtectedHeader({ alg: \"HS256\" })\n    .setIssuedAt()\n    .setExpirationTime(nowSeconds() + expiresInSeconds)\n    .sign(getRefreshSecret());\n}\n\nexport async function verifyAccessToken<T = TokenPayload>(token: string) {\n  const { payload } = await jwtVerify(token, getAccessSecret());\n  return payload as T;\n}\n\nexport async function verifyRefreshToken<T = TokenPayload>(token: string) {\n  const { payload } = await jwtVerify(token, getRefreshSecret());\n  return payload as T;\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;;AAEA,MAAM,UAAU,IAAI;AAEpB,SAAS;IACP,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;IACzC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAEA,SAAS;IACP,MAAM,SAAS,QAAQ,GAAG,CAAC,kBAAkB,IAAI;IACjD,OAAO,QAAQ,MAAM,CAAC;AACxB;AAEA,SAAS;IACP,OAAO,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;AACjC;AASO,eAAe,gBAAgB,OAAqB,EAAE,mBAAmB,KAAK,EAAE;IACrF,OAAO,IAAI,kKAAO,CAAC,SAChB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,eAAe,kBACjC,IAAI,CAAC;AACV;AAEO,eAAe,iBAAiB,OAAqB,EAAE,mBAAmB,IAAI,KAAK,KAAK,EAAE;IAC/F,OAAO,IAAI,kKAAO,CAAC,SAChB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,eAAe,kBACjC,IAAI,CAAC;AACV;AAEO,eAAe,kBAAoC,KAAa;IACrE,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,sKAAS,EAAC,OAAO;IAC3C,OAAO;AACT;AAEO,eAAe,mBAAqC,KAAa;IACtE,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,sKAAS,EAAC,OAAO;IAC3C,OAAO;AACT","debugId":null}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient | undefined }\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: [\"error\", \"warn\"],\n  })\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/validation.ts"],"sourcesContent":["import { z } from \"zod\"\nimport { ZodXssSanitizer, ACTION_LEVELS } from \"zod-xss-sanitizer\"\n\n// Shared XSS sanitizer instance\nexport const sanitizer = ZodXssSanitizer.sanitizer({ actionLevel: ACTION_LEVELS.SANITIZE })\n\nexport function sanitizeEmail(input: string) {\n  return sanitizer.parse(z.string().trim().toLowerCase().email().parse(input))\n}\n\nexport function sanitizeString(input: string) {\n  return sanitizer.parse(z.string().trim().min(1).parse(input))\n}\n\nexport function sanitizePhone(input: string) {\n  const schema = z.string().trim().regex(/^\\+?[0-9]{10,15}$/i, { message: \"Invalid phone\" })\n  return sanitizer.parse(schema.parse(input))\n}\n\nexport function isValidUrl(input: string) {\n  const res = z.string().url().safeParse(input)\n  return res.success\n}"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAGO,MAAM,YAAY,8KAAe,CAAC,SAAS,CAAC;IAAE,aAAa,4KAAa,CAAC,QAAQ;AAAC;AAElF,SAAS,cAAc,KAAa;IACzC,OAAO,UAAU,KAAK,CAAC,yKAAC,CAAC,MAAM,GAAG,IAAI,GAAG,WAAW,GAAG,KAAK,GAAG,KAAK,CAAC;AACvE;AAEO,SAAS,eAAe,KAAa;IAC1C,OAAO,UAAU,KAAK,CAAC,yKAAC,CAAC,MAAM,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC;AACxD;AAEO,SAAS,cAAc,KAAa;IACzC,MAAM,SAAS,yKAAC,CAAC,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC,sBAAsB;QAAE,SAAS;IAAgB;IACxF,OAAO,UAAU,KAAK,CAAC,OAAO,KAAK,CAAC;AACtC;AAEO,SAAS,WAAW,KAAa;IACtC,MAAM,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,GAAG,SAAS,CAAC;IACvC,OAAO,IAAI,OAAO;AACpB","debugId":null}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\nimport type { NextAuthOptions } from \"next-auth\"\nimport Credentials from \"next-auth/providers/credentials\"\nimport { prisma } from \"@/lib/db\"\nimport bcrypt from \"bcryptjs\"\nimport { protect } from \"@/lib/security\"\nimport Joi from \"joi\"\nimport { sanitizer } from \"@/lib/validation\"\n\nconst isProd = process.env.NODE_ENV === \"production\"\n\nexport const authOptions: NextAuthOptions = {\n  session: { strategy: \"jwt\" },\n  providers: [\n    Credentials({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials, req) {\n        // Basic input validation with Joi\n        const schema = Joi.object({\n          // Allow non-public TLDs (e.g., .local) in development; enforce strict in production\n          email: isProd\n            ? Joi.string().email().required()\n            : Joi.string().email({ tlds: { allow: false } }).required(),\n          password: Joi.string().min(6).required(),\n        })\n        const { error, value } = schema.validate({\n          email: credentials?.email,\n          password: credentials?.password,\n        })\n        if (error) return null\n\n        // Sanitize email using shared sanitizer\n        const safeEmail = sanitizer.parse(value.email.trim().toLowerCase())\n\n        // Centralized protection: Shield/email validation handled by shared helper\n        try {\n          const sec = await protect(req as any, { email: safeEmail })\n          if (!sec.allowed) return null\n        } catch {\n          // Fail open to avoid login lockouts if Arcjet fails\n        }\n\n        // Credentials auth\n        const user = await prisma.user.findUnique({ where: { email: safeEmail } })\n        if (!user) return null\n        const ok = await bcrypt.compare(value.password, user.passwordHash)\n        if (!ok) return null\n        return { id: user.id, email: user.email, role: user.role }\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        ;(token as any).id = (user as any).id\n        ;(token as any).role = (user as any).role\n      }\n      return token\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        ;(session.user as any).id = (token as any).id\n        ;(session.user as any).role = (token as any).role\n      }\n      return session\n    },\n  },\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,SAAS,oDAAyB;AAEjC,MAAM,cAA+B;IAC1C,SAAS;QAAE,UAAU;IAAM;IAC3B,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW,EAAE,GAAG;gBAC9B,kCAAkC;gBAClC,MAAM,SAAS,gJAAG,CAAC,MAAM,CAAC;oBACxB,oFAAoF;oBACpF,OAAO,sCACH,0BACA,gJAAG,CAAC,MAAM,GAAG,KAAK,CAAC;wBAAE,MAAM;4BAAE,OAAO;wBAAM;oBAAE,GAAG,QAAQ;oBAC3D,UAAU,gJAAG,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,QAAQ;gBACxC;gBACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,OAAO,QAAQ,CAAC;oBACvC,OAAO,aAAa;oBACpB,UAAU,aAAa;gBACzB;gBACA,IAAI,OAAO,OAAO;gBAElB,wCAAwC;gBACxC,MAAM,YAAY,gIAAS,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,GAAG,WAAW;gBAEhE,2EAA2E;gBAC3E,IAAI;oBACF,MAAM,MAAM,MAAM,IAAA,4HAAO,EAAC,KAAY;wBAAE,OAAO;oBAAU;oBACzD,IAAI,CAAC,IAAI,OAAO,EAAE,OAAO;gBAC3B,EAAE,OAAM;gBACN,oDAAoD;gBACtD;gBAEA,mBAAmB;gBACnB,MAAM,OAAO,MAAM,qHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBAAE,OAAO;wBAAE,OAAO;oBAAU;gBAAE;gBACxE,IAAI,CAAC,MAAM,OAAO;gBAClB,MAAM,KAAK,MAAM,8IAAM,CAAC,OAAO,CAAC,MAAM,QAAQ,EAAE,KAAK,YAAY;gBACjE,IAAI,CAAC,IAAI,OAAO;gBAChB,OAAO;oBAAE,IAAI,KAAK,EAAE;oBAAE,OAAO,KAAK,KAAK;oBAAE,MAAM,KAAK,IAAI;gBAAC;YAC3D;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;;gBACN,MAAc,EAAE,GAAG,AAAC,KAAa,EAAE;gBACnC,MAAc,IAAI,GAAG,AAAC,KAAa,IAAI;YAC3C;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;;gBACd,QAAQ,IAAI,CAAS,EAAE,GAAG,AAAC,MAAc,EAAE;gBAC3C,QAAQ,IAAI,CAAS,IAAI,GAAG,AAAC,MAAc,IAAI;YACnD;YACA,OAAO;QACT;IACF;AACF","debugId":null}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/jwt-auth.ts"],"sourcesContent":["import { verifyAccessToken } from \"./jwt\"\nimport { getServerSession } from \"next-auth\"\nimport { authOptions } from \"@/lib/auth\"\n\nexport type AuthUser = { id: string; email?: string | null; role?: string | null }\n\nexport async function getAuthUser(req: Request): Promise<AuthUser | null> {\n  // Prefer Authorization: Bearer access token\n  const authHeader = (req as any).headers?.get?.(\"authorization\") || \"\"\n  const [, token] = authHeader.split(\" \")\n  if (authHeader.toLowerCase().startsWith(\"bearer \") && token) {\n    try {\n      const payload: any = await verifyAccessToken(token)\n      return { id: payload.sub, email: payload.email, role: payload.role }\n    } catch {}\n  }\n\n  // Fallback to NextAuth session\n  try {\n    const session = await getServerSession(authOptions)\n    if (session?.user?.id) {\n      return { id: (session.user as any).id, email: session.user.email, role: (session.user as any).role }\n    }\n  } catch {}\n\n  return null\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAIO,eAAe,YAAY,GAAY;IAC5C,4CAA4C;IAC5C,MAAM,aAAa,AAAC,IAAY,OAAO,EAAE,MAAM,oBAAoB;IACnE,MAAM,GAAG,MAAM,GAAG,WAAW,KAAK,CAAC;IACnC,IAAI,WAAW,WAAW,GAAG,UAAU,CAAC,cAAc,OAAO;QAC3D,IAAI;YACF,MAAM,UAAe,MAAM,IAAA,iIAAiB,EAAC;YAC7C,OAAO;gBAAE,IAAI,QAAQ,GAAG;gBAAE,OAAO,QAAQ,KAAK;gBAAE,MAAM,QAAQ,IAAI;YAAC;QACrE,EAAE,OAAM,CAAC;IACX;IAEA,+BAA+B;IAC/B,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,2JAAgB,EAAC,4HAAW;QAClD,IAAI,SAAS,MAAM,IAAI;YACrB,OAAO;gBAAE,IAAI,AAAC,QAAQ,IAAI,CAAS,EAAE;gBAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;gBAAE,MAAM,AAAC,QAAQ,IAAI,CAAS,IAAI;YAAC;QACrG;IACF,EAAE,OAAM,CAAC;IAET,OAAO;AACT","debugId":null}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/require-auth.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { getAuthUser, AuthUser } from \"@/lib/jwt-auth\"\n\nexport type RequireAuthOptions = {\n  roles?: Array<string>\n}\n\nexport type RequireAuthResult = {\n  ok: true\n  user: AuthUser\n} | {\n  ok: false\n  response: NextResponse\n}\n\nexport async function requireAuth(req: Request, options: RequireAuthOptions = {}): Promise<RequireAuthResult> {\n  const user = await getAuthUser(req)\n  if (!user?.id) {\n    return { ok: false, response: NextResponse.json({ error: \"Unauthorized\" }, { status: 401 }) }\n  }\n  if (options.roles && user.role && !options.roles.includes(user.role)) {\n    return { ok: false, response: NextResponse.json({ error: \"Forbidden\" }, { status: 403 }) }\n  }\n  return { ok: true, user }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAcO,eAAe,YAAY,GAAY,EAAE,UAA8B,CAAC,CAAC;IAC9E,MAAM,OAAO,MAAM,IAAA,mIAAW,EAAC;IAC/B,IAAI,CAAC,MAAM,IAAI;QACb,OAAO;YAAE,IAAI;YAAO,UAAU,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QAAG;IAC9F;IACA,IAAI,QAAQ,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,QAAQ,CAAC,KAAK,IAAI,GAAG;QACpE,OAAO;YAAE,IAAI;YAAO,UAAU,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;gBAAE,QAAQ;YAAI;QAAG;IAC3F;IACA,OAAO;QAAE,IAAI;QAAM;IAAK;AAC1B","debugId":null}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/provider-manager.ts"],"sourcesContent":["import { prisma } from \"@/lib/db\"\n\nexport interface ProviderConfig {\n  id: string\n  name: string\n  category: string\n  isActive: boolean\n  priority: number\n  apiBaseUrl: string | null\n  configJson: Record<string, unknown>\n  apiKeys: Array<{\n    id: string\n    keyName: string\n    keyValue: string\n  }>\n}\n\nexport interface ServiceProviderInfo {\n  provider: ProviderConfig | null\n  fallbackProviders: ProviderConfig[]\n  hasActiveProvider: boolean\n}\n\n/**\n * Get the active provider for a specific service category\n */\nexport async function getActiveProvider(category: string): Promise<ServiceProviderInfo> {\n  try {\n    const providers = await prisma.serviceProvider.findMany({\n      where: { category },\n      include: {\n        apiKeys: {\n          select: {\n            id: true,\n            keyName: true,\n            keyValue: true\n          }\n        }\n      },\n      orderBy: [\n        { isActive: \"desc\" },\n        { priority: \"desc\" },\n        { name: \"asc\" }\n      ]\n    })\n\n    const toConfig = (p: typeof providers[number]): ProviderConfig => ({\n      id: p.id,\n      name: p.name,\n      category: p.category,\n      isActive: p.isActive,\n      priority: p.priority,\n      apiBaseUrl: p.apiBaseUrl,\n      configJson: p.configJson as Record<string, unknown>,\n      apiKeys: p.apiKeys\n    })\n\n    const activeProviderRaw = providers.find(p => p.isActive) || null\n    const fallbackProvidersRaw = providers.filter(p => !p.isActive && p.priority > 0)\n\n    return {\n      provider: activeProviderRaw ? toConfig(activeProviderRaw) : null,\n      fallbackProviders: fallbackProvidersRaw.map(toConfig),\n      hasActiveProvider: !!activeProviderRaw\n    }\n  } catch (error) {\n    console.error(`Failed to get active provider for category ${category}:`, error)\n    return {\n      provider: null,\n      fallbackProviders: [],\n      hasActiveProvider: false\n    }\n  }\n}\n\n/**\n * Get API key value by name for a specific provider\n */\nexport async function getProviderApiKey(providerId: string, keyName: string): Promise<string | null> {\n  try {\n    const apiKey = await prisma.providerApiKey.findFirst({\n      where: {\n        providerId,\n        keyName\n      },\n      select: {\n        keyValue: true\n      }\n    })\n\n    return apiKey?.keyValue || null\n  } catch (error) {\n    console.error(`Failed to get API key ${keyName} for provider ${providerId}:`, error)\n    return null\n  }\n}\n\n/**\n * Get all API keys for a provider as a key-value object\n */\nexport async function getProviderApiKeys(providerId: string): Promise<Record<string, string>> {\n  try {\n    const apiKeys = await prisma.providerApiKey.findMany({\n      where: { providerId },\n      select: {\n        keyName: true,\n        keyValue: true\n      }\n    })\n\n    return apiKeys.reduce<Record<string, string>>((acc, key) => {\n      acc[key.keyName] = key.keyValue\n      return acc\n    }, {})\n  } catch (error) {\n    console.error(`Failed to get API keys for provider ${providerId}:`, error)\n    return {}\n  }\n}\n\n/**\n * Check if a provider is available and active\n */\nexport async function isProviderAvailable(category: string): Promise<boolean> {\n  try {\n    const activeProvider = await prisma.serviceProvider.findFirst({\n      where: {\n        category,\n        isActive: true\n      }\n    })\n\n    return !!activeProvider\n  } catch (error) {\n    console.error(`Failed to check provider availability for category ${category}:`, error)\n    return false\n  }\n}\n\n/**\n * Get provider configuration with decrypted API keys\n */\nexport async function getProviderConfig(providerId: string): Promise<ProviderConfig | null> {\n  try {\n    const provider = await prisma.serviceProvider.findUnique({\n      where: { id: providerId },\n      include: {\n        apiKeys: {\n          select: {\n            id: true,\n            keyName: true,\n            keyValue: true\n          }\n        }\n      }\n    })\n\n    if (!provider) return null\n\n    return {\n      id: provider.id,\n      name: provider.name,\n      category: provider.category,\n      isActive: provider.isActive,\n      priority: provider.priority,\n      apiBaseUrl: provider.apiBaseUrl,\n      configJson: provider.configJson as Record<string, unknown>,\n      apiKeys: provider.apiKeys\n    }\n  } catch (error) {\n    console.error(`Failed to get provider config for ${providerId}:`, error)\n    return null\n  }\n}\n\n/**\n * Update provider status (activate/deactivate)\n */\nexport async function updateProviderStatus(providerId: string, isActive: boolean): Promise<boolean> {\n  try {\n    await prisma.serviceProvider.update({\n      where: { id: providerId },\n      data: { \n        isActive,\n        updatedAt: new Date()\n      }\n    })\n    return true\n  } catch (error) {\n    console.error(`Failed to update provider status for ${providerId}:`, error)\n    return false\n  }\n}\n\n/**\n * Get all providers for a category with their status\n */\nexport async function getCategoryProviders(category: string): Promise<ProviderConfig[]> {\n  try {\n    const providers = await prisma.serviceProvider.findMany({\n      where: { category },\n      include: {\n        apiKeys: {\n          select: {\n            id: true,\n            keyName: true,\n            keyValue: true\n          }\n        }\n      },\n      orderBy: [\n        { isActive: \"desc\" },\n        { priority: \"desc\" },\n        { name: \"asc\" }\n      ]\n    })\n\n    return providers.map((p) => ({\n      id: p.id,\n      name: p.name,\n      category: p.category,\n      isActive: p.isActive,\n      priority: p.priority,\n      apiBaseUrl: p.apiBaseUrl,\n      configJson: p.configJson as Record<string, unknown>,\n      apiKeys: p.apiKeys\n    }))\n  } catch (error) {\n    console.error(`Failed to get providers for category ${category}:`, error)\n    return []\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 776, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/lib/services-config.ts"],"sourcesContent":["import { getActiveProvider, isProviderAvailable, type ServiceProviderInfo } from \"./provider-manager\"\n\nexport const UFRIENDS_SERVICES = [\n  {\n    id: \"airtime\",\n    name: \"Airtime\",\n    description: \"Buy airtime for all networks instantly\",\n    icon: \"Smartphone\",\n    color: \"text-blue-600\",\n    commission: \"5-8%\",\n    subServices: [\n      { id: \"vtu\", name: \"VTU\", description: \"Virtual Top-Up for instant airtime recharge\" },\n      { id: \"share-n-sell\", name: \"Share 'n Sell\", description: \"Share and sell airtime to earn commissions\" },\n      { id: \"airtime-2-cash\", name: \"Airtime 2 Cash\", description: \"Convert excess airtime to cash\" },\n    ],\n  },\n  {\n    id: \"data\",\n    name: \"Data\",\n    description: \"Purchase data bundles at competitive rates\",\n    icon: \"Wifi\",\n    color: \"text-green-600\",\n    commission: \"5-8%\",\n    subServices: [\n      { id: \"sme\", name: \"SME Data\", description: \"Affordable SME data bundles for all networks\" },\n      { id: \"corporate\", name: \"Corporate Data\", description: \"Corporate data plans for businesses\" },\n      { id: \"gift\", name: \"Gift Data\", description: \"Send data bundles as gifts\" },\n    ],\n  },\n  {\n    id: \"bills\",\n    name: \"Bills\",\n    description: \"Pay utility bills conveniently\",\n    icon: \"Receipt\",\n    color: \"text-orange-600\",\n    commission: \"3-5%\",\n    subServices: [\n      { id: \"electricity\", name: \"Electricity\", description: \"Pay electricity bills\" },\n      { id: \"water\", name: \"Water\", description: \"Pay water bills\" },\n      { id: \"internet\", name: \"Internet\", description: \"Pay internet bills\" },\n    ],\n  },\n  {\n    id: \"bvn\",\n    name: \"BVN Services\",\n    description: \"BVN verification and related services\",\n    icon: \"UserCheck\",\n    color: \"text-purple-600\",\n    commission: \"8-12%\",\n    subServices: [\n      { id: \"android-license\", name: \"Android License\", description: \"BVN Android license for mobile banking\" },\n      { id: \"modification\", name: \"BVN Modification\", description: \"Update and modify BVN details\" },\n      { id: \"retrieval\", name: \"BVN Retrieval\", description: \"Retrieve forgotten BVN\" },\n      { id: \"central-risk\", name: \"Central Risk Management\", description: \"Check central risk status\" },\n      { id: \"printout\", name: \"BVN Print Out\", description: \"Print BVN slip and documents\" },\n    ],\n  },\n  {\n    id: \"nin\",\n    name: \"NIN Services\",\n    description: \"National ID verification services\",\n    icon: \"IdCard\",\n    color: \"text-red-600\",\n    commission: \"8-12%\",\n    subServices: [\n      { id: \"validation\", name: \"NIN Validation\", description: \"Validate National ID numbers\" },\n      { id: \"verification\", name: \"NIN Verification\", description: \"Verify NIN details\" },\n    ],\n  },\n  {\n    id: \"cac\",\n    name: \"CAC Registration\",\n    description: \"Business registration and incorporation\",\n    icon: \"Building2\",\n    color: \"text-indigo-600\",\n    commission: \"10-15%\",\n    subServices: [\n      { id: \"registration\", name: \"CAC Registration\", description: \"Register new business with CAC\" },\n      { id: \"status-report\", name: \"Status Report\", description: \"Get CAC status report\" },\n      { id: \"certification\", name: \"Certification\", description: \"Get CAC certification\" },\n    ],\n  },\n  {\n    id: \"education\",\n    name: \"Education\",\n    description: \"Educational services and resources\",\n    icon: \"GraduationCap\",\n    color: \"text-teal-600\",\n    commission: \"5-10%\",\n    subServices: [\n      { id: \"jamb\", name: \"JAMB Services\", description: \"JAMB registration and services\" },\n      { id: \"nysc\", name: \"NYSC Services\", description: \"NYSC registration and services\" },\n    ],\n  },\n  {\n    id: \"agency-banking\",\n    name: \"Agency Banking\",\n    description: \"POS and banking services\",\n    icon: \"Banknote\",\n    color: \"text-yellow-600\",\n    commission: \"10-15%\",\n    subServices: [\n      { id: \"pos\", name: \"POS Terminals\", description: \"POS terminal acquisition and management\" },\n      { id: \"marketer\", name: \"Marketer Program\", description: \"Become a UFriends marketer\" },\n    ],\n  },\n  {\n    id: \"verification\",\n    name: \"Verification\",\n    description: \"Identity and document verification\",\n    icon: \"ShieldCheck\",\n    color: \"text-pink-600\",\n    commission: \"8-12%\",\n    subServices: [\n      { id: \"identity\", name: \"Identity Verification\", description: \"Verify identity documents\" },\n      { id: \"document\", name: \"Document Verification\", description: \"Verify official documents\" },\n    ],\n  },\n  {\n    id: \"training\",\n    name: \"Training\",\n    description: \"Professional training and development\",\n    icon: \"BookOpen\",\n    color: \"text-cyan-600\",\n    commission: \"5-10%\",\n    subServices: [\n      { id: \"online\", name: \"Online Training\", description: \"Online professional courses\" },\n      { id: \"certification\", name: \"Certification\", description: \"Professional certifications\" },\n    ],\n  },\n  {\n    id: \"software-development\",\n    name: \"Software Development\",\n    description: \"Custom software solutions\",\n    icon: \"Code\",\n    color: \"text-violet-600\",\n    commission: \"15-20%\",\n    subServices: [\n      { id: \"web\", name: \"Web Development\", description: \"Custom web applications\" },\n      { id: \"mobile\", name: \"Mobile Development\", description: \"Mobile app development\" },\n    ],\n  },\n]\n\ntype ServiceDef = typeof UFRIENDS_SERVICES[number]\nexport type ServiceWithProvider = ServiceDef & {\n  providerInfo?: ServiceProviderInfo\n  isAvailable?: boolean\n}\n\nexport function getServiceById(id: string) {\n  return UFRIENDS_SERVICES.find(service => service.id === id)\n}\n\nexport function getAllSubServices() {\n  return UFRIENDS_SERVICES.flatMap(service => \n    service.subServices.map(subService => ({\n      ...subService,\n      parentService: service.name,\n      parentId: service.id,\n      commission: service.commission\n    }))\n  )\n}\n\n/**\n * Get service with provider information\n */\nexport async function getServiceWithProvider(id: string): Promise<ServiceWithProvider | undefined> {\n  const service = getServiceById(id)\n  if (!service) return undefined\n\n  try {\n    const providerInfo = await getActiveProvider(id)\n    const isAvailable = await isProviderAvailable(id)\n\n    return {\n      ...service,\n      providerInfo,\n      isAvailable\n    }\n  } catch (error) {\n    console.error(`Failed to get provider info for service ${id}:`, error)\n    return {\n      ...service,\n      isAvailable: false\n    }\n  }\n}\n\n/**\n * Get all services with their provider availability status\n */\nexport async function getAllServicesWithProviders(): Promise<ServiceWithProvider[]> {\n  const servicesWithProviders = await Promise.all(\n    UFRIENDS_SERVICES.map(async (service) => {\n      try {\n        const providerInfo = await getActiveProvider(service.id)\n        const isAvailable = await isProviderAvailable(service.id)\n\n        return {\n          ...service,\n          providerInfo,\n          isAvailable\n        }\n      } catch (error) {\n        console.error(`Failed to get provider info for service ${service.id}:`, error)\n        return {\n          ...service,\n          isAvailable: false\n        }\n      }\n    })\n  )\n\n  return servicesWithProviders\n}\n\n/**\n * Check if a service category has an active provider\n */\nexport async function hasActiveProvider(serviceId: string): Promise<boolean> {\n  try {\n    return await isProviderAvailable(serviceId)\n  } catch (error) {\n    console.error(`Failed to check provider availability for service ${serviceId}:`, error)\n    return false\n  }\n}\n\n/**\n * Get available services (those with active providers)\n */\nexport async function getAvailableServices(): Promise<ServiceWithProvider[]> {\n  const allServices = await getAllServicesWithProviders()\n  return allServices.filter(service => service.isAvailable)\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Downloads/ufriends%20version%201/app/api/admin/services/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\nimport { protect } from \"@/lib/security\"\nimport { requireAuth } from \"@/lib/require-auth\"\nimport { getAllServicesWithProviders } from \"@/lib/services-config\"\n\n// GET /api/admin/services\n// Returns the service catalogue enriched with providerInfo and availability\nexport async function GET(req: NextRequest) {\n  try {\n    const auth = await requireAuth(req, { roles: [\"ADMIN\"] })\n    if (!auth.ok) return auth.response\n\n    const sec = await protect(req as any)\n    if (!sec.allowed) {\n      return NextResponse.json({ error: \"Forbidden\" }, { status: 403 })\n    }\n\n    const services = await getAllServicesWithProviders()\n    return NextResponse.json({ ok: true, services })\n  } catch (err) {\n    return NextResponse.json({ error: \"Failed to list services\", detail: String(err) }, { status: 500 })\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAIO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,uIAAW,EAAC,KAAK;YAAE,OAAO;gBAAC;aAAQ;QAAC;QACvD,IAAI,CAAC,KAAK,EAAE,EAAE,OAAO,KAAK,QAAQ;QAElC,MAAM,MAAM,MAAM,IAAA,4HAAO,EAAC;QAC1B,IAAI,CAAC,IAAI,OAAO,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;gBAAE,QAAQ;YAAI;QACjE;QAEA,MAAM,WAAW,MAAM,IAAA,0JAA2B;QAClD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM;QAAS;IAChD,EAAE,OAAO,KAAK;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAA2B,QAAQ,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IACpG;AACF","debugId":null}}]
}