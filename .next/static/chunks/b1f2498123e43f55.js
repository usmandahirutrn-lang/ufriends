(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,184762,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},947627,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function l({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function r({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function i({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function n({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function c({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>r,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>l,"TableRow",()=>i])},851315,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(167881),l=e.i(970065),r=e.i(23750),i=e.i(10708),n=e.i(184762),c=e.i(62870),d=e.i(630374),o=e.i(994179),x=e.i(947627),u=e.i(692659),h=e.i(63209),m=e.i(269638);function j(){let[e,j]=(0,a.useState)([]),[b,g]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)(""),[S,T]=(0,a.useState)(""),[C,y]=(0,a.useState)(""),[w,D]=(0,a.useState)(!1),[I,R]=(0,a.useState)([]),[B,L]=(0,a.useState)(!1),[E,A]=(0,a.useState)(!1),H=async()=>{try{let e=await (0,u.authFetch)("/api/disputes"),t=await e.json();t.ok&&j(t.data)}catch(e){console.error("Failed to fetch disputes",e)}finally{g(!1)}};(0,a.useEffect)(()=>{H()},[]),(0,a.useEffect)(()=>{v?(async()=>{L(!0);try{let e=await (0,u.authFetch)(`/api/user/transactions/recent?category=${v}`),t=await e.json();t.ok&&(R(t.data),E||y(""))}catch(e){console.error(e)}finally{L(!1)}})():R([])},[v]);let k=async e=>{e.preventDefault(),D(!0);try{(await (0,u.authFetch)("/api/disputes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:v,issue:S,reference:C})})).ok?(f(!1),N(""),T(""),y(""),A(!1),H()):alert("Failed to create dispute")}catch(e){console.error("Failed to submit dispute",e)}finally{D(!1)}};return(0,t.jsxs)("div",{className:"container py-8 max-w-6xl",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Dispute Center"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Track and manage your service complaints"})]}),(0,t.jsxs)(d.Dialog,{open:p,onOpenChange:f,children:[(0,t.jsx)(d.DialogTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{children:"Log a New Dispute"})}),(0,t.jsxs)(d.DialogContent,{className:"max-w-lg",children:[(0,t.jsx)(d.DialogHeader,{children:(0,t.jsx)(d.DialogTitle,{children:"Log a Service Dispute"})}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"service",children:"Service Category"}),(0,t.jsxs)(c.Select,{value:v,onValueChange:N,required:!0,children:[(0,t.jsx)(c.SelectTrigger,{children:(0,t.jsx)(c.SelectValue,{placeholder:"Select Service"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"BVN",children:"BVN Services"}),(0,t.jsx)(c.SelectItem,{value:"NIN",children:"NIN Services"}),(0,t.jsx)(c.SelectItem,{value:"CAC",children:"CAC Registration"}),(0,t.jsx)(c.SelectItem,{value:"AIRTIME",children:"Airtime"}),(0,t.jsx)(c.SelectItem,{value:"DATA",children:"Data"}),(0,t.jsx)(c.SelectItem,{value:"BILLS",children:"Bills"}),(0,t.jsx)(c.SelectItem,{value:"WALLET",children:"Wallet/Payment"}),(0,t.jsx)(c.SelectItem,{value:"OTHER",children:"Other"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.Label,{htmlFor:"reference",children:"Transaction"}),(0,t.jsx)(s.Button,{type:"button",variant:"link",className:"h-auto p-0 text-xs",onClick:()=>{A(!E),y("")},children:E?"Select Transaction":"Enter Reference Manually"})]}),E?(0,t.jsx)(r.Input,{id:"reference",value:C,onChange:e=>y(e.target.value),placeholder:"e.g. TX-123456"}):(0,t.jsxs)(c.Select,{value:C,onValueChange:y,children:[(0,t.jsx)(c.SelectTrigger,{disabled:!v||B,children:(0,t.jsx)(c.SelectValue,{placeholder:B?"Loading transactions...":v?0===I.length?"No recent transactions found":"Select a transaction":"Select a service first"})}),(0,t.jsxs)(c.SelectContent,{children:[I.map(e=>(0,t.jsx)(c.SelectItem,{value:e.reference,children:(0,t.jsxs)("div",{className:"flex flex-col text-left",children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.subservice||e.category," - ₦",Number(e.amount).toLocaleString()]}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[new Date(e.createdAt).toLocaleDateString()," • ",e.reference," • ",e.status]})]})},e.id)),0===I.length&&(0,t.jsx)(c.SelectItem,{value:"none",disabled:!0,children:"No recent transactions"})]})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground",children:!E&&"Select the transaction related to your complaint."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"issue",children:"Issue Description"}),(0,t.jsx)(n.Textarea,{id:"issue",value:S,onChange:e=>T(e.target.value),placeholder:"Describe your issue in detail...",required:!0})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,t.jsx)(s.Button,{type:"submit",disabled:w,children:w?"Submitting...":"Submit Dispute"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Disputes"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.length})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Detailed Status"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.AlertCircle,{className:"w-4 h-4 text-orange-500"}),e.filter(e=>"OPEN"===e.status).length," Open"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.CheckCircle,{className:"w-4 h-4 text-green-500"}),e.filter(e=>"RESOLVED"===e.status).length," Resolved"]})]})})]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:"My Disputes"}),(0,t.jsx)(l.CardDescription,{children:"History of your reported issues"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)(x.Table,{children:[(0,t.jsx)(x.TableHeader,{children:(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableHead,{children:"Date"}),(0,t.jsx)(x.TableHead,{children:"Service"}),(0,t.jsx)(x.TableHead,{children:"Reference"}),(0,t.jsx)(x.TableHead,{children:"Issue"}),(0,t.jsx)(x.TableHead,{children:"Status"}),(0,t.jsx)(x.TableHead,{children:"Admin Notes"})]})}),(0,t.jsx)(x.TableBody,{children:b?(0,t.jsx)(x.TableRow,{children:(0,t.jsx)(x.TableCell,{colSpan:6,className:"text-center h-24",children:"Loading disputes..."})}):0===e.length?(0,t.jsx)(x.TableRow,{children:(0,t.jsx)(x.TableCell,{colSpan:6,className:"text-center h-24 text-muted-foreground",children:"No disputes found."})}):e.map(e=>(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableCell,{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsx)(x.TableCell,{children:e.service}),(0,t.jsx)(x.TableCell,{className:"font-mono text-xs",children:e.reference||"—"}),(0,t.jsx)(x.TableCell,{className:"max-w-[200px] truncate",title:e.issue,children:e.issue}),(0,t.jsx)(x.TableCell,{children:(e=>{switch(e){case"RESOLVED":return(0,t.jsx)(o.Badge,{className:"bg-green-600",children:"Resolved"});case"OPEN":return(0,t.jsx)(o.Badge,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Open"});case"IN_PROGRESS":return(0,t.jsx)(o.Badge,{variant:"outline",className:"border-blue-500 text-blue-500",children:"In Progress"});case"ESCALATED":return(0,t.jsx)(o.Badge,{variant:"destructive",children:"Escalated"});default:return(0,t.jsx)(o.Badge,{variant:"outline",children:e})}})(e.status)}),(0,t.jsx)(x.TableCell,{className:"text-sm text-muted-foreground",children:e.adminNotes||"—"})]},e.id))})]})})]})]})}e.s(["default",()=>j])}]);