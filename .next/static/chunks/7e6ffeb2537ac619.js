(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,595468,e=>{"use strict";let s=(0,e.i(475254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],595468)},440160,e=>{"use strict";let s=(0,e.i(475254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>s],440160)},286536,e=>{"use strict";let s=(0,e.i(475254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],286536)},947627,e=>{"use strict";var s=e.i(843476),a=e.i(647163);function t({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...t})})}function l({className:e,...t}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...t})}function r({className:e,...t}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...t})}function c({className:e,...t}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function i({className:e,...t}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function n({className:e,...t}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}e.s(["Table",()=>t,"TableBody",()=>r,"TableCell",()=>n,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>c])},503116,e=>{"use strict";let s=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],503116)},373884,e=>{"use strict";let s=(0,e.i(475254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],373884)},473708,e=>{"use strict";let s=(0,e.i(475254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>s],473708)},16715,e=>{"use strict";let s=(0,e.i(475254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],16715)},778917,e=>{"use strict";let s=(0,e.i(475254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>s],778917)},276515,e=>{"use strict";var s=e.i(843476),a=e.i(271645),t=e.i(846932),l=e.i(970065),r=e.i(994179),c=e.i(167881),i=e.i(671428),n=e.i(947627),d=e.i(630374),o=e.i(62870),x=e.i(191741),m=e.i(440160),u=e.i(778917),h=e.i(286536),j=e.i(178583),p=e.i(473708),g=e.i(503116),b=e.i(595468),f=e.i(373884),N=e.i(63209),y=e.i(16715),v=e.i(692659),w=e.i(846696),C=e.i(647163);function k(){let[e,k]=(0,a.useState)([]),[S,T]=(0,a.useState)(!0),[D,E]=(0,a.useState)("all"),[R,U]=(0,a.useState)(null),[B,q]=(0,a.useState)(!1),H=async()=>{T(!0);try{let e="all"!==D?`?status=${D}`:"",s=await (0,v.authFetch)(`/api/me/requests${e}`);if(s.ok){let e=await s.json();k(e.data||[])}else w.toast.error("Failed to load requests")}catch(e){w.toast.error("Failed to load requests")}finally{T(!1)}};(0,a.useEffect)(()=>{H()},[D]);let A=e=>{switch(e){case"SUBMITTED":return(0,s.jsxs)(r.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[(0,s.jsx)(g.Clock,{className:"w-3 h-3 mr-1"}),"Submitted"]});case"ONGOING":return(0,s.jsxs)(r.Badge,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[(0,s.jsx)(y.RefreshCw,{className:"w-3 h-3 mr-1"}),"Processing"]});case"SUCCESS":return(0,s.jsxs)(r.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[(0,s.jsx)(b.CheckCircle2,{className:"w-3 h-3 mr-1"}),"Completed"]});case"REJECTED":return(0,s.jsxs)(r.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[(0,s.jsx)(f.XCircle,{className:"w-3 h-3 mr-1"}),"Rejected"]});case"CANCELLED":return(0,s.jsxs)(r.Badge,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:[(0,s.jsx)(f.XCircle,{className:"w-3 h-3 mr-1"}),"Cancelled"]});default:return(0,s.jsx)(r.Badge,{variant:"outline",children:e})}},L=e=>e.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,s.jsx)(p.Image,{className:"w-4 h-4"}):(0,s.jsx)(j.FileText,{className:"w-4 h-4"});return S?(0,s.jsxs)("div",{className:"space-y-6 p-6",children:[(0,s.jsx)(i.Skeleton,{className:"h-10 w-48"}),(0,s.jsx)(i.Skeleton,{className:"h-96 w-full"})]}):(0,s.jsxs)(t.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"My Service Requests"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Track the status of your service requests and view completed proofs"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(o.Select,{value:D,onValueChange:E,children:[(0,s.jsx)(o.SelectTrigger,{className:"w-[180px]",children:(0,s.jsx)(o.SelectValue,{placeholder:"Filter by status"})}),(0,s.jsxs)(o.SelectContent,{children:[(0,s.jsx)(o.SelectItem,{value:"all",children:"All Statuses"}),(0,s.jsx)(o.SelectItem,{value:"SUBMITTED",children:"Submitted"}),(0,s.jsx)(o.SelectItem,{value:"ONGOING",children:"Processing"}),(0,s.jsx)(o.SelectItem,{value:"SUCCESS",children:"Completed"}),(0,s.jsx)(o.SelectItem,{value:"REJECTED",children:"Rejected"})]})]}),(0,s.jsx)(c.Button,{onClick:H,variant:"outline",size:"icon",children:(0,s.jsx)(y.RefreshCw,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.ClipboardList,{className:"h-5 w-5 text-[#3457D5]"}),"Service Request History"]}),(0,s.jsx)(l.CardDescription,{children:"View all your service requests and their current status"})]}),(0,s.jsx)(l.CardContent,{children:0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(N.AlertCircle,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Requests Found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"You haven't made any service requests yet."})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(n.Table,{children:[(0,s.jsx)(n.TableHeader,{children:(0,s.jsxs)(n.TableRow,{children:[(0,s.jsx)(n.TableHead,{children:"Date"}),(0,s.jsx)(n.TableHead,{children:"Reference"}),(0,s.jsx)(n.TableHead,{children:"Service"}),(0,s.jsx)(n.TableHead,{children:"Amount"}),(0,s.jsx)(n.TableHead,{children:"Status"}),(0,s.jsx)(n.TableHead,{children:"Proof"}),(0,s.jsx)(n.TableHead,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(n.TableBody,{children:e.map(e=>(0,s.jsxs)(n.TableRow,{children:[(0,s.jsx)(n.TableCell,{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsxs)(n.TableCell,{className:"font-mono text-xs",children:[e.reference?.slice(0,12),"..."]}),(0,s.jsx)(n.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium uppercase",children:e.category}),e.subservice&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.subservice})]})}),(0,s.jsxs)(n.TableCell,{className:"font-semibold",children:["₦",e.amount.toLocaleString()]}),(0,s.jsx)(n.TableCell,{children:A(e.status)}),(0,s.jsx)(n.TableCell,{children:e.proofUrl?(0,s.jsxs)(c.Button,{variant:"link",size:"sm",className:"text-[#3457D5] p-0 h-auto gap-1",onClick:()=>window.open((0,C.ensureAbsoluteUrl)(e.proofUrl),"_blank"),children:[L(e.proofUrl),"View Proof",(0,s.jsx)(u.ExternalLink,{className:"w-3 h-3"})]}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})}),(0,s.jsx)(n.TableCell,{className:"text-right",children:(0,s.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:()=>{U(e),q(!0)},children:[(0,s.jsx)(h.Eye,{className:"w-4 h-4 mr-1"}),"Details"]})})]},e.id))})]})})})]}),(0,s.jsx)(d.Dialog,{open:B,onOpenChange:q,children:(0,s.jsxs)(d.DialogContent,{className:"max-w-lg",children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{children:"Request Details"}),(0,s.jsxs)(d.DialogDescription,{children:["Reference: ",(0,s.jsx)("span",{className:"font-mono",children:R?.reference})]})]}),R&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase",children:"Service"}),(0,s.jsx)("p",{className:"font-medium",children:R.category}),R.subservice&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:R.subservice})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase",children:"Amount"}),(0,s.jsxs)("p",{className:"font-semibold",children:["₦",R.amount.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase",children:"Status"}),A(R.status)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase",children:"Date"}),(0,s.jsx)("p",{className:"text-sm",children:new Date(R.createdAt).toLocaleString()})]})]}),R.adminNotes&&(0,s.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 border",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase mb-1",children:"Admin Notes"}),(0,s.jsx)("p",{className:"text-sm",children:R.adminNotes})]}),R.proofUrl&&(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,s.jsxs)("p",{className:"text-xs text-green-700 uppercase mb-2 flex items-center gap-1",children:[(0,s.jsx)(b.CheckCircle2,{className:"w-3 h-3"}),"Proof of Completion"]}),R.proofUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("img",{src:R.proofUrl,alt:"Proof",className:"max-w-full rounded-lg border"}),(0,s.jsxs)(c.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open((0,C.ensureAbsoluteUrl)(R.proofUrl),"_blank"),children:[(0,s.jsx)(m.Download,{className:"w-4 h-4 mr-2"}),"Download Proof"]})]}):(0,s.jsxs)(c.Button,{variant:"outline",className:"w-full",onClick:()=>window.open((0,C.ensureAbsoluteUrl)(R.proofUrl),"_blank"),children:[L(R.proofUrl),(0,s.jsx)("span",{className:"ml-2",children:"View/Download Proof"}),(0,s.jsx)(u.ExternalLink,{className:"w-4 h-4 ml-2"})]})]}),R.meta?.params&&Object.keys(R.meta.params).length>0&&(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground uppercase mb-2",children:"Your Submitted Details"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(R.meta.params).map(([e,a])=>(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.replace(/([A-Z])/g," $1").trim()}),(0,s.jsx)("p",{className:"font-medium break-all",children:String(a)})]},e))})]})]})]})})]})}e.s(["default",()=>k])}]);