(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,750769,e=>{"use strict";var t=e.i(271645),i=e.i(692659);function r(e){try{let t=String(e?.role||"").toLowerCase(),i=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return t.includes("marketer")||i.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function a(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let t=await e.json().catch(()=>null);return r(t?.user||t)}catch{return"user"}}function s(e,s,n,l,o){let[c,d]=(0,t.useState)(()=>r(o)),[u,m]=(0,t.useState)(null),[g,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null),[x,v]=(0,t.useState)(void 0),y=(0,t.useMemo)(()=>({category:String(e||"").trim(),subservice:String(s||"").trim(),variant:String(n||"").trim()}),[e,s,n]),b=(0,t.useMemo)(()=>{if(!l||"object"!=typeof l)return"";let e=Object.entries(l).filter(([e,t])=>null!=t);return e.length?(e.sort(([e],[t])=>e.localeCompare(t)),e.map(([e,t])=>`${e}=${String(t)}`).join("|")):""},[l]);return(0,t.useEffect)(()=>{let e=!1;return(async()=>{h(!0),p(null);try{let t=o?r(o):await a();e||d(t);let i=[["category",y.category],["subservice",y.subservice],["variant",y.variant],["role",t]];if(l&&"object"==typeof l){let e=Object.entries(l).filter(([e,t])=>null!=t);for(let[t,r]of(e.sort(([e],[t])=>e.localeCompare(t)),e))i.push([t,String(r)])}let s=new URLSearchParams(i),n=await fetch(`/api/pricing?${s.toString()}`,{cache:"no-store"}),c=await n.json().catch(()=>null);if(!n.ok)throw Error(String(c?.error||"Failed to load pricing"));let u=c?.price;m("number"==typeof u?u:null)}catch(e){p(e?.message||"Failed to fetch pricing"),m(null)}finally{e||h(!1)}})(),()=>{e=!0}},[y.category,y.subservice,y.variant,b,o]),{price:u,isLoading:g,error:f,reference:x,submitService:(0,t.useCallback)(async e=>{try{let t={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:y.variant||void 0,action:function(e,t){let i=e.trim().toLowerCase(),r=t.trim().toLowerCase();if("nin"===i){if("slip"===r)return"nin.slip";if("printout"===r)return"nin.printout";if("advanced"===r||"verification"===r)return"nin.advanced"}if("bvn"===i){if("printout"===r)return"bvn.printout";if("retrieval"===r||"retrieval_phone"===r)return"bvn.retrieval_phone";if("advanced"===r||"verification"===r)return"bvn.advanced"}if("cac"===i){if("info"===r)return"cac.info";if("status"===r)return"cac.status"}return"passport"===i&&("verify"===r||"verification"===r||"basic"===r)?"passport.verify":"phone"===i&&("advanced"===r||"verification"===r||"basic"===r)?"phone.verify_advanced":("driver-license"===i||"drivers_license"===i)&&("basic"===r||"verification"===r)?"drivers_license.verify":("voters-card"===i||"voters"===i)&&("basic"===r||"full"===r||"verification"===r)?"voters.verify":("plate-number"===i||"plate"===i)&&("basic"===r||"verification"===r)?"plate.verify":"tin"===i&&("basic"===r||"certificate"===r||"verification"===r)?"tin.verify":null}(y.category,y.subservice)||void 0,pin:e.pin},r=await (0,i.authFetch)(`/api/service/${encodeURIComponent(y.category)}/${encodeURIComponent(y.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>null);if(!r.ok)return{ok:!1,error:String(a?.error||`Service failed (${r.status})`),message:String(a?.message||"Failed"),data:a};return v(String(a?.reference||"")),{ok:!0,reference:String(a?.reference||""),message:String(a?.message||""),data:a}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[y.category,y.subservice,y.variant])}}e.s(["default",0,s,"useDynamicPricing",()=>s])},330843,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(630374),a=e.i(167881),s=e.i(23750),n=e.i(10708),l=e.i(846696);function o({isOpen:e,onClose:o,onConfirm:c,isLoading:d}){let[u,m]=(0,i.useState)(""),g=()=>{4!==u.length?l.toast.error("Please enter a 4-digit PIN"):(c(u),m(""))};return(0,t.jsx)(r.Dialog,{open:e,onOpenChange:e=>!e&&o(),children:(0,t.jsxs)(r.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Enter Transaction PIN"}),(0,t.jsx)(r.DialogDescription,{children:"Please enter your 4-digit transaction PIN to authorize this request."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"pin",className:"text-center block",children:"PIN"}),(0,t.jsx)(s.Input,{id:"pin",type:"password",inputMode:"numeric",maxLength:4,value:u,onChange:e=>m(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-[1em]",placeholder:"••••",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&g()}})]})}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:o,disabled:d,children:"Cancel"}),(0,t.jsx)(a.Button,{onClick:g,disabled:d||4!==u.length,className:"bg-[#3457D5]",children:d?"Verifying...":"Confirm PIN"})]})]})})}e.s(["PinPrompt",()=>o])},929054,e=>{"use strict";function t(e,i,r="Error"){i({title:r,description:e.error||e.message||"An unexpected error occurred",variant:"destructive"})}e.s(["handleServiceError",()=>t])},440160,e=>{"use strict";let t=(0,e.i(475254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],440160)},270756,e=>{"use strict";let t=(0,e.i(475254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],270756)},473708,e=>{"use strict";let t=(0,e.i(475254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],473708)},431343,e=>{"use strict";let t=(0,e.i(475254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>t],431343)},736539,e=>{"use strict";let t="ufriends_user_subscription";function i(e){let t;return((t=localStorage.getItem("ufriends_trainings"))?JSON.parse(t):[]).filter(t=>t.category===e)}function r(){let e=localStorage.getItem(t);return e?JSON.parse(e):{userId:"u_001",isPremium:!1,activatedAt:""}}function a(e){localStorage.setItem(t,JSON.stringify(e))}function s(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/864e5<7}e.s(["getTrainingsByCategory",()=>i,"getUserSubscription",()=>r,"isNewTraining",()=>s,"setUserSubscription",()=>a])},753712,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(846932),a=e.i(970065),s=e.i(994179),n=e.i(167881),l=e.i(671428),o=e.i(440160),c=e.i(270756),d=e.i(431343),u=e.i(473708),m=e.i(630374),g=e.i(736539),h=e.i(120682),f=e.i(750769),p=e.i(330843),x=e.i(929054),v=e.i(647163);function y(){let[e,y]=(0,i.useState)([]),[b,j]=(0,i.useState)(!0),[N,w]=(0,i.useState)(!1),{price:S,isLoading:k,submitService:C}=(0,f.default)("training","bvn-modification","basic"),[D,P]=(0,i.useState)(!1),[U,F]=(0,i.useState)(!1),[T,I]=(0,i.useState)(null),{toast:B}=(0,h.useToast)();(0,i.useEffect)(()=>{setTimeout(()=>{w((0,g.getUserSubscription)().isPremium),y((0,g.getTrainingsByCategory)("BVN")),j(!1)},500)},[]);let L=async e=>{F(!1),P(!0);try{let t=await C({...T,pin:e});if(!t.ok)return void(0,x.handleServiceError)(t,B,"Upgrade Failed");let i={userId:"u_001",isPremium:!0,activatedAt:new Date().toISOString()};(0,g.setUserSubscription)(i),w(!0),B({title:"Success!",description:"You now have Premium Access!"})}catch(e){B({title:"Upgrade Error",description:e.message||"An error occurred",variant:"destructive"})}finally{P(!1)}};return b?(0,t.jsx)("div",{className:"min-h-screen bg-[#F9F7F3] p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)(l.Skeleton,{className:"h-12 w-64 mb-4"}),(0,t.jsx)(l.Skeleton,{className:"h-6 w-96 mb-8"}),(0,t.jsx)(l.Skeleton,{className:"h-80 rounded-2xl"})]})}):N?(0,t.jsxs)("div",{className:"min-h-screen bg-[#F9F7F3] p-6",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-[#3457D5]",children:"BVN Modification Training"}),(0,t.jsx)(s.Badge,{className:"bg-gradient-to-r from-[#3457D5] to-[#CCCCFF] text-white",children:"Premium"})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Learn BVN update procedures, error handling tips, and regulatory compliance requirements."})]}),0===e.length?(0,t.jsxs)(a.Card,{className:"p-12 text-center rounded-2xl shadow-sm",children:[(0,t.jsx)(d.Play,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Training Available"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Check back later for BVN modification tutorials."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,i)=>(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*i},children:(0,t.jsxs)(a.Card,{className:"shadow-sm rounded-2xl p-3 hover:shadow-lg transition-shadow",children:[e.videoUrl?(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("iframe",{src:e.videoUrl,className:"w-full aspect-video rounded-xl",allowFullScreen:!0,title:e.title}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-xl pointer-events-none"})]}):e.fileUrl&&e.fileType?.startsWith("video/")?(0,t.jsx)("div",{className:"relative group",children:(0,t.jsx)("video",{src:e.fileUrl,controls:!0,className:"w-full aspect-video rounded-xl"})}):e.fileUrl&&e.fileType?.startsWith("image/")?(0,t.jsxs)(m.Dialog,{children:[(0,t.jsx)(m.DialogTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"w-full aspect-video rounded-xl overflow-hidden cursor-pointer relative group",children:[(0,t.jsx)("img",{src:e.fileUrl,alt:e.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:(0,t.jsx)(u.Image,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})}),(0,t.jsx)(m.DialogContent,{className:"max-w-4xl max-h-[90vh] p-0 overflow-hidden bg-black/95 border-none",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,t.jsx)("img",{src:e.fileUrl,alt:e.title,className:"w-full h-full max-h-[90vh] object-contain"})})})]}):(0,t.jsx)("div",{className:"w-full aspect-video rounded-xl bg-gradient-to-br from-[#3457D5] to-[#CCCCFF] flex items-center justify-center",children:(0,t.jsx)(d.Play,{className:"w-16 h-16 text-white"})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg leading-tight",children:e.title}),(0,g.isNewTraining)(e.createdAt)&&(0,t.jsx)(s.Badge,{className:"bg-[#3457D5] text-white shrink-0",children:"New"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(e.pdfUrl||e.fileUrl&&!e.fileType?.startsWith("video/")&&!e.fileType?.startsWith("image/"))&&(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full bg-transparent",onClick:()=>window.open((0,v.ensureAbsoluteUrl)(e.fileUrl||e.pdfUrl),"_blank"),children:[(0,t.jsx)(o.Download,{className:"w-4 h-4 mr-2"}),"Download Guide"]})]})]})},e.id))})]}),(0,t.jsx)(p.PinPrompt,{isOpen:U,onClose:()=>F(!1),onConfirm:L,isLoading:D})]}):(0,t.jsx)("div",{className:"min-h-screen bg-[#F9F7F3] p-6 flex items-center justify-center",children:(0,t.jsx)(r.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,t.jsxs)(a.Card,{className:"text-center p-10 rounded-2xl shadow-lg max-w-md",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#CCCCFF] flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(c.Lock,{size:40,className:"text-[#3457D5]"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Premium Access Required"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Upgrade to access BVN modification training with update guides, error handling tips, and compliance information."}),(0,t.jsx)(n.Button,{onClick:()=>{I({amount:Number(S||0),idempotencyKey:crypto.randomUUID(),category:"training",action:"bvn-modification"}),F(!0)},disabled:D||k,className:"bg-[#3457D5] hover:bg-[#2a46b0] text-white",children:D?"Processing...":"Upgrade Now"})]})})})}e.s(["default",()=>y])}]);