(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,595468,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],595468)},184762,e=>{"use strict";var t=e.i(843476),r=e.i(647163);function i({className:e,...i}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...i})}e.s(["Textarea",()=>i])},750769,e=>{"use strict";var t=e.i(271645),r=e.i(692659);function i(e){try{let t=String(e?.role||"").toLowerCase(),r=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return t.includes("marketer")||r.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function a(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let t=await e.json().catch(()=>null);return i(t?.user||t)}catch{return"user"}}function n(e,n,s,o,c){let[l,d]=(0,t.useState)(()=>i(c)),[u,f]=(0,t.useState)(null),[p,v]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),[y,g]=(0,t.useState)(void 0),b=(0,t.useMemo)(()=>({category:String(e||"").trim(),subservice:String(n||"").trim(),variant:String(s||"").trim()}),[e,n,s]),x=(0,t.useMemo)(()=>{if(!o||"object"!=typeof o)return"";let e=Object.entries(o).filter(([e,t])=>null!=t);return e.length?(e.sort(([e],[t])=>e.localeCompare(t)),e.map(([e,t])=>`${e}=${String(t)}`).join("|")):""},[o]);return(0,t.useEffect)(()=>{let e=!1;return(async()=>{v(!0),h(null);try{let t=c?i(c):await a();e||d(t);let r=[["category",b.category],["subservice",b.subservice],["variant",b.variant],["role",t]];if(o&&"object"==typeof o){let e=Object.entries(o).filter(([e,t])=>null!=t);for(let[t,i]of(e.sort(([e],[t])=>e.localeCompare(t)),e))r.push([t,String(i)])}let n=new URLSearchParams(r),s=await fetch(`/api/pricing?${n.toString()}`,{cache:"no-store"}),l=await s.json().catch(()=>null);if(!s.ok)throw Error(String(l?.error||"Failed to load pricing"));let u=l?.price;f("number"==typeof u?u:null)}catch(e){h(e?.message||"Failed to fetch pricing"),f(null)}finally{e||v(!1)}})(),()=>{e=!0}},[b.category,b.subservice,b.variant,x,c]),{price:u,isLoading:p,error:m,reference:y,submitService:(0,t.useCallback)(async e=>{try{let t={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:b.variant||void 0,action:function(e,t){let r=e.trim().toLowerCase(),i=t.trim().toLowerCase();if("nin"===r){if("slip"===i)return"nin.slip";if("printout"===i)return"nin.printout";if("advanced"===i||"verification"===i)return"nin.advanced"}if("bvn"===r){if("printout"===i)return"bvn.printout";if("retrieval"===i||"retrieval_phone"===i)return"bvn.retrieval_phone";if("advanced"===i||"verification"===i)return"bvn.advanced"}if("cac"===r){if("info"===i)return"cac.info";if("status"===i)return"cac.status"}return"passport"===r&&("verify"===i||"verification"===i||"basic"===i)?"passport.verify":"phone"===r&&("advanced"===i||"verification"===i||"basic"===i)?"phone.verify_advanced":("driver-license"===r||"drivers_license"===r)&&("basic"===i||"verification"===i)?"drivers_license.verify":("voters-card"===r||"voters"===r)&&("basic"===i||"full"===i||"verification"===i)?"voters.verify":("plate-number"===r||"plate"===r)&&("basic"===i||"verification"===i)?"plate.verify":"tin"===r&&("basic"===i||"certificate"===i||"verification"===i)?"tin.verify":null}(b.category,b.subservice)||void 0,pin:e.pin},i=await (0,r.authFetch)(`/api/service/${encodeURIComponent(b.category)}/${encodeURIComponent(b.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),a=await i.json().catch(()=>null);if(!i.ok)return{ok:!1,error:String(a?.error||`Service failed (${i.status})`),message:String(a?.message||"Failed"),data:a};return g(String(a?.reference||"")),{ok:!0,reference:String(a?.reference||""),message:String(a?.message||""),data:a}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[b.category,b.subservice,b.variant])}}e.s(["default",0,n,"useDynamicPricing",()=>n])},929054,e=>{"use strict";function t(e,r,i="Error"){r({title:i,description:e.error||e.message||"An unexpected error occurred",variant:"destructive"})}e.s(["handleServiceError",()=>t])},625959,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(820783),a=e.i(30030),n=e.i(981140),s=e.i(369340),o=e.i(999682),c=e.i(635804),l=e.i(296626),d=e.i(248425),u="Checkbox",[f,p]=(0,a.createContextScope)(u),[v,m]=f(u);function h(e){let{__scopeCheckbox:i,checked:a,children:n,defaultChecked:o,disabled:c,form:l,name:d,onCheckedChange:f,required:p,value:m="on",internal_do_not_use_render:h}=e,[y,g]=(0,s.useControllableState)({prop:a,defaultProp:o??!1,onChange:f,caller:u}),[b,x]=r.useState(null),[k,C]=r.useState(null),j=r.useRef(!1),S=!b||!!l||!!b.closest("form"),N={checked:y,disabled:c,setChecked:g,control:b,setControl:x,name:d,form:l,value:m,hasConsumerStoppedPropagationRef:j,required:p,defaultChecked:!w(o)&&o,isFormControl:S,bubbleInput:k,setBubbleInput:C};return(0,t.jsx)(v,{scope:i,...N,children:"function"==typeof h?h(N):n})}var y="CheckboxTrigger",g=r.forwardRef(({__scopeCheckbox:e,onKeyDown:a,onClick:s,...o},c)=>{let{control:l,value:u,disabled:f,checked:p,required:v,setControl:h,setChecked:g,hasConsumerStoppedPropagationRef:b,isFormControl:x,bubbleInput:k}=m(y,e),C=(0,i.useComposedRefs)(c,h),j=r.useRef(p);return r.useEffect(()=>{let e=l?.form;if(e){let t=()=>g(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,g]),(0,t.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":w(p)?"mixed":p,"aria-required":v,"data-state":S(p),"data-disabled":f?"":void 0,disabled:f,value:u,...o,ref:C,onKeyDown:(0,n.composeEventHandlers)(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.composeEventHandlers)(s,e=>{g(e=>!!w(e)||!e),k&&x&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});g.displayName=y;var b=r.forwardRef((e,r)=>{let{__scopeCheckbox:i,name:a,checked:n,defaultChecked:s,required:o,disabled:c,value:l,onCheckedChange:d,form:u,...f}=e;return(0,t.jsx)(h,{__scopeCheckbox:i,checked:n,defaultChecked:s,disabled:c,required:o,onCheckedChange:d,name:a,form:u,value:l,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{...f,ref:r,__scopeCheckbox:i}),e&&(0,t.jsx)(j,{__scopeCheckbox:i})]})})});b.displayName=u;var x="CheckboxIndicator",k=r.forwardRef((e,r)=>{let{__scopeCheckbox:i,forceMount:a,...n}=e,s=m(x,i);return(0,t.jsx)(l.Presence,{present:a||w(s.checked)||!0===s.checked,children:(0,t.jsx)(d.Primitive.span,{"data-state":S(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:r,style:{pointerEvents:"none",...e.style}})})});k.displayName=x;var C="CheckboxBubbleInput",j=r.forwardRef(({__scopeCheckbox:e,...a},n)=>{let{control:s,hasConsumerStoppedPropagationRef:l,checked:u,defaultChecked:f,required:p,disabled:v,name:h,value:y,form:g,bubbleInput:b,setBubbleInput:x}=m(C,e),k=(0,i.useComposedRefs)(n,x),j=(0,o.usePrevious)(u),S=(0,c.useSize)(s);r.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(j!==u&&e){let r=new Event("click",{bubbles:t});b.indeterminate=w(u),e.call(b,!w(u)&&u),b.dispatchEvent(r)}},[b,j,u,l]);let N=r.useRef(!w(u)&&u);return(0,t.jsx)(d.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??N.current,required:p,disabled:v,name:h,value:y,form:g,...a,tabIndex:-1,ref:k,style:{...a.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function w(e){return"indeterminate"===e}function S(e){return w(e)?"indeterminate":e?"checked":"unchecked"}j.displayName=C;var N=e.i(643531),E=e.i(647163);function R({className:e,...r}){return(0,t.jsx)(b,{"data-slot":"checkbox",className:(0,E.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(k,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(N.Check,{className:"size-3.5"})})})}e.s(["Checkbox",()=>R],625959)},569074,e=>{"use strict";let t=(0,e.i(475254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],569074)},330958,527026,e=>{"use strict";var t=e.i(271645);function r(){let[e,r]=(0,t.useState)(null),[i,a]=(0,t.useState)(!1),[n,s]=(0,t.useState)(!0);(0,t.useEffect)(()=>{o()},[]);let o=async()=>{s(!0);try{let e=await fetch("/api/kyc/status");if(!e.ok)throw Error("Failed to fetch KYC status");let t=await e.json();if(t?.status&&"NONE"!==t.status){let e="APPROVED"===t.status?"Approved":"PENDING"===t.status?"Pending":"REJECTED"===t.status?"Rejected":null;r(e)}else r(null)}catch(e){console.error("[v0] Error checking KYC status:",e),r(null)}finally{s(!1)}};return{kycStatus:e,isKYCApproved:"Approved"===e,showKYCModal:i,setShowKYCModal:a,requireKYC:()=>"Approved"===e||(a(!0),!1),isLoading:n}}e.s(["useKYCCheck",()=>r],330958);var i=e.i(843476),a=e.i(618566),n=e.i(630374),s=e.i(167881),o=e.i(581418),c=e.i(63209);function l({open:e,onOpenChange:t}){let r=(0,a.useRouter)();return(0,i.jsx)(n.Dialog,{open:e,onOpenChange:t,children:(0,i.jsxs)(n.DialogContent,{className:"sm:max-w-md",children:[(0,i.jsxs)(n.DialogHeader,{children:[(0,i.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mx-auto mb-4",children:(0,i.jsx)(o.ShieldCheck,{className:"h-6 w-6 text-primary"})}),(0,i.jsx)(n.DialogTitle,{className:"text-center",children:"KYC Verification Required"}),(0,i.jsx)(n.DialogDescription,{className:"text-center",children:"You need to complete your identity verification before accessing this service."})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted rounded-lg",children:[(0,i.jsx)(c.AlertCircle,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,i.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Why is KYC required?"}),(0,i.jsx)("p",{children:"Identity verification helps us ensure the security of your account and comply with regulatory requirements."})]})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,i.jsx)(s.Button,{variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancel"}),(0,i.jsx)(s.Button,{onClick:()=>{t(!1),r.push("/dashboard/kyc")},className:"flex-1",children:"Start KYC Verification"})]})]})]})})}e.s(["KYCRequiredModal",()=>l],527026)}]);