(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,595468,e=>{"use strict";let i=(0,e.i(475254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>i],595468)},750769,e=>{"use strict";var i=e.i(271645),t=e.i(692659);function a(e){try{let i=String(e?.role||"").toLowerCase(),t=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return i.includes("marketer")||t.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function s(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let i=await e.json().catch(()=>null);return a(i?.user||i)}catch{return"user"}}function r(e,r,n,l,c){let[d,o]=(0,i.useState)(()=>a(c)),[m,u]=(0,i.useState)(null),[f,g]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[x,y]=(0,i.useState)(void 0),v=(0,i.useMemo)(()=>({category:String(e||"").trim(),subservice:String(r||"").trim(),variant:String(n||"").trim()}),[e,r,n]),b=(0,i.useMemo)(()=>{if(!l||"object"!=typeof l)return"";let e=Object.entries(l).filter(([e,i])=>null!=i);return e.length?(e.sort(([e],[i])=>e.localeCompare(i)),e.map(([e,i])=>`${e}=${String(i)}`).join("|")):""},[l]);return(0,i.useEffect)(()=>{let e=!1;return(async()=>{g(!0),p(null);try{let i=c?a(c):await s();e||o(i);let t=[["category",v.category],["subservice",v.subservice],["variant",v.variant],["role",i]];if(l&&"object"==typeof l){let e=Object.entries(l).filter(([e,i])=>null!=i);for(let[i,a]of(e.sort(([e],[i])=>e.localeCompare(i)),e))t.push([i,String(a)])}let r=new URLSearchParams(t),n=await fetch(`/api/pricing?${r.toString()}`,{cache:"no-store"}),d=await n.json().catch(()=>null);if(!n.ok)throw Error(String(d?.error||"Failed to load pricing"));let m=d?.price;u("number"==typeof m?m:null)}catch(e){p(e?.message||"Failed to fetch pricing"),u(null)}finally{e||g(!1)}})(),()=>{e=!0}},[v.category,v.subservice,v.variant,b,c]),{price:m,isLoading:f,error:h,reference:x,submitService:(0,i.useCallback)(async e=>{try{let i={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:v.variant||void 0,action:function(e,i){let t=e.trim().toLowerCase(),a=i.trim().toLowerCase();if("nin"===t){if("slip"===a)return"nin.slip";if("printout"===a)return"nin.printout";if("advanced"===a||"verification"===a)return"nin.advanced"}if("bvn"===t){if("printout"===a)return"bvn.printout";if("retrieval"===a||"retrieval_phone"===a)return"bvn.retrieval_phone";if("advanced"===a||"verification"===a)return"bvn.advanced"}if("cac"===t){if("info"===a)return"cac.info";if("status"===a)return"cac.status"}return"passport"===t&&("verify"===a||"verification"===a||"basic"===a)?"passport.verify":"phone"===t&&("advanced"===a||"verification"===a||"basic"===a)?"phone.verify_advanced":("driver-license"===t||"drivers_license"===t)&&("basic"===a||"verification"===a)?"drivers_license.verify":("voters-card"===t||"voters"===t)&&("basic"===a||"full"===a||"verification"===a)?"voters.verify":("plate-number"===t||"plate"===t)&&("basic"===a||"verification"===a)?"plate.verify":"tin"===t&&("basic"===a||"certificate"===a||"verification"===a)?"tin.verify":null}(v.category,v.subservice)||void 0,pin:e.pin},a=await (0,t.authFetch)(`/api/service/${encodeURIComponent(v.category)}/${encodeURIComponent(v.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(i)}),s=await a.json().catch(()=>null);if(!a.ok)return{ok:!1,error:String(s?.error||`Service failed (${a.status})`),message:String(s?.message||"Failed"),data:s};return y(String(s?.reference||"")),{ok:!0,reference:String(s?.reference||""),message:String(s?.message||""),data:s}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[v.category,v.subservice,v.variant])}}e.s(["default",0,r,"useDynamicPricing",()=>r])},330843,e=>{"use strict";var i=e.i(843476),t=e.i(271645),a=e.i(630374),s=e.i(167881),r=e.i(23750),n=e.i(10708),l=e.i(846696);function c({isOpen:e,onClose:c,onConfirm:d,isLoading:o}){let[m,u]=(0,t.useState)(""),f=()=>{4!==m.length?l.toast.error("Please enter a 4-digit PIN"):(d(m),u(""))};return(0,i.jsx)(a.Dialog,{open:e,onOpenChange:e=>!e&&c(),children:(0,i.jsxs)(a.DialogContent,{className:"sm:max-w-md",children:[(0,i.jsxs)(a.DialogHeader,{children:[(0,i.jsx)(a.DialogTitle,{children:"Enter Transaction PIN"}),(0,i.jsx)(a.DialogDescription,{children:"Please enter your 4-digit transaction PIN to authorize this request."})]}),(0,i.jsx)("div",{className:"space-y-4 py-4",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(n.Label,{htmlFor:"pin",className:"text-center block",children:"PIN"}),(0,i.jsx)(r.Input,{id:"pin",type:"password",inputMode:"numeric",maxLength:4,value:m,onChange:e=>u(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-[1em]",placeholder:"••••",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&f()}})]})}),(0,i.jsxs)(a.DialogFooter,{children:[(0,i.jsx)(s.Button,{variant:"outline",onClick:c,disabled:o,children:"Cancel"}),(0,i.jsx)(s.Button,{onClick:f,disabled:o||4!==m.length,className:"bg-[#3457D5]",children:o?"Verifying...":"Confirm PIN"})]})]})})}e.s(["PinPrompt",()=>c])},929054,e=>{"use strict";function i(e,t,a="Error"){t({title:a,description:e.error||e.message||"An unexpected error occurred",variant:"destructive"})}e.s(["handleServiceError",()=>i])},184762,e=>{"use strict";var i=e.i(843476),t=e.i(647163);function a({className:e,...a}){return(0,i.jsx)("textarea",{"data-slot":"textarea",className:(0,t.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},730699,e=>{"use strict";let i=(0,e.i(475254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>i],730699)},731166,e=>{"use strict";var i=e.i(843476),t=e.i(271645),a=e.i(167881),s=e.i(970065),r=e.i(23750),n=e.i(10708),l=e.i(184762),c=e.i(62870),d=e.i(671428),o=e.i(120682),m=e.i(730699),u=e.i(252754),f=e.i(595468);let g=(0,e.i(475254).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var h=e.i(846932),p=e.i(88653),x=e.i(750769),y=e.i(630374),v=e.i(330843),b=e.i(929054);let j={MTN:[{id:"mtn-gift-500mb",name:"500MB Gift",size:"500MB",price:180,validity:"30 days"},{id:"mtn-gift-1gb",name:"1GB Gift",size:"1GB",price:350,validity:"30 days"},{id:"mtn-gift-2gb",name:"2GB Gift",size:"2GB",price:700,validity:"30 days"},{id:"mtn-gift-3gb",name:"3GB Gift",size:"3GB",price:1050,validity:"30 days"},{id:"mtn-gift-4gb",name:"4GB Gift",size:"4GB",price:1400,validity:"30 days"},{id:"mtn-gift-5gb",name:"5GB Gift",size:"5GB",price:1750,validity:"30 days"},{id:"mtn-gift-10gb",name:"10GB Gift",size:"10GB",price:3500,validity:"30 days"}],Airtel:[{id:"airtel-gift-500mb",name:"500MB Gift",size:"500MB",price:170,validity:"30 days"},{id:"airtel-gift-1gb",name:"1GB Gift",size:"1GB",price:340,validity:"30 days"},{id:"airtel-gift-2gb",name:"2GB Gift",size:"2GB",price:680,validity:"30 days"},{id:"airtel-gift-3gb",name:"3GB Gift",size:"3GB",price:1020,validity:"30 days"},{id:"airtel-gift-4gb",name:"4GB Gift",size:"4GB",price:1360,validity:"30 days"},{id:"airtel-gift-5gb",name:"5GB Gift",size:"5GB",price:1700,validity:"30 days"},{id:"airtel-gift-10gb",name:"10GB Gift",size:"10GB",price:3400,validity:"30 days"}],Glo:[{id:"glo-gift-500mb",name:"500MB Gift",size:"500MB",price:160,validity:"30 days"},{id:"glo-gift-1gb",name:"1GB Gift",size:"1GB",price:320,validity:"30 days"},{id:"glo-gift-2gb",name:"2GB Gift",size:"2GB",price:640,validity:"30 days"},{id:"glo-gift-3gb",name:"3GB Gift",size:"3GB",price:960,validity:"30 days"},{id:"glo-gift-4gb",name:"4GB Gift",size:"4GB",price:1280,validity:"30 days"},{id:"glo-gift-5gb",name:"5GB Gift",size:"5GB",price:1600,validity:"30 days"},{id:"glo-gift-10gb",name:"10GB Gift",size:"10GB",price:3200,validity:"30 days"}],"9mobile":[{id:"9mobile-gift-500mb",name:"500MB Gift",size:"500MB",price:150,validity:"30 days"},{id:"9mobile-gift-1gb",name:"1GB Gift",size:"1GB",price:300,validity:"30 days"},{id:"9mobile-gift-2gb",name:"2GB Gift",size:"2GB",price:600,validity:"30 days"},{id:"9mobile-gift-3gb",name:"3GB Gift",size:"3GB",price:900,validity:"30 days"},{id:"9mobile-gift-4gb",name:"4GB Gift",size:"4GB",price:1200,validity:"30 days"},{id:"9mobile-gift-5gb",name:"5GB Gift",size:"5GB",price:1500,validity:"30 days"},{id:"9mobile-gift-10gb",name:"10GB Gift",size:"10GB",price:3e3,validity:"30 days"}]};function G(){let[e,G]=(0,t.useState)(!0),[C,N]=(0,t.useState)(!1),[S,B]=(0,t.useState)(0),[w,F]=(0,t.useState)(""),[k,z]=(0,t.useState)(null),D=w&&k?`${w.toLowerCase()}.${k.size.toLowerCase()}`:"",{price:P,isLoading:L,error:M,submitService:I}=(0,x.default)("data","gift",D,{network:w,size:k?.size||""}),[T,A]=(0,t.useState)(""),[U,$]=(0,t.useState)(""),[O,E]=(0,t.useState)(!1),[K,R]=(0,t.useState)(""),[_,H]=(0,t.useState)(!1),[V,q]=(0,t.useState)(null),{toast:W}=(0,o.useToast)();(0,t.useEffect)(()=>{let e=localStorage.getItem("ufriends_wallet_balance");B(e?Number.parseFloat(e):0),G(!1)},[]);let Y=w&&j[w]||[],J=()=>"number"==typeof P?Math.round(P):0,Z=async e=>{if(e.preventDefault(),!w||!k||!T)return void W({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});if(11!==T.length)return void W({title:"Invalid Phone Number",description:"Phone number must be 11 digits",variant:"destructive"});let i=J();"number"!=typeof P?W({title:"Pricing Unavailable",description:"Live pricing could not be fetched. Please try again.",variant:"destructive"}):S<i?W({title:"Insufficient Balance",description:`You need ₦${i.toLocaleString()} but have ₦${S.toLocaleString()}`,variant:"destructive"}):(q({amount:i,phone:T,network:w,planCode:k.size,message:U,idempotencyKey:crypto.randomUUID(),category:"data",action:"gift"}),H(!0))},Q=async e=>{H(!1),N(!0);try{let i=await I({...V,pin:e});if(!i.ok)return void(0,b.handleServiceError)(i,W,"Gift Failed");R(i?.reference||crypto.randomUUID()),E(!0),W({title:"Gift Sent Successfully",description:`${k?.size} gift sent to ${T}`})}catch(e){W({title:"Gift Failed",description:e?.message||"Unable to send gift",variant:"destructive"})}finally{N(!1)}};return e?(0,i.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,i.jsx)(d.Skeleton,{className:"h-32 w-full"}),(0,i.jsx)(d.Skeleton,{className:"h-96 w-full"})]}):(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)(h.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,i.jsx)(m.Gift,{className:"h-12 w-12 text-[#3457D5] mr-3"}),(0,i.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Gift Data"})]}),(0,i.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Share the gift of connectivity with your loved ones"})]}),(0,i.jsx)("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:(0,i.jsx)(h.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,i.jsxs)(s.Card,{className:"bg-gradient-to-br from-[#3457D5] to-[#CCCCFF] text-white",children:[(0,i.jsx)(s.CardHeader,{children:(0,i.jsxs)(s.CardTitle,{className:"flex items-center text-white",children:[(0,i.jsx)(u.Wallet,{className:"h-5 w-5 mr-2"}),"Wallet Balance"]})}),(0,i.jsx)(s.CardContent,{children:(0,i.jsxs)("p",{className:"text-3xl font-bold",children:["₦",S.toLocaleString()]})})]})})}),(0,i.jsx)(h.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,i.jsxs)(s.Card,{className:"shadow-lg border-[#CCCCFF]",children:[(0,i.jsxs)(s.CardHeader,{className:"bg-[#F9F7F3]",children:[(0,i.jsxs)(s.CardTitle,{className:"text-[#3457D5] flex items-center",children:[(0,i.jsx)(g,{className:"h-5 w-5 mr-2"}),"Send Gift Data"]}),(0,i.jsx)(s.CardDescription,{children:"Surprise someone special with a data gift"})]}),(0,i.jsx)(s.CardContent,{className:"pt-6",children:(0,i.jsxs)("form",{onSubmit:Z,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(n.Label,{htmlFor:"network",children:"Select Network *"}),(0,i.jsxs)(c.Select,{value:w,onValueChange:F,children:[(0,i.jsx)(c.SelectTrigger,{className:"border-[#CCCCFF] focus:ring-[#3457D5]",children:(0,i.jsx)(c.SelectValue,{placeholder:"Choose network"})}),(0,i.jsxs)(c.SelectContent,{children:[(0,i.jsx)(c.SelectItem,{value:"MTN",children:"MTN"}),(0,i.jsx)(c.SelectItem,{value:"Airtel",children:"Airtel"}),(0,i.jsx)(c.SelectItem,{value:"Glo",children:"Glo"}),(0,i.jsx)(c.SelectItem,{value:"9mobile",children:"9mobile"})]})]})]}),(0,i.jsx)(p.AnimatePresence,{mode:"wait",children:w&&(0,i.jsxs)(h.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[(0,i.jsx)(n.Label,{htmlFor:"plan",children:"Select Gift Plan *"}),(0,i.jsxs)(c.Select,{value:k?.id||"",onValueChange:e=>{z(Y.find(i=>i.id===e)||null)},children:[(0,i.jsx)(c.SelectTrigger,{className:"border-[#CCCCFF] focus:ring-[#3457D5]",children:(0,i.jsx)(c.SelectValue,{placeholder:"Choose gift plan"})}),(0,i.jsx)(c.SelectContent,{children:Y.map(e=>(0,i.jsxs)(c.SelectItem,{value:e.id,children:[e.name," (",e.validity,")"]},e.id))})]}),k&&(0,i.jsxs)("div",{className:"mt-3 text-sm text-gray-700",children:[L&&(0,i.jsx)("p",{children:"Fetching live price…"}),!L&&M&&(0,i.jsxs)("p",{className:"text-red-600",children:["Unable to fetch price: ",M]}),!L&&!M&&"number"==typeof P&&(0,i.jsxs)("p",{children:["Current price: ₦",Math.round(P).toLocaleString()]})]})]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.Label,{htmlFor:"recipientNumber",children:"Recipient Phone Number *"}),(0,i.jsx)(r.Input,{id:"recipientNumber",type:"tel",placeholder:"08012345678",value:T,onChange:e=>A(e.target.value.replace(/\D/g,"").slice(0,11)),maxLength:11,className:"border-[#CCCCFF] focus:ring-[#3457D5]"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(n.Label,{htmlFor:"message",children:"Personal Message (Optional)"}),(0,i.jsx)(l.Textarea,{id:"message",placeholder:"Add a personal message to your gift...",value:U,onChange:e=>$(e.target.value),maxLength:200,className:"border-[#CCCCFF] focus:ring-[#3457D5] min-h-[100px]"}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[U.length,"/200 characters"]})]}),k&&(0,i.jsxs)(h.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-[#F9F7F3] rounded-lg border border-[#CCCCFF]",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Gift Plan:"}),(0,i.jsx)("span",{className:"font-semibold",children:k.size})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Validity:"}),(0,i.jsx)("span",{className:"font-semibold",children:k.validity})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold text-[#3457D5]",children:[(0,i.jsx)("span",{children:"Total Amount:"}),(0,i.jsxs)("span",{children:["₦",J().toLocaleString()]})]})]}),(0,i.jsx)(a.Button,{type:"submit",disabled:C||!w||!k||!T,className:"w-full bg-[#3457D5] hover:bg-[#2a4ab0] text-white",children:C?"Sending Gift...":"Send Gift Data"})]})})]})}),(0,i.jsx)(y.Dialog,{open:O,onOpenChange:E,children:(0,i.jsxs)(y.DialogContent,{className:"border-[#CCCCFF]",children:[(0,i.jsxs)(y.DialogHeader,{children:[(0,i.jsx)("div",{className:"flex justify-center mb-4",children:(0,i.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,i.jsx)(f.CheckCircle2,{className:"h-12 w-12 text-green-600"})})}),(0,i.jsx)(y.DialogTitle,{className:"text-center text-2xl text-[#3457D5]",children:"Gift Sent Successfully!"}),(0,i.jsxs)(y.DialogDescription,{className:"text-center space-y-4 pt-4",children:[(0,i.jsxs)("div",{className:"bg-[#F9F7F3] p-4 rounded-lg space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Transaction ID:"}),(0,i.jsx)("span",{className:"font-semibold",children:K})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Network:"}),(0,i.jsx)("span",{className:"font-semibold",children:w})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Gift Plan:"}),(0,i.jsx)("span",{className:"font-semibold",children:k?.size})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Recipient:"}),(0,i.jsx)("span",{className:"font-semibold",children:T})]}),U&&(0,i.jsxs)("div",{className:"pt-2 border-t border-[#CCCCFF]",children:[(0,i.jsx)("span",{className:"text-gray-600 text-sm",children:"Your Message:"}),(0,i.jsx)("p",{className:"text-sm italic mt-1",children:U})]}),(0,i.jsxs)("div",{className:"flex justify-between text-lg font-bold text-[#3457D5]",children:[(0,i.jsx)("span",{children:"Amount Paid:"}),(0,i.jsxs)("span",{children:["₦",k?J().toLocaleString():0]})]})]}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Gift will be delivered within 5 minutes"})]})]}),(0,i.jsx)(a.Button,{onClick:()=>{F(""),z(null),A(""),$(""),E(!1),R("")},className:"w-full bg-[#3457D5] hover:bg-[#2a4ab0]",children:"Send Another Gift"})]})}),(0,i.jsx)(v.PinPrompt,{isOpen:_,onClose:()=>H(!1),onConfirm:Q,isLoading:C})]})}e.s(["default",()=>G],731166)}]);