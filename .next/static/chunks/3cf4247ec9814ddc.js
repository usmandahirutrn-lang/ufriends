(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>r,"CardTitle",()=>l])},10708,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(248425),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var l=e.i(647163);function n({className:e,...a}){return(0,t.jsx)(r,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],10708)},630374,326999,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(981140),r=e.i(820783),l=e.i(30030),n=e.i(610772),o=e.i(369340),i=e.i(726330),d=e.i(765491),c=e.i(774606),u=e.i(296626),x=e.i(248425),m=e.i(303536),p=e.i(985369),f=e.i(186312),g=e.i(991918),h="Dialog",[j,b]=(0,l.createContextScope)(h),[v,N]=j(h),C=e=>{let{__scopeDialog:s,children:r,open:l,defaultOpen:i,onOpenChange:d,modal:c=!0}=e,u=a.useRef(null),x=a.useRef(null),[m,p]=(0,o.useControllableState)({prop:l,defaultProp:i??!1,onChange:d,caller:h});return(0,t.jsx)(v,{scope:s,triggerRef:u,contentRef:x,contentId:(0,n.useId)(),titleId:(0,n.useId)(),descriptionId:(0,n.useId)(),open:m,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(e=>!e),[p]),modal:c,children:r})};C.displayName=h;var y="DialogTrigger",w=a.forwardRef((e,a)=>{let{__scopeDialog:l,...n}=e,o=N(y,l),i=(0,r.useComposedRefs)(a,o.triggerRef);return(0,t.jsx)(x.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":G(o.open),...n,ref:i,onClick:(0,s.composeEventHandlers)(e.onClick,o.onOpenToggle)})});w.displayName=y;var D="DialogPortal",[S,T]=j(D,{forceMount:void 0}),E=e=>{let{__scopeDialog:s,forceMount:r,children:l,container:n}=e,o=N(D,s);return(0,t.jsx)(S,{scope:s,forceMount:r,children:a.Children.map(l,e=>(0,t.jsx)(u.Presence,{present:r||o.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:n,children:e})}))})};E.displayName=D;var k="DialogOverlay",R=a.forwardRef((e,a)=>{let s=T(k,e.__scopeDialog),{forceMount:r=s.forceMount,...l}=e,n=N(k,e.__scopeDialog);return n.modal?(0,t.jsx)(u.Presence,{present:r||n.open,children:(0,t.jsx)(I,{...l,ref:a})}):null});R.displayName=k;var O=(0,g.createSlot)("DialogOverlay.RemoveScroll"),I=a.forwardRef((e,a)=>{let{__scopeDialog:s,...r}=e,l=N(k,s);return(0,t.jsx)(p.RemoveScroll,{as:O,allowPinchZoom:!0,shards:[l.contentRef],children:(0,t.jsx)(x.Primitive.div,{"data-state":G(l.open),...r,ref:a,style:{pointerEvents:"auto",...r.style}})})}),A="DialogContent",F=a.forwardRef((e,a)=>{let s=T(A,e.__scopeDialog),{forceMount:r=s.forceMount,...l}=e,n=N(A,e.__scopeDialog);return(0,t.jsx)(u.Presence,{present:r||n.open,children:n.modal?(0,t.jsx)(M,{...l,ref:a}):(0,t.jsx)(P,{...l,ref:a})})});F.displayName=A;var M=a.forwardRef((e,l)=>{let n=N(A,e.__scopeDialog),o=a.useRef(null),i=(0,r.useComposedRefs)(l,n.contentRef,o);return a.useEffect(()=>{let e=o.current;if(e)return(0,f.hideOthers)(e)},[]),(0,t.jsx)(_,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),P=a.forwardRef((e,s)=>{let r=N(A,e.__scopeDialog),l=a.useRef(!1),n=a.useRef(!1);return(0,t.jsx)(_,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(l.current||r.triggerRef.current?.focus(),t.preventDefault()),l.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(l.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),_=a.forwardRef((e,s)=>{let{__scopeDialog:l,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:c,...u}=e,x=N(A,l),p=a.useRef(null),f=(0,r.useComposedRefs)(s,p);return(0,m.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:c,children:(0,t.jsx)(i.DismissableLayer,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":G(x.open),...u,ref:f,onDismiss:()=>x.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X,{titleId:x.titleId}),(0,t.jsx)(V,{contentRef:p,descriptionId:x.descriptionId})]})]})}),L="DialogTitle",U=a.forwardRef((e,a)=>{let{__scopeDialog:s,...r}=e,l=N(L,s);return(0,t.jsx)(x.Primitive.h2,{id:l.titleId,...r,ref:a})});U.displayName=L;var H="DialogDescription",B=a.forwardRef((e,a)=>{let{__scopeDialog:s,...r}=e,l=N(H,s);return(0,t.jsx)(x.Primitive.p,{id:l.descriptionId,...r,ref:a})});B.displayName=H;var q="DialogClose",z=a.forwardRef((e,a)=>{let{__scopeDialog:r,...l}=e,n=N(q,r);return(0,t.jsx)(x.Primitive.button,{type:"button",...l,ref:a,onClick:(0,s.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function G(e){return e?"open":"closed"}z.displayName=q;var $="DialogTitleWarning",[J,W]=(0,l.createContext)($,{contentName:A,titleName:L,docsSlug:"dialog"}),X=({titleId:e})=>{let t=W($),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},V=({contentRef:e,descriptionId:t})=>{let s=W("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return a.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null};e.s(["Close",()=>z,"Content",()=>F,"Description",()=>B,"Overlay",()=>R,"Portal",()=>E,"Root",()=>C,"Title",()=>U,"Trigger",()=>w,"WarningProvider",()=>J,"createDialogScope",()=>b],326999);var K=e.i(37727),Z=e.i(647163);function Q({...e}){return(0,t.jsx)(C,{"data-slot":"dialog",...e})}function Y({...e}){return(0,t.jsx)(w,{"data-slot":"dialog-trigger",...e})}function ee({...e}){return(0,t.jsx)(E,{"data-slot":"dialog-portal",...e})}function et({className:e,...a}){return(0,t.jsx)(R,{"data-slot":"dialog-overlay",className:(0,Z.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function ea({className:e,children:a,showCloseButton:s=!0,...r}){return(0,t.jsxs)(ee,{"data-slot":"dialog-portal",children:[(0,t.jsx)(et,{}),(0,t.jsxs)(F,{"data-slot":"dialog-content",className:(0,Z.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[a,s&&(0,t.jsxs)(z,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(K.X,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function es({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,Z.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function er({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,Z.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function el({className:e,...a}){return(0,t.jsx)(U,{"data-slot":"dialog-title",className:(0,Z.cn)("text-lg leading-none font-semibold",e),...a})}function en({className:e,...a}){return(0,t.jsx)(B,{"data-slot":"dialog-description",className:(0,Z.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>Q,"DialogContent",()=>ea,"DialogDescription",()=>en,"DialogFooter",()=>er,"DialogHeader",()=>es,"DialogTitle",()=>el,"DialogTrigger",()=>Y],630374)},120682,e=>{"use strict";var t=e.i(271645);let a=0,s=new Map,r=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=[],n={toasts:[]};function o(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),l.forEach(e=>{e(n)})}function i({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function d(){let[e,a]=t.useState(n);return t.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:i,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>i,"useToast",()=>d])},595468,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],595468)},184762,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},286536,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},947627,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function l({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function n({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function o({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function i({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>i,"TableHead",()=>o,"TableHeader",()=>r,"TableRow",()=>n])},503116,e=>{"use strict";let t=(0,e.i(475254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],503116)},373884,e=>{"use strict";let t=(0,e.i(475254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],373884)},797548,e=>{"use strict";let t=(0,e.i(475254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],797548)},19840,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(555436),r=e.i(797548),l=e.i(595468),n=e.i(373884),o=e.i(503116),i=e.i(475254);let d=(0,i.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),c=(0,i.default)("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);var u=e.i(63209),x=e.i(286536),m=e.i(167881),p=e.i(23750),f=e.i(970065),g=e.i(947627),h=e.i(463415),j=e.i(630374),b=e.i(10708),v=e.i(184762),N=e.i(120682),C=e.i(994179);function y(){var e;let[i,y]=(0,a.useState)([]),[w,D]=(0,a.useState)(!0),[S,T]=(0,a.useState)(""),[E,k]=(0,a.useState)("all"),[R,O]=(0,a.useState)(null),[I,A]=(0,a.useState)(!1),[F,M]=(0,a.useState)(null),[P,_]=(0,a.useState)(""),[L,U]=(0,a.useState)(""),[H,B]=(0,a.useState)(!1),[q,z]=(0,a.useState)(!1),G=(0,a.useRef)(null),{toast:$}=(0,N.useToast)(),J=async()=>{D(!0);try{let e=new URLSearchParams;"all"!==E&&e.append("status",E);let t=await fetch(`/api/admin/requests?${e.toString()}`),a=await t.json();a.data&&y(a.data)}catch(e){$({title:"Error",description:"Failed to load requests",variant:"destructive"})}finally{D(!1)}};(0,a.useEffect)(()=>{J()},[E]);let W=async()=>{if(R&&F){B(!0);try{let e=await fetch("/api/admin/requests",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:R.id,status:F,adminNotes:P,proofUrl:L})});if(e.ok)$({title:"Success",description:`Request updated to ${F}`}),A(!1),J();else{let t=await e.json();throw Error(t.error||"Failed to update")}}catch(e){$({title:"Error",description:e.message,variant:"destructive"})}finally{B(!1)}}},X=async e=>{let t=e.target.files?.[0];if(t){z(!0);try{let e=new FormData;e.append("file",t);let a=await fetch("/api/admin/requests/upload",{method:"POST",body:e}),s=await a.json();a.ok?(U(s.fileUrl),$({title:"Success",description:`File uploaded: ${s.fileName}`})):$({title:"Error",description:s.error||"Upload failed",variant:"destructive"})}catch(e){$({title:"Error",description:"Failed to upload file",variant:"destructive"})}finally{z(!1)}}},V=i.filter(e=>e.reference.toLowerCase().includes(S.toLowerCase())||e.user.email.toLowerCase().includes(S.toLowerCase())||e.category.toLowerCase().includes(S.toLowerCase()));return(0,t.jsxs)("div",{className:"p-6 space-y-8 min-h-screen bg-[#F9F7F3]",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-[#3457D5]",children:"Service Requests"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage and track manual service executions"})]}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)(m.Button,{onClick:J,variant:"outline",className:"bg-white",children:"Refresh"})})]}),(0,t.jsxs)(f.Card,{className:"border-[#CCCCFF]/30 shadow-md",children:[(0,t.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-[#3457D5]/5 to-transparent border-b",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,t.jsx)(s.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(p.Input,{placeholder:"Search by reference, email, or service...",className:"pl-9 bg-white",value:S,onChange:e=>T(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,t.jsx)(r.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsxs)("select",{className:"bg-white border rounded-md h-10 px-3 text-sm focus:ring-2 ring-[#3457D5]/20 outline-none",value:E,onChange:e=>k(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Statuses"}),(0,t.jsx)("option",{value:"SUBMITTED",children:"Submitted"}),(0,t.jsx)("option",{value:"ONGOING",children:"Ongoing"}),(0,t.jsx)("option",{value:"SUCCESS",children:"Completed"}),(0,t.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,t.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]})]})]})}),(0,t.jsx)(f.CardContent,{className:"p-0",children:(0,t.jsxs)(g.Table,{children:[(0,t.jsx)(g.TableHeader,{children:(0,t.jsxs)(g.TableRow,{className:"hover:bg-transparent",children:[(0,t.jsx)(g.TableHead,{className:"w-[150px]",children:"Date & Ref"}),(0,t.jsx)(g.TableHead,{children:"User / Email"}),(0,t.jsx)(g.TableHead,{children:"Service"}),(0,t.jsx)(g.TableHead,{children:"Amount"}),(0,t.jsx)(g.TableHead,{children:"Status"}),(0,t.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(g.TableBody,{children:w?(0,t.jsx)(g.TableRow,{children:(0,t.jsx)(g.TableCell,{colSpan:6,className:"text-center py-10",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(o.Clock,{className:"h-8 w-8 text-[#3457D5] animate-spin"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Loading requests..."})]})})}):0===V.length?(0,t.jsx)(g.TableRow,{children:(0,t.jsx)(g.TableCell,{colSpan:6,className:"text-center py-10",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(u.AlertCircle,{className:"h-8 w-8 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"No requests found"})]})})}):V.map(e=>(0,t.jsxs)(g.TableRow,{children:[(0,t.jsxs)(g.TableCell,{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsx)("div",{className:"text-[10px] text-muted-foreground font-mono",children:e.reference})]}),(0,t.jsxs)(g.TableCell,{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:e.user.profile?.name||"No name"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.user.email})]}),(0,t.jsxs)(g.TableCell,{children:[(0,t.jsx)("div",{className:"text-sm font-medium uppercase",children:e.category}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.subservice||"N/A"})]}),(0,t.jsxs)(g.TableCell,{className:"font-semibold",children:["₦",e.amount.toLocaleString()]}),(0,t.jsx)(g.TableCell,{children:(e=>{switch(e){case"SUBMITTED":return(0,t.jsx)(C.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Submitted"});case"ONGOING":return(0,t.jsx)(C.Badge,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Ongoing"});case"SUCCESS":return(0,t.jsx)(C.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Completed"});case"REJECTED":return(0,t.jsx)(C.Badge,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Rejected"});case"CANCELLED":return(0,t.jsx)(C.Badge,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"Cancelled"});default:return(0,t.jsx)(C.Badge,{variant:"outline",children:e})}})(e.status)}),(0,t.jsx)(g.TableCell,{className:"text-right",children:(0,t.jsxs)(h.DropdownMenu,{children:[(0,t.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,t.jsx)(d,{className:"h-4 w-4"})})}),(0,t.jsxs)(h.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,t.jsxs)(h.DropdownMenuItem,{onClick:()=>{O(e),M("ONGOING"),_(e.adminNotes||""),U(e.proofUrl||""),A(!0)},children:[(0,t.jsx)(o.Clock,{className:"mr-2 h-4 w-4"})," Start Working"]}),(0,t.jsxs)(h.DropdownMenuItem,{className:"text-green-600",onClick:()=>{O(e),M("SUCCESS"),_(e.adminNotes||""),U(e.proofUrl||""),A(!0)},children:[(0,t.jsx)(l.CheckCircle2,{className:"mr-2 h-4 w-4"})," Mark Complete"]}),(0,t.jsx)(h.DropdownMenuSeparator,{}),(0,t.jsxs)(h.DropdownMenuItem,{className:"text-red-600",onClick:()=>{O(e),M("REJECTED"),_(e.adminNotes||""),U(""),A(!0)},children:[(0,t.jsx)(n.XCircle,{className:"mr-2 h-4 w-4"})," Reject"]}),(0,t.jsxs)(h.DropdownMenuItem,{className:"text-gray-600",onClick:()=>{O(e),M("CANCELLED"),_(e.adminNotes||""),U(""),A(!0)},children:[(0,t.jsx)(n.XCircle,{className:"mr-2 h-4 w-4"})," Cancel"]})]})]})})]},e.id))})]})})]}),(0,t.jsx)(j.Dialog,{open:I,onOpenChange:A,children:(0,t.jsxs)(j.DialogContent,{children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsxs)(j.DialogTitle,{children:["ONGOING"===F&&"Start Processing Request","SUCCESS"===F&&"Complete Request","REJECTED"===F&&"Reject Request","CANCELLED"===F&&"Cancel Request"]}),(0,t.jsxs)(j.DialogDescription,{children:["Action for reference: ",(0,t.jsx)("span",{className:"font-mono font-bold",children:R?.reference})]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto pr-2",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Eye,{className:"h-4 w-4 text-[#3457D5]"}),(0,t.jsx)("h3",{className:"text-sm font-bold text-foreground font-sans",children:"User Submitted Details"})]}),(e=R?.meta?.params)?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 p-3 bg-muted/30 rounded-lg border border-border/50",children:Object.entries(e).map(([e,a])=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase font-bold text-muted-foreground tracking-wider",children:e.replace(/([A-Z])/g," $1").trim()}),(0,t.jsx)("p",{className:"text-sm font-medium break-all",children:String(a)})]},e))}):(0,t.jsx)("span",{className:"text-muted-foreground italic text-xs",children:"No parameters provided"})]}),(0,t.jsx)(h.DropdownMenuSeparator,{className:"my-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.Label,{htmlFor:"notes",children:"Admin Notes"}),(0,t.jsx)(v.Textarea,{id:"notes",placeholder:"Message to the user...",value:P,onChange:e=>_(e.target.value)}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground italic",children:"Admin notes are visible to the user."})]}),"SUCCESS"===F&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.Label,{children:"Proof of Completion"}),(0,t.jsx)("input",{ref:G,type:"file",accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:X,className:"hidden"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(p.Input,{id:"proof",placeholder:"https://... or upload a file",value:L,onChange:e=>U(e.target.value)}),(0,t.jsx)(m.Button,{size:"icon",variant:"outline",title:"Upload file",onClick:()=>G.current?.click(),disabled:q,children:q?(0,t.jsx)(o.Clock,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(c,{className:"h-4 w-4"})})]}),L&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-green-600 bg-green-50 p-2 rounded",children:[(0,t.jsx)(l.CheckCircle2,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"truncate",children:L})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Enter a link OR upload image/PDF/Word/Excel file (max 10MB)."})]}),("REJECTED"===F||"CANCELLED"===F)&&(0,t.jsxs)("div",{className:"p-3 bg-red-50 border border-red-100 rounded-md flex gap-2",children:[(0,t.jsx)(u.AlertCircle,{className:"h-5 w-5 text-red-600 shrink-0"}),(0,t.jsxs)("p",{className:"text-xs text-red-700",children:["This will refund ₦",R?.amount.toLocaleString()," back to the user's wallet."]})]})]}),(0,t.jsxs)(j.DialogFooter,{children:[(0,t.jsx)(m.Button,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,t.jsx)(m.Button,{onClick:W,disabled:H,className:"SUCCESS"===F?"bg-green-600 hover:bg-green-700":"REJECTED"===F?"bg-red-600 hover:bg-red-700":"bg-[#3457D5]",children:H?"Saving...":"Confirm Action"})]})]})})]})}e.s(["default",()=>y],19840)}]);