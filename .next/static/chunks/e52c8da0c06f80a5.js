(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,750769,e=>{"use strict";var t=e.i(271645),i=e.i(692659);function a(e){try{let t=String(e?.role||"").toLowerCase(),i=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return t.includes("marketer")||i.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function r(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let t=await e.json().catch(()=>null);return a(t?.user||t)}catch{return"user"}}function s(e,s,n,l,o){let[c,d]=(0,t.useState)(()=>a(o)),[u,m]=(0,t.useState)(null),[g,x]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,v]=(0,t.useState)(void 0),b=(0,t.useMemo)(()=>({category:String(e||"").trim(),subservice:String(s||"").trim(),variant:String(n||"").trim()}),[e,s,n]),y=(0,t.useMemo)(()=>{if(!l||"object"!=typeof l)return"";let e=Object.entries(l).filter(([e,t])=>null!=t);return e.length?(e.sort(([e],[t])=>e.localeCompare(t)),e.map(([e,t])=>`${e}=${String(t)}`).join("|")):""},[l]);return(0,t.useEffect)(()=>{let e=!1;return(async()=>{x(!0),p(null);try{let t=o?a(o):await r();e||d(t);let i=[["category",b.category],["subservice",b.subservice],["variant",b.variant],["role",t]];if(l&&"object"==typeof l){let e=Object.entries(l).filter(([e,t])=>null!=t);for(let[t,a]of(e.sort(([e],[t])=>e.localeCompare(t)),e))i.push([t,String(a)])}let s=new URLSearchParams(i),n=await fetch(`/api/pricing?${s.toString()}`,{cache:"no-store"}),c=await n.json().catch(()=>null);if(!n.ok)throw Error(String(c?.error||"Failed to load pricing"));let u=c?.price;m("number"==typeof u?u:null)}catch(e){p(e?.message||"Failed to fetch pricing"),m(null)}finally{e||x(!1)}})(),()=>{e=!0}},[b.category,b.subservice,b.variant,y,o]),{price:u,isLoading:g,error:h,reference:f,submitService:(0,t.useCallback)(async e=>{try{let t={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:b.variant||void 0,action:function(e,t){let i=e.trim().toLowerCase(),a=t.trim().toLowerCase();if("nin"===i){if("slip"===a)return"nin.slip";if("printout"===a)return"nin.printout";if("advanced"===a||"verification"===a)return"nin.advanced"}if("bvn"===i){if("printout"===a)return"bvn.printout";if("retrieval"===a||"retrieval_phone"===a)return"bvn.retrieval_phone";if("advanced"===a||"verification"===a)return"bvn.advanced"}if("cac"===i){if("info"===a)return"cac.info";if("status"===a)return"cac.status"}return"passport"===i&&("verify"===a||"verification"===a||"basic"===a)?"passport.verify":"phone"===i&&("advanced"===a||"verification"===a||"basic"===a)?"phone.verify_advanced":("driver-license"===i||"drivers_license"===i)&&("basic"===a||"verification"===a)?"drivers_license.verify":("voters-card"===i||"voters"===i)&&("basic"===a||"full"===a||"verification"===a)?"voters.verify":("plate-number"===i||"plate"===i)&&("basic"===a||"verification"===a)?"plate.verify":"tin"===i&&("basic"===a||"certificate"===a||"verification"===a)?"tin.verify":null}(b.category,b.subservice)||void 0,pin:e.pin},a=await (0,i.authFetch)(`/api/service/${encodeURIComponent(b.category)}/${encodeURIComponent(b.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),r=await a.json().catch(()=>null);if(!a.ok)return{ok:!1,error:String(r?.error||`Service failed (${a.status})`),message:String(r?.message||"Failed"),data:r};return v(String(r?.reference||"")),{ok:!0,reference:String(r?.reference||""),message:String(r?.message||""),data:r}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[b.category,b.subservice,b.variant])}}e.s(["default",0,s,"useDynamicPricing",()=>s])},330843,e=>{"use strict";var t=e.i(843476),i=e.i(271645),a=e.i(630374),r=e.i(167881),s=e.i(23750),n=e.i(10708),l=e.i(846696);function o({isOpen:e,onClose:o,onConfirm:c,isLoading:d}){let[u,m]=(0,i.useState)(""),g=()=>{4!==u.length?l.toast.error("Please enter a 4-digit PIN"):(c(u),m(""))};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:e=>!e&&o(),children:(0,t.jsxs)(a.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"Enter Transaction PIN"}),(0,t.jsx)(a.DialogDescription,{children:"Please enter your 4-digit transaction PIN to authorize this request."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"pin",className:"text-center block",children:"PIN"}),(0,t.jsx)(s.Input,{id:"pin",type:"password",inputMode:"numeric",maxLength:4,value:u,onChange:e=>m(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-[1em]",placeholder:"••••",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&g()}})]})}),(0,t.jsxs)(a.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:o,disabled:d,children:"Cancel"}),(0,t.jsx)(r.Button,{onClick:g,disabled:d||4!==u.length,className:"bg-[#3457D5]",children:d?"Verifying...":"Confirm PIN"})]})]})})}e.s(["PinPrompt",()=>o])},440160,e=>{"use strict";let t=(0,e.i(475254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],440160)},127341,e=>{"use strict";var t=e.i(843476),i=e.i(271645),a=e.i(981140),r=e.i(30030),s=e.i(842727),n=e.i(296626),l=e.i(248425),o=e.i(586318),c=e.i(369340),d=e.i(610772),u="Tabs",[m,g]=(0,r.createContextScope)(u,[s.createRovingFocusGroupScope]),x=(0,s.createRovingFocusGroupScope)(),[h,p]=m(u),f=i.forwardRef((e,i)=>{let{__scopeTabs:a,value:r,onValueChange:s,defaultValue:n,orientation:m="horizontal",dir:g,activationMode:x="automatic",...p}=e,f=(0,o.useDirection)(g),[v,b]=(0,c.useControllableState)({prop:r,onChange:s,defaultProp:n??"",caller:u});return(0,t.jsx)(h,{scope:a,baseId:(0,d.useId)(),value:v,onValueChange:b,orientation:m,dir:f,activationMode:x,children:(0,t.jsx)(l.Primitive.div,{dir:f,"data-orientation":m,...p,ref:i})})});f.displayName=u;var v="TabsList",b=i.forwardRef((e,i)=>{let{__scopeTabs:a,loop:r=!0,...n}=e,o=p(v,a),c=x(a);return(0,t.jsx)(s.Root,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:r,children:(0,t.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:i})})});b.displayName=v;var y="TabsTrigger",j=i.forwardRef((e,i)=>{let{__scopeTabs:r,value:n,disabled:o=!1,...c}=e,d=p(y,r),u=x(r),m=C(d.baseId,n),g=S(d.baseId,n),h=n===d.value;return(0,t.jsx)(s.Item,{asChild:!0,...u,focusable:!o,active:h,children:(0,t.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":g,"data-state":h?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:m,...c,ref:i,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(n)}),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(n)}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||o||!e||d.onValueChange(n)})})})});j.displayName=y;var N="TabsContent",w=i.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,forceMount:o,children:c,...d}=e,u=p(N,r),m=C(u.baseId,s),g=S(u.baseId,s),x=s===u.value,h=i.useRef(x);return i.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:o||x,children:({present:i})=>(0,t.jsx)(l.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!i,id:g,tabIndex:0,...d,ref:a,style:{...e.style,animationDuration:h.current?"0s":void 0},children:i&&c})})});function C(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}w.displayName=N;var k=e.i(647163);function D({className:e,...i}){return(0,t.jsx)(f,{"data-slot":"tabs",className:(0,k.cn)("flex flex-col gap-2",e),...i})}function T({className:e,...i}){return(0,t.jsx)(b,{"data-slot":"tabs-list",className:(0,k.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...i})}function F({className:e,...i}){return(0,t.jsx)(j,{"data-slot":"tabs-trigger",className:(0,k.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...i})}function P({className:e,...i}){return(0,t.jsx)(w,{"data-slot":"tabs-content",className:(0,k.cn)("flex-1 outline-none",e),...i})}e.s(["Tabs",()=>D,"TabsContent",()=>P,"TabsList",()=>T,"TabsTrigger",()=>F],127341)},270756,e=>{"use strict";let t=(0,e.i(475254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],270756)},473708,e=>{"use strict";let t=(0,e.i(475254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],473708)},431343,e=>{"use strict";let t=(0,e.i(475254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>t],431343)},736060,e=>{"use strict";var t=e.i(843476),i=e.i(271645),a=e.i(846932),r=e.i(970065),s=e.i(994179),n=e.i(167881),l=e.i(671428),o=e.i(127341),c=e.i(440160),d=e.i(270756),u=e.i(431343),m=e.i(473708),g=e.i(630374),x=e.i(846696),h=e.i(750769),p=e.i(10708),f=e.i(62870),v=e.i(330843),b=e.i(692659),y=e.i(647163);function j(){let[e,j]=(0,i.useState)([]),[N,w]=(0,i.useState)(!0),[C,S]=(0,i.useState)(!1),[k,D]=(0,i.useState)("All"),[T,F]=(0,i.useState)(""),{price:P,isLoading:I,submitService:U}=(0,h.default)("training","premium-user","subscription",{deliveryOption:T||""}),[A,L]=(0,i.useState)(!1),[R,O]=(0,i.useState)(!1),[_,V]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("ufriends_user_subscription"),t=e?JSON.parse(e):{isPremium:!1};S(t.isPremium);let i=await (0,b.authFetch)("/api/training?category=Premium");if(i.ok){let e=await i.json();j(e.trainings||[])}}catch(e){console.error("Failed to load:",e)}finally{w(!1)}})()},[]);let E=async e=>{O(!1),L(!0);try{let t=await U({..._,pin:e});if(!t.ok)return void x.toast.error(t.error||"Upgrade Failed");let i={userId:"u_001",isPremium:!0,activatedAt:new Date().toISOString()};localStorage.setItem("ufriends_user_subscription",JSON.stringify(i)),S(!0),x.toast.success("You now have Premium Access!")}catch(e){x.toast.error(e.message||"An error occurred")}finally{L(!1)}},B="All"===k?e:e.filter(e=>e.title.toLowerCase().includes(k.toLowerCase()));return N?(0,t.jsx)("div",{className:"min-h-screen bg-[#F9F7F3] p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)(l.Skeleton,{className:"h-12 w-64 mb-4"}),(0,t.jsx)(l.Skeleton,{className:"h-6 w-96 mb-8"}),(0,t.jsx)(l.Skeleton,{className:"h-80 rounded-2xl"})]})}):C?(0,t.jsxs)("div",{className:"min-h-screen bg-[#F9F7F3] p-6",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-[#3457D5]",children:"Premium User Training"}),(0,t.jsx)(s.Badge,{className:"bg-gradient-to-r from-[#3457D5] to-[#CCCCFF] text-white",children:"Premium"})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Access exclusive lessons and advanced tutorials for premium members."})]}),(0,t.jsx)(o.Tabs,{defaultValue:"All",className:"mb-6",onValueChange:D,children:(0,t.jsxs)(o.TabsList,{className:"bg-white rounded-xl",children:[(0,t.jsx)(o.TabsTrigger,{value:"All",children:"All"}),(0,t.jsx)(o.TabsTrigger,{value:"BVN",children:"BVN"}),(0,t.jsx)(o.TabsTrigger,{value:"NIN",children:"NIN"}),(0,t.jsx)(o.TabsTrigger,{value:"CAC",children:"CAC"}),(0,t.jsx)(o.TabsTrigger,{value:"Agency",children:"Agency"})]})}),0===B.length?(0,t.jsxs)(r.Card,{className:"p-12 text-center rounded-2xl shadow-sm",children:[(0,t.jsx)(u.Play,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Training Available"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Check back later for new premium content."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map((e,i)=>{let l;return(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*i},children:(0,t.jsxs)(r.Card,{className:"shadow-sm rounded-2xl p-3 hover:shadow-lg transition-shadow",children:[e.videoUrl?(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("iframe",{src:e.videoUrl,className:"w-full aspect-video rounded-xl",allowFullScreen:!0,title:e.title}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-xl pointer-events-none"})]}):e.fileUrl&&e.fileType?.startsWith("video/")?(0,t.jsx)("div",{className:"relative group",children:(0,t.jsx)("video",{src:e.fileUrl,controls:!0,className:"w-full aspect-video rounded-xl"})}):e.fileUrl&&e.fileType?.startsWith("image/")?(0,t.jsxs)(g.Dialog,{children:[(0,t.jsx)(g.DialogTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"w-full aspect-video rounded-xl overflow-hidden cursor-pointer relative group",children:[(0,t.jsx)("img",{src:e.fileUrl,alt:e.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:(0,t.jsx)(m.Image,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})}),(0,t.jsx)(g.DialogContent,{className:"max-w-4xl max-h-[90vh] p-0 overflow-hidden bg-black/95 border-none",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,t.jsx)("img",{src:e.fileUrl,alt:e.title,className:"w-full h-full max-h-[90vh] object-contain"})})})]}):(0,t.jsx)("div",{className:"w-full aspect-video rounded-xl bg-gradient-to-br from-[#3457D5] to-[#CCCCFF] flex items-center justify-center",children:(0,t.jsx)(u.Play,{className:"w-16 h-16 text-white"})}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg leading-tight",children:e.title}),(l=new Date(e.createdAt),(new Date().getTime()-l.getTime())/864e5<7&&(0,t.jsx)(s.Badge,{className:"bg-[#3457D5] text-white shrink-0",children:"New"}))]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(e.pdfUrl||e.fileUrl&&!e.fileType?.startsWith("video/")&&!e.fileType?.startsWith("image/"))&&(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full bg-transparent",onClick:()=>window.open((0,y.ensureAbsoluteUrl)(e.fileUrl||e.pdfUrl),"_blank"),children:[(0,t.jsx)(c.Download,{className:"w-4 h-4 mr-2"}),"Download Resource"]})]})]})},e.id)})})]}),(0,t.jsx)(v.PinPrompt,{isOpen:R,onClose:()=>O(!1),onConfirm:E,isLoading:A})]}):(0,t.jsx)("div",{className:"min-h-screen bg-[#F9F7F3] p-6 flex items-center justify-center",children:(0,t.jsx)(a.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,t.jsxs)(r.Card,{className:"text-center p-10 rounded-2xl shadow-lg max-w-md",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-[#CCCCFF] flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.Lock,{size:40,className:"text-[#3457D5]"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Premium Access Required"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Upgrade to access exclusive lessons, advanced tutorials, and downloadable resources."}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-[#CCCCFF] px-4 py-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-[#3457D5]",children:"Upgrade price"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-[#3457D5]",children:["₦",Number(P||0).toLocaleString()]})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:"Price may vary by delivery option."})]}),(0,t.jsxs)("div",{className:"mb-4 text-left",children:[(0,t.jsx)(p.Label,{htmlFor:"deliveryOption",children:"Delivery Option"}),(0,t.jsxs)(f.Select,{value:T,onValueChange:F,children:[(0,t.jsx)(f.SelectTrigger,{className:"border-[#CCCCFF] focus:border-[#3457D5]",children:(0,t.jsx)(f.SelectValue,{placeholder:"Select delivery option"})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"standard",children:"Standard"}),(0,t.jsx)(f.SelectItem,{value:"express",children:"Express"})]})]})]}),(0,t.jsx)(n.Button,{onClick:()=>{V({amount:Number(P||0),idempotencyKey:crypto.randomUUID(),params:{deliveryOption:T},category:"training",action:"premium-user"}),O(!0)},disabled:A||I,className:"bg-[#3457D5] hover:bg-[#2a46b0] text-white",children:A?"Processing...":"Upgrade Now"})]})})})}e.s(["default",()=>j])}]);