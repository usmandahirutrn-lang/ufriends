(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,595468,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],595468)},750769,e=>{"use strict";var t=e.i(271645),i=e.i(692659);function a(e){try{let t=String(e?.role||"").toLowerCase(),i=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return t.includes("marketer")||i.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function r(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let t=await e.json().catch(()=>null);return a(t?.user||t)}catch{return"user"}}function s(e,s,n,l,c){let[o,d]=(0,t.useState)(()=>a(c)),[p,m]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[y,x]=(0,t.useState)(null),[g,v]=(0,t.useState)(void 0),b=(0,t.useMemo)(()=>({category:String(e||"").trim(),subservice:String(s||"").trim(),variant:String(n||"").trim()}),[e,s,n]),f=(0,t.useMemo)(()=>{if(!l||"object"!=typeof l)return"";let e=Object.entries(l).filter(([e,t])=>null!=t);return e.length?(e.sort(([e],[t])=>e.localeCompare(t)),e.map(([e,t])=>`${e}=${String(t)}`).join("|")):""},[l]);return(0,t.useEffect)(()=>{let e=!1;return(async()=>{h(!0),x(null);try{let t=c?a(c):await r();e||d(t);let i=[["category",b.category],["subservice",b.subservice],["variant",b.variant],["role",t]];if(l&&"object"==typeof l){let e=Object.entries(l).filter(([e,t])=>null!=t);for(let[t,a]of(e.sort(([e],[t])=>e.localeCompare(t)),e))i.push([t,String(a)])}let s=new URLSearchParams(i),n=await fetch(`/api/pricing?${s.toString()}`,{cache:"no-store"}),o=await n.json().catch(()=>null);if(!n.ok)throw Error(String(o?.error||"Failed to load pricing"));let p=o?.price;m("number"==typeof p?p:null)}catch(e){x(e?.message||"Failed to fetch pricing"),m(null)}finally{e||h(!1)}})(),()=>{e=!0}},[b.category,b.subservice,b.variant,f,c]),{price:p,isLoading:u,error:y,reference:g,submitService:(0,t.useCallback)(async e=>{try{let t={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:b.variant||void 0,action:function(e,t){let i=e.trim().toLowerCase(),a=t.trim().toLowerCase();if("nin"===i){if("slip"===a)return"nin.slip";if("printout"===a)return"nin.printout";if("advanced"===a||"verification"===a)return"nin.advanced"}if("bvn"===i){if("printout"===a)return"bvn.printout";if("retrieval"===a||"retrieval_phone"===a)return"bvn.retrieval_phone";if("advanced"===a||"verification"===a)return"bvn.advanced"}if("cac"===i){if("info"===a)return"cac.info";if("status"===a)return"cac.status"}return"passport"===i&&("verify"===a||"verification"===a||"basic"===a)?"passport.verify":"phone"===i&&("advanced"===a||"verification"===a||"basic"===a)?"phone.verify_advanced":("driver-license"===i||"drivers_license"===i)&&("basic"===a||"verification"===a)?"drivers_license.verify":("voters-card"===i||"voters"===i)&&("basic"===a||"full"===a||"verification"===a)?"voters.verify":("plate-number"===i||"plate"===i)&&("basic"===a||"verification"===a)?"plate.verify":"tin"===i&&("basic"===a||"certificate"===a||"verification"===a)?"tin.verify":null}(b.category,b.subservice)||void 0,pin:e.pin},a=await (0,i.authFetch)(`/api/service/${encodeURIComponent(b.category)}/${encodeURIComponent(b.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),r=await a.json().catch(()=>null);if(!a.ok)return{ok:!1,error:String(r?.error||`Service failed (${a.status})`),message:String(r?.message||"Failed"),data:r};return v(String(r?.reference||"")),{ok:!0,reference:String(r?.reference||""),message:String(r?.message||""),data:r}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[b.category,b.subservice,b.variant])}}e.s(["default",0,s,"useDynamicPricing",()=>s])},330843,e=>{"use strict";var t=e.i(843476),i=e.i(271645),a=e.i(630374),r=e.i(167881),s=e.i(23750),n=e.i(10708),l=e.i(846696);function c({isOpen:e,onClose:c,onConfirm:o,isLoading:d}){let[p,m]=(0,i.useState)(""),u=()=>{4!==p.length?l.toast.error("Please enter a 4-digit PIN"):(o(p),m(""))};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:e=>!e&&c(),children:(0,t.jsxs)(a.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"Enter Transaction PIN"}),(0,t.jsx)(a.DialogDescription,{children:"Please enter your 4-digit transaction PIN to authorize this request."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"pin",className:"text-center block",children:"PIN"}),(0,t.jsx)(s.Input,{id:"pin",type:"password",inputMode:"numeric",maxLength:4,value:p,onChange:e=>m(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-[1em]",placeholder:"••••",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&u()}})]})}),(0,t.jsxs)(a.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:c,disabled:d,children:"Cancel"}),(0,t.jsx)(r.Button,{onClick:u,disabled:d||4!==p.length,className:"bg-[#3457D5]",children:d?"Verifying...":"Confirm PIN"})]})]})})}e.s(["PinPrompt",()=>c])},929054,e=>{"use strict";function t(e,i,a="Error"){i({title:a,description:e.error||e.message||"An unexpected error occurred",variant:"destructive"})}e.s(["handleServiceError",()=>t])},399404,e=>{"use strict";var t=e.i(843476),i=e.i(271645),a=e.i(167881),r=e.i(970065),s=e.i(23750),n=e.i(10708),l=e.i(62870),c=e.i(671428),o=e.i(120682);let d=(0,e.i(475254).default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var p=e.i(252754),m=e.i(595468),u=e.i(846932),h=e.i(88653),y=e.i(750769),x=e.i(630374),g=e.i(330843),v=e.i(929054);let b={MTN:[{id:"mtn-corp-1gb",name:"1GB Corporate",size:"1GB",price:300,validity:"30 days"},{id:"mtn-corp-2gb",name:"2GB Corporate",size:"2GB",price:600,validity:"30 days"},{id:"mtn-corp-3gb",name:"3GB Corporate",size:"3GB",price:900,validity:"30 days"},{id:"mtn-corp-4gb",name:"4GB Corporate",size:"4GB",price:1200,validity:"30 days"},{id:"mtn-corp-5gb",name:"5GB Corporate",size:"5GB",price:1500,validity:"30 days"},{id:"mtn-corp-10gb",name:"10GB Corporate",size:"10GB",price:3e3,validity:"30 days"},{id:"mtn-corp-25gb",name:"25GB Corporate",size:"25GB",price:7500,validity:"30 days"},{id:"mtn-corp-50gb",name:"50GB Corporate",size:"50GB",price:15e3,validity:"30 days"}],Airtel:[{id:"airtel-corp-1gb",name:"1GB Corporate",size:"1GB",price:290,validity:"30 days"},{id:"airtel-corp-2gb",name:"2GB Corporate",size:"2GB",price:580,validity:"30 days"},{id:"airtel-corp-3gb",name:"3GB Corporate",size:"3GB",price:870,validity:"30 days"},{id:"airtel-corp-4gb",name:"4GB Corporate",size:"4GB",price:1160,validity:"30 days"},{id:"airtel-corp-5gb",name:"5GB Corporate",size:"5GB",price:1450,validity:"30 days"},{id:"airtel-corp-10gb",name:"10GB Corporate",size:"10GB",price:2900,validity:"30 days"},{id:"airtel-corp-25gb",name:"25GB Corporate",size:"25GB",price:7250,validity:"30 days"}],Glo:[{id:"glo-corp-1gb",name:"1GB Corporate",size:"1GB",price:280,validity:"30 days"},{id:"glo-corp-2gb",name:"2GB Corporate",size:"2GB",price:560,validity:"30 days"},{id:"glo-corp-3gb",name:"3GB Corporate",size:"3GB",price:840,validity:"30 days"},{id:"glo-corp-4gb",name:"4GB Corporate",size:"4GB",price:1120,validity:"30 days"},{id:"glo-corp-5gb",name:"5GB Corporate",size:"5GB",price:1400,validity:"30 days"},{id:"glo-corp-10gb",name:"10GB Corporate",size:"10GB",price:2800,validity:"30 days"}],"9mobile":[{id:"9mobile-corp-1gb",name:"1GB Corporate",size:"1GB",price:270,validity:"30 days"},{id:"9mobile-corp-2gb",name:"2GB Corporate",size:"2GB",price:540,validity:"30 days"},{id:"9mobile-corp-3gb",name:"3GB Corporate",size:"3GB",price:810,validity:"30 days"},{id:"9mobile-corp-4gb",name:"4GB Corporate",size:"4GB",price:1080,validity:"30 days"},{id:"9mobile-corp-5gb",name:"5GB Corporate",size:"5GB",price:1350,validity:"30 days"},{id:"9mobile-corp-10gb",name:"10GB Corporate",size:"10GB",price:2700,validity:"30 days"}]};function f(){let[e,f]=(0,i.useState)(!0),[j,C]=(0,i.useState)(!1),[N,S]=(0,i.useState)(0),[B,w]=(0,i.useState)(""),[G,k]=(0,i.useState)(null),D=B&&G?`${B.toLowerCase()}.${G.size.toLowerCase()}`:"",{price:F,isLoading:z,error:P,submitService:I}=(0,y.default)("data","corporate",D,{network:B,size:G?.size||""}),[L,M]=(0,i.useState)(""),[T,U]=(0,i.useState)("wallet"),[A,$]=(0,i.useState)(!1),[O,E]=(0,i.useState)(""),[R,V]=(0,i.useState)(!1),[K,_]=(0,i.useState)(null),{toast:H}=(0,o.useToast)();(0,i.useEffect)(()=>{let e=localStorage.getItem("ufriends_wallet_balance");S(e?Number.parseFloat(e):0),f(!1)},[]);let W=B&&b[B]||[],q=()=>"number"==typeof F?Math.round(F):0,J=async e=>{if(e.preventDefault(),!B||!G||!L||!T)return void H({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});if(11!==L.length)return void H({title:"Invalid Phone Number",description:"Phone number must be 11 digits",variant:"destructive"});let t=q();if("number"!=typeof F)return void H({title:"Pricing Unavailable",description:"Live pricing could not be fetched. Please try again.",variant:"destructive"});if("wallet"===T&&N<t)return void H({title:"Insufficient Balance",description:`You need ₦${t.toLocaleString()} but have ₦${N.toLocaleString()}`,variant:"destructive"});if("wallet"!==T){C(!0),E(crypto.randomUUID()),C(!1),$(!0),H({title:"Order Received",description:"Please complete bank transfer"});return}_({amount:t,phone:L,network:B,planCode:G.size,idempotencyKey:crypto.randomUUID(),category:"data",action:"corporate"}),V(!0)},Y=async e=>{V(!1),C(!0);try{let t=await I({...K,pin:e});if(!t.ok)return void(0,v.handleServiceError)(t,H,"Purchase Failed");E(t?.reference||crypto.randomUUID()),$(!0),H({title:"Purchase Successful",description:`${G?.size} sent to ${L}`})}catch(e){H({title:"Purchase Failed",description:e?.message||"Unable to complete purchase",variant:"destructive"})}finally{C(!1)}};return e?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsx)(c.Skeleton,{className:"h-32 w-full"}),(0,t.jsx)(c.Skeleton,{className:"h-96 w-full"})]}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)(u.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,t.jsx)(d,{className:"h-12 w-12 text-[#3457D5] mr-3"}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Corporate Data"})]}),(0,t.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Premium corporate data plans for businesses"})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:(0,t.jsx)(u.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(r.Card,{className:"bg-gradient-to-br from-[#3457D5] to-[#CCCCFF] text-white",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsxs)(r.CardTitle,{className:"flex items-center text-white",children:[(0,t.jsx)(p.Wallet,{className:"h-5 w-5 mr-2"}),"Wallet Balance"]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("p",{className:"text-3xl font-bold",children:["₦",N.toLocaleString()]})})]})})}),(0,t.jsx)(u.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(r.Card,{className:"shadow-lg border-[#CCCCFF]",children:[(0,t.jsxs)(r.CardHeader,{className:"bg-[#F9F7F3]",children:[(0,t.jsx)(r.CardTitle,{className:"text-[#3457D5]",children:"Purchase Corporate Data"}),(0,t.jsx)(r.CardDescription,{children:"Enterprise-grade data solutions"})]}),(0,t.jsx)(r.CardContent,{className:"pt-6",children:(0,t.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"network",children:"Select Network *"}),(0,t.jsxs)(l.Select,{value:B,onValueChange:w,children:[(0,t.jsx)(l.SelectTrigger,{className:"border-[#CCCCFF] focus:ring-[#3457D5]",children:(0,t.jsx)(l.SelectValue,{placeholder:"Choose network"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"MTN",children:"MTN"}),(0,t.jsx)(l.SelectItem,{value:"Airtel",children:"Airtel"}),(0,t.jsx)(l.SelectItem,{value:"Glo",children:"Glo"}),(0,t.jsx)(l.SelectItem,{value:"9mobile",children:"9mobile"})]})]})]}),(0,t.jsx)(h.AnimatePresence,{mode:"wait",children:B&&(0,t.jsxs)(u.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[(0,t.jsx)(n.Label,{htmlFor:"plan",children:"Select Corporate Plan *"}),(0,t.jsxs)(l.Select,{value:G?.id||"",onValueChange:e=>{k(W.find(t=>t.id===e)||null)},children:[(0,t.jsx)(l.SelectTrigger,{className:"border-[#CCCCFF] focus:ring-[#3457D5]",children:(0,t.jsx)(l.SelectValue,{placeholder:"Choose corporate plan"})}),(0,t.jsx)(l.SelectContent,{children:W.map(e=>(0,t.jsxs)(l.SelectItem,{value:e.id,children:[e.name," (",e.validity,")"]},e.id))})]}),G&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-gray-700",children:[z&&(0,t.jsx)("p",{children:"Fetching live price…"}),!z&&P&&(0,t.jsxs)("p",{className:"text-red-600",children:["Unable to fetch price: ",P]}),!z&&!P&&"number"==typeof F&&(0,t.jsxs)("p",{children:["Current price: ₦",Math.round(F).toLocaleString()]})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"recipientNumber",children:"Recipient Phone Number *"}),(0,t.jsx)(s.Input,{id:"recipientNumber",type:"tel",placeholder:"08012345678",value:L,onChange:e=>M(e.target.value.replace(/\D/g,"").slice(0,11)),maxLength:11,className:"border-[#CCCCFF] focus:ring-[#3457D5]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"paymentMethod",children:"Payment Method *"}),(0,t.jsxs)(l.Select,{value:T,onValueChange:U,children:[(0,t.jsx)(l.SelectTrigger,{className:"border-[#CCCCFF] focus:ring-[#3457D5]",children:(0,t.jsx)(l.SelectValue,{placeholder:"Choose payment method"})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"wallet",children:"Wallet"}),(0,t.jsx)(l.SelectItem,{value:"bank",children:"Bank Transfer"})]})]})]}),G&&(0,t.jsxs)(u.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-[#F9F7F3] rounded-lg border border-[#CCCCFF]",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Data Plan:"}),(0,t.jsx)("span",{className:"font-semibold",children:G.size})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Validity:"}),(0,t.jsx)("span",{className:"font-semibold",children:G.validity})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold text-[#3457D5]",children:[(0,t.jsx)("span",{children:"Total Amount:"}),(0,t.jsxs)("span",{children:["₦",q().toLocaleString()]})]})]}),(0,t.jsx)(a.Button,{type:"submit",disabled:j||!B||!G||!L,className:"w-full bg-[#3457D5] hover:bg-[#2a4ab0] text-white",children:j?"Processing...":"Buy Corporate Data"})]})})]})}),B&&(0,t.jsx)(t.Fragment,{}),(0,t.jsx)(x.Dialog,{open:A,onOpenChange:$,children:(0,t.jsxs)(x.DialogContent,{className:"border-[#CCCCFF]",children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,t.jsx)(m.CheckCircle2,{className:"h-12 w-12 text-green-600"})})}),(0,t.jsx)(x.DialogTitle,{className:"text-center text-2xl text-[#3457D5]",children:"wallet"===T?"Purchase Successful!":"Order Received!"}),(0,t.jsxs)(x.DialogDescription,{className:"text-center space-y-4 pt-4",children:[(0,t.jsxs)("div",{className:"bg-[#F9F7F3] p-4 rounded-lg space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Transaction ID:"}),(0,t.jsx)("span",{className:"font-semibold",children:O})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Network:"}),(0,t.jsx)("span",{className:"font-semibold",children:B})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Data Plan:"}),(0,t.jsx)("span",{className:"font-semibold",children:G?.size})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Recipient:"}),(0,t.jsx)("span",{className:"font-semibold",children:L})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold text-[#3457D5]",children:[(0,t.jsx)("span",{children:"Amount:"}),(0,t.jsxs)("span",{children:["₦",G?q().toLocaleString():0]})]})]}),"bank"===T&&(0,t.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[(0,t.jsx)("p",{className:"text-sm text-yellow-800 font-semibold mb-2",children:"Bank Transfer Details:"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Bank: GTBank"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Account: 0123456789"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Name: UFriends IT"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"wallet"===T?"Data will be delivered within 5 minutes":"Data will be delivered after payment confirmation"})]})]}),(0,t.jsx)(a.Button,{onClick:()=>{w(""),k(null),M(""),U("wallet"),$(!1),E("")},className:"w-full bg-[#3457D5] hover:bg-[#2a4ab0]",children:"Make Another Purchase"})]})}),(0,t.jsx)(g.PinPrompt,{isOpen:R,onClose:()=>V(!1),onConfirm:Y,isLoading:j})]})}e.s(["default",()=>f],399404)}]);