(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,120682,e=>{"use strict";var t=e.i(271645);let s=0,a=new Map,r=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},l=[],i={toasts:[]};function c(e){i=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(i,e),l.forEach(e=>{e(i)})}function d({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function n(){let[e,s]=t.useState(i);return t.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>d,"useToast",()=>n])},519190,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(970065),r=e.i(167881),l=e.i(23750),i=e.i(10708),c=e.i(62870),d=e.i(994179),n=e.i(120682),o=e.i(692659);function u(){let{toast:e}=(0,n.useToast)(),[u,h]=(0,s.useState)([]),[x,m]=(0,s.useState)(""),[j,S]=(0,s.useState)(""),[v,p]=(0,s.useState)(""),[T,f]=(0,s.useState)(""),[C,g]=(0,s.useState)(null),[A,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(0,o.authFetch)("/api/service-catalog").then(async e=>h(await e.json())).catch(t=>e({title:"Error",description:String(t),variant:"destructive"}))},[e]);let y=(0,s.useMemo)(()=>Array.from(new Set(u.map(e=>e.category))),[u]),N=(0,s.useMemo)(()=>Array.from(new Set(u.filter(e=>e.category===x).map(e=>e.subservice))),[u,x]);(0,s.useEffect)(()=>{S("")},[x]);let b=async()=>{_(!0);try{let e=new URLSearchParams;v&&e.set("start",v),T&&e.set("end",T),x&&e.set("category",x),j&&e.set("subservice",j);let t=await (0,o.authFetch)(`/api/admin/finance/summary?${e.toString()}`),s=await t.json();if(!t.ok||s.error)throw Error(s.error||"Failed to load summary");g(s.summary)}catch(t){e({title:"Load failed",description:String(t),variant:"destructive"})}finally{_(!1)}};(0,s.useEffect)(()=>{b()},[]);let E=e=>`â‚¦${Number(e??0).toLocaleString(void 0,{maximumFractionDigits:2})}`;return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{children:"Finance Summary"})}),(0,t.jsxs)(a.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Start Date"}),(0,t.jsx)(l.Input,{type:"date",className:"mt-2",value:v,onChange:e=>p(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"End Date"}),(0,t.jsx)(l.Input,{type:"date",className:"mt-2",value:T,onChange:e=>f(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Category"}),(0,t.jsxs)(c.Select,{value:x,onValueChange:e=>m("__ALL__"===e?"":e),children:[(0,t.jsx)(c.SelectTrigger,{className:"mt-2",children:(0,t.jsx)(c.SelectValue,{placeholder:"All categories"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"__ALL__",children:"All"}),y.map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{children:"Subservice"}),(0,t.jsxs)(c.Select,{value:j,onValueChange:e=>S("__ALL__"===e?"":e),disabled:!x,children:[(0,t.jsx)(c.SelectTrigger,{className:"mt-2",children:(0,t.jsx)(c.SelectValue,{placeholder:"All subservices"})}),(0,t.jsxs)(c.SelectContent,{children:[(0,t.jsx)(c.SelectItem,{value:"__ALL__",children:"All"}),N.map(e=>(0,t.jsx)(c.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,t.jsx)("div",{className:"flex gap-3",children:(0,t.jsx)(r.Button,{onClick:b,disabled:A,children:A?"Loading...":"Apply Filters"})}),C&&(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Total Revenue"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:E(C.totalRevenue)})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Total Cost"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:E(C.totalCost)})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Total Profit"})}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:E(C.totalProfit)}),(0,t.jsx)(d.Badge,{className:"mt-2",variant:C.totalProfit>=0?"default":"destructive",children:C.totalProfit>=0?"Profit":"Loss"})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)(a.CardTitle,{className:"text-sm",children:"Transactions"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:C.count})})]})]})]})]})})}e.s(["default",()=>u])}]);