(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,750769,e=>{"use strict";var t=e.i(271645),i=e.i(692659);function r(e){try{let t=String(e?.role||"").toLowerCase(),i=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return t.includes("marketer")||i.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function a(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let t=await e.json().catch(()=>null);return r(t?.user||t)}catch{return"user"}}function s(e,s,n,l,c){let[o,d]=(0,t.useState)(()=>r(c)),[u,m]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[x,y]=(0,t.useState)(null),[f,g]=(0,t.useState)(void 0),v=(0,t.useMemo)(()=>({category:String(e||"").trim(),subservice:String(s||"").trim(),variant:String(n||"").trim()}),[e,s,n]),j=(0,t.useMemo)(()=>{if(!l||"object"!=typeof l)return"";let e=Object.entries(l).filter(([e,t])=>null!=t);return e.length?(e.sort(([e],[t])=>e.localeCompare(t)),e.map(([e,t])=>`${e}=${String(t)}`).join("|")):""},[l]);return(0,t.useEffect)(()=>{let e=!1;return(async()=>{p(!0),y(null);try{let t=c?r(c):await a();e||d(t);let i=[["category",v.category],["subservice",v.subservice],["variant",v.variant],["role",t]];if(l&&"object"==typeof l){let e=Object.entries(l).filter(([e,t])=>null!=t);for(let[t,r]of(e.sort(([e],[t])=>e.localeCompare(t)),e))i.push([t,String(r)])}let s=new URLSearchParams(i),n=await fetch(`/api/pricing?${s.toString()}`,{cache:"no-store"}),o=await n.json().catch(()=>null);if(!n.ok)throw Error(String(o?.error||"Failed to load pricing"));let u=o?.price;m("number"==typeof u?u:null)}catch(e){y(e?.message||"Failed to fetch pricing"),m(null)}finally{e||p(!1)}})(),()=>{e=!0}},[v.category,v.subservice,v.variant,j,c]),{price:u,isLoading:h,error:x,reference:f,submitService:(0,t.useCallback)(async e=>{try{let t={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:v.variant||void 0,action:function(e,t){let i=e.trim().toLowerCase(),r=t.trim().toLowerCase();if("nin"===i){if("slip"===r)return"nin.slip";if("printout"===r)return"nin.printout";if("advanced"===r||"verification"===r)return"nin.advanced"}if("bvn"===i){if("printout"===r)return"bvn.printout";if("retrieval"===r||"retrieval_phone"===r)return"bvn.retrieval_phone";if("advanced"===r||"verification"===r)return"bvn.advanced"}if("cac"===i){if("info"===r)return"cac.info";if("status"===r)return"cac.status"}return"passport"===i&&("verify"===r||"verification"===r||"basic"===r)?"passport.verify":"phone"===i&&("advanced"===r||"verification"===r||"basic"===r)?"phone.verify_advanced":("driver-license"===i||"drivers_license"===i)&&("basic"===r||"verification"===r)?"drivers_license.verify":("voters-card"===i||"voters"===i)&&("basic"===r||"full"===r||"verification"===r)?"voters.verify":("plate-number"===i||"plate"===i)&&("basic"===r||"verification"===r)?"plate.verify":"tin"===i&&("basic"===r||"certificate"===r||"verification"===r)?"tin.verify":null}(v.category,v.subservice)||void 0,pin:e.pin},r=await (0,i.authFetch)(`/api/service/${encodeURIComponent(v.category)}/${encodeURIComponent(v.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),a=await r.json().catch(()=>null);if(!r.ok)return{ok:!1,error:String(a?.error||`Service failed (${r.status})`),message:String(a?.message||"Failed"),data:a};return g(String(a?.reference||"")),{ok:!0,reference:String(a?.reference||""),message:String(a?.message||""),data:a}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[v.category,v.subservice,v.variant])}}e.s(["default",0,s,"useDynamicPricing",()=>s])},330843,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(630374),a=e.i(167881),s=e.i(23750),n=e.i(10708),l=e.i(846696);function c({isOpen:e,onClose:c,onConfirm:o,isLoading:d}){let[u,m]=(0,i.useState)(""),h=()=>{4!==u.length?l.toast.error("Please enter a 4-digit PIN"):(o(u),m(""))};return(0,t.jsx)(r.Dialog,{open:e,onOpenChange:e=>!e&&c(),children:(0,t.jsxs)(r.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Enter Transaction PIN"}),(0,t.jsx)(r.DialogDescription,{children:"Please enter your 4-digit transaction PIN to authorize this request."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"pin",className:"text-center block",children:"PIN"}),(0,t.jsx)(s.Input,{id:"pin",type:"password",inputMode:"numeric",maxLength:4,value:u,onChange:e=>m(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-[1em]",placeholder:"â€¢â€¢â€¢â€¢",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&h()}})]})}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:c,disabled:d,children:"Cancel"}),(0,t.jsx)(a.Button,{onClick:h,disabled:d||4!==u.length,className:"bg-[#3457D5]",children:d?"Verifying...":"Confirm PIN"})]})]})})}e.s(["PinPrompt",()=>c])},440160,e=>{"use strict";let t=(0,e.i(475254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],440160)},410160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},201928,e=>{"use strict";let t=(0,e.i(475254).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);e.s(["ShoppingCart",()=>t],201928)},307385,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(750769),a=e.i(846932),s=e.i(970065),n=e.i(167881),l=e.i(23750),c=e.i(10708),o=e.i(62870),d=e.i(120682),u=e.i(440160),m=e.i(32095),h=e.i(201928),p=e.i(330843),x=e.i(255749);function y(){let[e,y]=(0,i.useState)(""),[f,g]=(0,i.useState)(1),[v,j]=(0,i.useState)(""),[b,S]=(0,i.useState)(""),[N,C]=(0,i.useState)(0),[P,w]=(0,i.useState)(!1),[T,F]=(0,i.useState)(!1),[D,k]=(0,i.useState)(""),[B,I]=(0,i.useState)(!1),[E,A]=(0,i.useState)(null),{toast:L}=(0,d.useToast)(),{price:$,isLoading:R,error:O,submitService:q}=(0,r.default)("education","nabteb",e?({"NABTEB Pin":"nabteb-pin","GCE Registration Pin":"gce-registration-pin"})[e]||e.toLowerCase().replace(/[^a-z0-9]+/g,"."):"");(0,i.useEffect)(()=>{e&&"number"==typeof $?C(Number($)):C(0)},[e,$]);let U=N*(0===f?Number.parseInt(v)||1:f),z=async t=>{t.preventDefault(),w(!0);let i=0===f?Number.parseInt(v)||1:f;try{A({amount:U,eduType:e,quantity:i,candidateName:b}),I(!0)}finally{w(!1)}},M=async t=>{I(!1),w(!0);try{if(!e)throw Error("Please select a service type");if("number"!=typeof $)throw Error("Live pricing unavailable. Please try again.");let i=await q({...E,pin:t});if(!i.ok)throw Error(i?.error||i?.message||"Failed to process request");k(i.reference||`NABTEB-${Date.now()}`),F(!0),L({title:"Success!",description:`Your NABTEB Pin(s) have been generated successfully${i.reference?` with reference: ${i.reference}`:""}.`})}catch(e){L({title:"NABTEB Pin Purchase Failed",description:e?.message||e?.error||"Failed to process request. Please try again.",variant:"destructive"})}finally{w(!1)}};return T?(0,t.jsx)("div",{className:"min-h-screen bg-[#F9F7F3] p-6",children:(0,t.jsx)(a.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-2xl mx-auto",children:(0,t.jsxs)(s.Card,{className:"border-[#3457D5]",children:[(0,t.jsx)(s.CardHeader,{className:"bg-[#3457D5] text-white",children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(m.GraduationCap,{className:"h-6 w-6"}),"Purchase Successful!"]})}),(0,t.jsxs)(s.CardContent,{className:"pt-6 space-y-4",children:[(0,t.jsx)("p",{className:"text-lg",children:"Your NABTEB Pin(s) have been generated successfully."}),(0,t.jsxs)("div",{className:"bg-[#CCCCFF]/20 p-4 rounded-lg space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Reference ID:"})," ",D]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Quantity:"})," ",0===f?v:f]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total Paid:"})," â‚¦",U.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(n.Button,{onClick:()=>{let t=new x.default,i=0===f?Number.parseInt(v)||1:f;t.setFillColor(52,87,213),t.rect(0,0,210,40,"F"),t.setTextColor(255,255,255),t.setFontSize(24),t.text("UFriends Information Technology",105,20,{align:"center"}),t.setFontSize(14),t.text("Education Pin Purchase Confirmation",105,30,{align:"center"}),t.setTextColor(0,0,0),t.setFontSize(12),t.text(`Service Type: ${e}`,20,60),t.text(`Candidate Name: ${b||"N/A"}`,20,70),t.text(`Quantity: ${i}`,20,80),t.text(`Price per Unit: â‚¦${N.toLocaleString()}`,20,90),t.text(`Total Paid: â‚¦${U.toLocaleString()}`,20,100),t.text(`Reference ID: ${D}`,20,110),t.text(`Date: ${new Date().toLocaleString()}`,20,120),t.setFontSize(10),t.setTextColor(100,100,100),t.text("Generated by UFriends.com.ng â€” For Academic Use Only",105,280,{align:"center"}),t.save("NABTEB_Pin_Receipt.pdf")},className:"bg-[#3457D5] hover:bg-[#2a46aa]",children:[(0,t.jsx)(u.Download,{className:"mr-2 h-4 w-4"}),"Download Receipt"]}),(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>F(!1),children:"Make Another Purchase"})]})]})]})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-[#F9F7F3] p-6",children:[(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-[#3457D5] mb-2",children:"NABTEB Services"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Purchase NABTEB examination pins and scratch cards"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsx)(a.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.ShoppingCart,{className:"h-5 w-5 text-[#3457D5]"}),"Purchase NABTEB Pin"]}),(0,t.jsx)(s.CardDescription,{children:"Select service type and quantity"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"serviceType",children:"Service Type"}),(0,t.jsxs)(o.Select,{value:e,onValueChange:y,required:!0,children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select service type"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"NABTEB Pin",children:"NABTEB Pin / Scratch Card"}),(0,t.jsx)(o.SelectItem,{value:"GCE Registration Pin",children:"GCE Registration Pin"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"candidateName",children:"Candidate Name (Optional)"}),(0,t.jsx)(l.Input,{id:"candidateName",value:b,onChange:e=>S(e.target.value),placeholder:"Enter candidate name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"quantity",children:"Quantity"}),(0,t.jsxs)(o.Select,{value:f.toString(),onValueChange:e=>g(Number.parseInt(e)),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"1",children:"1"}),(0,t.jsx)(o.SelectItem,{value:"2",children:"2"}),(0,t.jsx)(o.SelectItem,{value:"3",children:"3"}),(0,t.jsx)(o.SelectItem,{value:"4",children:"4"}),(0,t.jsx)(o.SelectItem,{value:"5",children:"5"}),(0,t.jsx)(o.SelectItem,{value:"0",children:"Custom"})]})]})]}),0===f&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"customQuantity",children:"Custom Quantity"}),(0,t.jsx)(l.Input,{id:"customQuantity",type:"number",min:"1",value:v,onChange:e=>j(e.target.value),placeholder:"Enter quantity",required:!0})]}),e&&(0,t.jsx)("div",{className:"bg-[#CCCCFF]/20 p-4 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["ðŸ’° Price per unit: â‚¦",N.toLocaleString()," â€” Total: â‚¦",U.toLocaleString()]})}),(0,t.jsx)(n.Button,{type:"submit",disabled:P||!e,className:"w-full bg-[#3457D5] hover:bg-[#2a46aa]",children:P?"Processing...":"Purchase Now"})]})})]})}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:(0,t.jsxs)(s.Card,{className:"bg-gradient-to-br from-[#3457D5]/10 to-[#CCCCFF]/20",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-[#3457D5]",children:"About NABTEB Services"})}),(0,t.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"bg-[#3457D5] text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0",children:"1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-1",children:"Instant Delivery"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Get your pins immediately after purchase"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"bg-[#3457D5] text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0",children:"2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-1",children:"Secure Payment"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"All transactions are encrypted and secure"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"bg-[#3457D5] text-white rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0",children:"3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-1",children:"24/7 Support"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Our team is always ready to assist you"})]})]})]})]})})]})]}),(0,t.jsx)(p.PinPrompt,{isOpen:B,onClose:()=>I(!1),onConfirm:M,isLoading:P})]})}e.s(["default",()=>y])},48503,e=>{e.v(t=>Promise.all(["static/chunks/2988bfaf82a45b76.js"].map(t=>e.l(t))).then(()=>t(915833)))},870653,e=>{e.v(t=>Promise.all(["static/chunks/ea37f18959494c2b.js"].map(t=>e.l(t))).then(()=>t(424154)))},195111,e=>{e.v(t=>Promise.all(["static/chunks/e3feae42dbedb569.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);