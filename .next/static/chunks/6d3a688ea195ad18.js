(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,750769,e=>{"use strict";var t=e.i(271645),a=e.i(692659);function r(e){try{let t=String(e?.role||"").toLowerCase(),a=Array.isArray(e?.roles)?e.roles.map(e=>String(e).toLowerCase()):[];return t.includes("marketer")||a.includes("marketer")||e?.isMarketer===!0?"marketer":"user"}catch{return"user"}}async function s(){try{let e=await fetch("/api/me");if(!e.ok)return"user";let t=await e.json().catch(()=>null);return r(t?.user||t)}catch{return"user"}}function i(e,i,n,l,o){let[c,d]=(0,t.useState)(()=>r(o)),[u,m]=(0,t.useState)(null),[x,h]=(0,t.useState)(!1),[p,g]=(0,t.useState)(null),[v,f]=(0,t.useState)(void 0),b=(0,t.useMemo)(()=>({category:String(e||"").trim(),subservice:String(i||"").trim(),variant:String(n||"").trim()}),[e,i,n]),y=(0,t.useMemo)(()=>{if(!l||"object"!=typeof l)return"";let e=Object.entries(l).filter(([e,t])=>null!=t);return e.length?(e.sort(([e],[t])=>e.localeCompare(t)),e.map(([e,t])=>`${e}=${String(t)}`).join("|")):""},[l]);return(0,t.useEffect)(()=>{let e=!1;return(async()=>{h(!0),g(null);try{let t=o?r(o):await s();e||d(t);let a=[["category",b.category],["subservice",b.subservice],["variant",b.variant],["role",t]];if(l&&"object"==typeof l){let e=Object.entries(l).filter(([e,t])=>null!=t);for(let[t,r]of(e.sort(([e],[t])=>e.localeCompare(t)),e))a.push([t,String(r)])}let i=new URLSearchParams(a),n=await fetch(`/api/pricing?${i.toString()}`,{cache:"no-store"}),c=await n.json().catch(()=>null);if(!n.ok)throw Error(String(c?.error||"Failed to load pricing"));let u=c?.price;m("number"==typeof u?u:null)}catch(e){g(e?.message||"Failed to fetch pricing"),m(null)}finally{e||h(!1)}})(),()=>{e=!0}},[b.category,b.subservice,b.variant,y,o]),{price:u,isLoading:x,error:p,reference:v,submitService:(0,t.useCallback)(async e=>{try{let t={amount:Number(e.amount),idempotencyKey:"string"==typeof e.idempotencyKey?e.idempotencyKey:void 0,params:{...e||{}},subServiceId:b.variant||void 0,action:function(e,t){let a=e.trim().toLowerCase(),r=t.trim().toLowerCase();if("nin"===a){if("slip"===r)return"nin.slip";if("printout"===r)return"nin.printout";if("advanced"===r||"verification"===r)return"nin.advanced"}if("bvn"===a){if("printout"===r)return"bvn.printout";if("retrieval"===r||"retrieval_phone"===r)return"bvn.retrieval_phone";if("advanced"===r||"verification"===r)return"bvn.advanced"}if("cac"===a){if("info"===r)return"cac.info";if("status"===r)return"cac.status"}return"passport"===a&&("verify"===r||"verification"===r||"basic"===r)?"passport.verify":"phone"===a&&("advanced"===r||"verification"===r||"basic"===r)?"phone.verify_advanced":("driver-license"===a||"drivers_license"===a)&&("basic"===r||"verification"===r)?"drivers_license.verify":("voters-card"===a||"voters"===a)&&("basic"===r||"full"===r||"verification"===r)?"voters.verify":("plate-number"===a||"plate"===a)&&("basic"===r||"verification"===r)?"plate.verify":"tin"===a&&("basic"===r||"certificate"===r||"verification"===r)?"tin.verify":null}(b.category,b.subservice)||void 0,pin:e.pin},r=await (0,a.authFetch)(`/api/service/${encodeURIComponent(b.category)}/${encodeURIComponent(b.subservice)}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),s=await r.json().catch(()=>null);if(!r.ok)return{ok:!1,error:String(s?.error||`Service failed (${r.status})`),message:String(s?.message||"Failed"),data:s};return f(String(s?.reference||"")),{ok:!0,reference:String(s?.reference||""),message:String(s?.message||""),data:s}}catch(e){return{ok:!1,error:String(e?.message||e)}}},[b.category,b.subservice,b.variant])}}e.s(["default",0,i,"useDynamicPricing",()=>i])},330843,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(630374),s=e.i(167881),i=e.i(23750),n=e.i(10708),l=e.i(846696);function o({isOpen:e,onClose:o,onConfirm:c,isLoading:d}){let[u,m]=(0,a.useState)(""),x=()=>{4!==u.length?l.toast.error("Please enter a 4-digit PIN"):(c(u),m(""))};return(0,t.jsx)(r.Dialog,{open:e,onOpenChange:e=>!e&&o(),children:(0,t.jsxs)(r.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Enter Transaction PIN"}),(0,t.jsx)(r.DialogDescription,{children:"Please enter your 4-digit transaction PIN to authorize this request."})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"pin",className:"text-center block",children:"PIN"}),(0,t.jsx)(i.Input,{id:"pin",type:"password",inputMode:"numeric",maxLength:4,value:u,onChange:e=>m(e.target.value.replace(/\D/g,"")),className:"text-center text-2xl tracking-[1em]",placeholder:"••••",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&x()}})]})}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(s.Button,{variant:"outline",onClick:o,disabled:d,children:"Cancel"}),(0,t.jsx)(s.Button,{onClick:x,disabled:d||4!==u.length,className:"bg-[#3457D5]",children:d?"Verifying...":"Confirm PIN"})]})]})})}e.s(["PinPrompt",()=>o])},929054,e=>{"use strict";function t(e,a,r="Error"){a({title:r,description:e.error||e.message||"An unexpected error occurred",variant:"destructive"})}e.s(["handleServiceError",()=>t])},440160,e=>{"use strict";let t=(0,e.i(475254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],440160)},286536,e=>{"use strict";let t=(0,e.i(475254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],286536)},625959,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(820783),s=e.i(30030),i=e.i(981140),n=e.i(369340),l=e.i(999682),o=e.i(635804),c=e.i(296626),d=e.i(248425),u="Checkbox",[m,x]=(0,s.createContextScope)(u),[h,p]=m(u);function g(e){let{__scopeCheckbox:r,checked:s,children:i,defaultChecked:l,disabled:o,form:c,name:d,onCheckedChange:m,required:x,value:p="on",internal_do_not_use_render:g}=e,[v,f]=(0,n.useControllableState)({prop:s,defaultProp:l??!1,onChange:m,caller:u}),[b,y]=a.useState(null),[j,N]=a.useState(null),w=a.useRef(!1),S=!b||!!c||!!b.closest("form"),k={checked:v,disabled:o,setChecked:f,control:b,setControl:y,name:d,form:c,value:p,hasConsumerStoppedPropagationRef:w,required:x,defaultChecked:!C(l)&&l,isFormControl:S,bubbleInput:j,setBubbleInput:N};return(0,t.jsx)(h,{scope:r,...k,children:"function"==typeof g?g(k):i})}var v="CheckboxTrigger",f=a.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:n,...l},o)=>{let{control:c,value:u,disabled:m,checked:x,required:h,setControl:g,setChecked:f,hasConsumerStoppedPropagationRef:b,isFormControl:y,bubbleInput:j}=p(v,e),N=(0,r.useComposedRefs)(o,g),w=a.useRef(x);return a.useEffect(()=>{let e=c?.form;if(e){let t=()=>f(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[c,f]),(0,t.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":C(x)?"mixed":x,"aria-required":h,"data-state":S(x),"data-disabled":m?"":void 0,disabled:m,value:u,...l,ref:N,onKeyDown:(0,i.composeEventHandlers)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(n,e=>{f(e=>!!C(e)||!e),j&&y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});f.displayName=v;var b=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:s,checked:i,defaultChecked:n,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return(0,t.jsx)(g,{__scopeCheckbox:r,checked:i,defaultChecked:n,disabled:o,required:l,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{...m,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(w,{__scopeCheckbox:r})]})})});b.displayName=u;var y="CheckboxIndicator",j=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:s,...i}=e,n=p(y,r);return(0,t.jsx)(c.Presence,{present:s||C(n.checked)||!0===n.checked,children:(0,t.jsx)(d.Primitive.span,{"data-state":S(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});j.displayName=y;var N="CheckboxBubbleInput",w=a.forwardRef(({__scopeCheckbox:e,...s},i)=>{let{control:n,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:m,required:x,disabled:h,name:g,value:v,form:f,bubbleInput:b,setBubbleInput:y}=p(N,e),j=(0,r.useComposedRefs)(i,y),w=(0,l.usePrevious)(u),S=(0,o.useSize)(n);a.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!c.current;if(w!==u&&e){let a=new Event("click",{bubbles:t});b.indeterminate=C(u),e.call(b,!C(u)&&u),b.dispatchEvent(a)}},[b,w,u,c]);let k=a.useRef(!C(u)&&u);return(0,t.jsx)(d.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??k.current,required:x,disabled:h,name:g,value:v,form:f,...s,tabIndex:-1,ref:j,style:{...s.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function S(e){return C(e)?"indeterminate":e?"checked":"unchecked"}w.displayName=N;var k=e.i(643531),A=e.i(647163);function R({className:e,...a}){return(0,t.jsx)(b,{"data-slot":"checkbox",className:(0,A.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(j,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(k.Check,{className:"size-3.5"})})})}e.s(["Checkbox",()=>R],625959)},781947,e=>{"use strict";var t=e.i(843476),a=e.i(225913),r=e.i(647163);let s=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...i}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(s({variant:a}),e),...i})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}e.s(["Alert",()=>i,"AlertDescription",()=>l,"AlertTitle",()=>n])},16715,e=>{"use strict";let t=(0,e.i(475254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},802134,e=>{"use strict";let t="ufriends_bvn_android_requests",a="ufriends_android_app_link",r="ufriends_admin_audit_logs";e.s(["BVNStorage",0,{getRequests(){let e=localStorage.getItem(t);return e?JSON.parse(e):[]},saveRequests(e){localStorage.setItem(t,JSON.stringify(e))},addRequest(e){let t=this.getRequests(),a={...e,id:crypto.randomUUID(),status:"Pending",submittedAt:new Date().toISOString()};return t.push(a),this.saveRequests(t),a},updateRequest(e,t){let a=this.getRequests(),r=a.findIndex(t=>t.id===e);-1!==r&&(a[r]={...a[r],...t},this.saveRequests(a))},getUserRequests(e){return this.getRequests().filter(t=>t.userId===e)},getAppLink:()=>localStorage.getItem(a)||"",saveAppLink(e){localStorage.setItem(a,e)},getAuditLogs(){let e=localStorage.getItem(r);return e?JSON.parse(e):[]},addAuditLog(e){let t=this.getAuditLogs();t.push(e),localStorage.setItem(r,JSON.stringify(t))}}])},57963,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(846932),s=e.i(970065),i=e.i(167881),n=e.i(994179),l=e.i(23750),o=e.i(630374),c=e.i(826707),d=e.i(107233),u=e.i(286536),m=e.i(16715),x=e.i(440160),h=e.i(952571),p=e.i(802134),g=e.i(10708),v=e.i(625959),f=e.i(522016),b=e.i(750769);function y({onSubmit:e,onCancel:n,initialData:o,submitService:c,isSubmitting:d}){let[u,m]=(0,a.useState)({agentLocation:o?.agentLocation||"",bvn:o?.bvn||"",kegowAccountNo:o?.kegowAccountNo||"",accountName:o?.accountName||"",firstName:o?.firstName||"",lastName:o?.lastName||"",email:o?.email||"",phone:o?.phone||"",stateOfResidence:o?.stateOfResidence||"",address:o?.address||"",dob:o?.dob||"",lga:o?.lga||"",city:o?.city||"",addressState:o?.addressState||""}),[x,h]=(0,a.useState)({}),[p,y]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),w=(0,a.useMemo)(()=>String(u.stateOfResidence||"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")||"unknown",[u.stateOfResidence]),{price:C,isLoading:S,error:k}=(0,b.default)("bvn","android-license","enrollment",{state:w});return(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{children:[o?"Resubmit":"New"," BVN Android License Request"]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("form",{onSubmit:t=>{t.preventDefault();let a=(e=>{let t={};if(e.agentLocation?.trim()||(t.agentLocation="Agent location is required"),e.bvn?.trim()){let a;a=e.bvn,/^\d{11}$/.test(a)||(t.bvn="BVN must be exactly 11 digits")}else t.bvn="BVN is required";if(e.kegowAccountNo?.trim()){let a;a=e.kegowAccountNo,/^\d{10}$/.test(a)||(t.kegowAccountNo="Account number must be exactly 10 digits")}else t.kegowAccountNo="Kegow account number is required";if(e.accountName?.trim()||(t.accountName="Account name is required"),e.firstName?.trim()||(t.firstName="First name is required"),e.lastName?.trim()||(t.lastName="Last name is required"),e.email?.trim()){let a;a=e.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||(t.email="Invalid email format")}else t.email="Email is required";if(e.phone?.trim()){let a;a=e.phone,/^0\d{10}$/.test(a)||(t.phone="Phone must be 11 digits starting with 0")}else t.phone="Phone number is required";return e.stateOfResidence?.trim()||(t.stateOfResidence="State of residence is required"),e.address?.trim()||(t.address="Address is required"),e.dob?.trim()||(t.dob="Date of birth is required"),e.lga?.trim()||(t.lga="LGA is required"),e.city?.trim()||(t.city="City is required"),e.addressState?.trim()||(t.addressState="Address state is required"),t})(u);Object.keys(a).length>0?h(a):p&&j&&e(u)},className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"agentLocation",label:"Agent Location",type:"text"},{name:"bvn",label:"BVN (11 digits)",type:"text",maxLength:11},{name:"kegowAccountNo",label:"Kegow Account Number (10 digits)",type:"text",maxLength:10},{name:"accountName",label:"Account Name",type:"text"},{name:"firstName",label:"First Name",type:"text"},{name:"lastName",label:"Last Name",type:"text"},{name:"email",label:"Email Address",type:"email"},{name:"phone",label:"Phone Number (11 digits, starts with 0)",type:"tel",maxLength:11},{name:"stateOfResidence",label:"State of Residence",type:"text"},{name:"address",label:"Address",type:"text"},{name:"dob",label:"Date of Birth",type:"date"},{name:"lga",label:"LGA",type:"text"},{name:"city",label:"City",type:"text"},{name:"addressState",label:"Address State",type:"text"}].map(e=>(0,t.jsxs)("div",{className:"address"===e.name?"md:col-span-2":"",children:[(0,t.jsx)(g.Label,{htmlFor:e.name,children:e.label}),(0,t.jsx)(l.Input,{id:e.name,type:e.type,value:u[e.name],onChange:t=>{var a,r;return a=e.name,r=t.target.value,void(m(e=>({...e,[a]:r})),x[a]&&h(e=>({...e,[a]:""})))},maxLength:e.maxLength,className:x[e.name]?"border-red-500":""}),x[e.name]&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x[e.name]})]},e.name))}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Estimated Enrollment Price"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:S?"Loading...":null!=C?`₦${C}`:"—"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(v.Checkbox,{id:"consent",checked:p,onCheckedChange:e=>y(!0===e),className:"mt-1"}),(0,t.jsx)(g.Label,{htmlFor:"consent",className:"text-sm text-gray-700 cursor-pointer leading-relaxed",children:"By checking this box, you confirm the ID owner's consent for verification."})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(v.Checkbox,{id:"terms",checked:j,onCheckedChange:e=>N(!0===e),className:"mt-1"}),(0,t.jsxs)(g.Label,{htmlFor:"terms",className:"text-sm text-gray-700 cursor-pointer leading-relaxed",children:["I agree to the"," ",(0,t.jsx)(f.default,{href:"/terms",className:"text-primary hover:text-primary/80 underline",children:"Terms of Service"})," ","and"," ",(0,t.jsx)(f.default,{href:"/privacy",className:"text-primary hover:text-primary/80 underline",children:"Privacy Policy"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",className:"bg-primary hover:bg-primary/90",disabled:!p||!j||d,children:d?"Submitting...":"Submit Request"}),k&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-2",children:String(k)})]})]})})]})})}var j=e.i(781947),N=e.i(63209),w=e.i(269638);function C({request:e,onResubmit:a,onClose:l}){var o;let c=[{label:"Reference ID",value:e.id},{label:"Agent Location",value:e.agentLocation},{label:"BVN",value:e.bvn},{label:"Kegow Account Number",value:e.kegowAccountNo},{label:"Account Name",value:e.accountName},{label:"First Name",value:e.firstName},{label:"Last Name",value:e.lastName},{label:"Email",value:e.email},{label:"Phone",value:e.phone},{label:"State of Residence",value:e.stateOfResidence},{label:"Address",value:e.address},{label:"Date of Birth",value:new Date(e.dob).toLocaleDateString()},{label:"LGA",value:e.lga},{label:"City",value:e.city},{label:"Address State",value:e.addressState},{label:"Submitted At",value:new Date(e.submittedAt).toLocaleString()}];return e.reviewedAt&&c.push({label:"Reviewed At",value:new Date(e.reviewedAt).toLocaleString()},{label:"Reviewed By",value:e.reviewedBy||"N/A"}),(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(s.CardTitle,{children:"Request Details"}),(o=e.status,(0,t.jsx)(n.Badge,{className:{Pending:"bg-yellow-100 text-yellow-800 border-yellow-300",Approved:"bg-green-100 text-green-800 border-green-300",Rejected:"bg-red-100 text-red-800 border-red-300"}[o],children:o}))]})}),(0,t.jsxs)(s.CardContent,{className:"space-y-6",children:["Rejected"===e.status&&(0,t.jsxs)(j.Alert,{className:"border-red-300 bg-red-50",children:[(0,t.jsx)(N.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,t.jsxs)(j.AlertDescription,{className:"text-red-800",children:[(0,t.jsx)("strong",{children:"Rejection Reason:"})," ",e.rejectionReason||"No reason provided"]})]}),"Approved"===e.status&&(0,t.jsxs)(j.Alert,{className:"border-green-300 bg-green-50",children:[(0,t.jsx)(w.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)(j.AlertDescription,{className:"text-green-800",children:[(0,t.jsx)("strong",{children:"Request Approved!"})," Your BVN Android License enrollment has been approved."]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(e=>(0,t.jsxs)("div",{className:"Address"===e.label||"Reference ID"===e.label?"md:col-span-2":"",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.label}),(0,t.jsx)("div",{className:"font-medium mt-1",children:e.value})]},e.label))}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t",children:["Rejected"===e.status&&(0,t.jsxs)(i.Button,{onClick:()=>a(e),className:"bg-primary hover:bg-primary/90",children:[(0,t.jsx)(m.RefreshCw,{className:"w-4 h-4 mr-2"}),"Resubmit Request"]}),"Approved"===e.status&&(0,t.jsxs)(i.Button,{variant:"outline",children:[(0,t.jsx)(x.Download,{className:"w-4 h-4 mr-2"}),"Download Approval Slip (PDF)"]})]})]})]})})}var S=e.i(330843),k=e.i(929054),A=e.i(120682),R=e.i(334863);function L(){let[e,g]=(0,a.useState)([]),[v,f]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[w,L]=(0,a.useState)(!1),[D,q]=(0,a.useState)(null),[P,B]=(0,a.useState)(null),[E,I]=(0,a.useState)(""),[O,_]=(0,a.useState)(!1),[F,T]=(0,a.useState)(!1),[V,M]=(0,a.useState)(!1),[$,z]=(0,a.useState)(null),{price:K,isLoading:U,error:H,submitService:J}=(0,b.default)("bvn","android-license","enrollment"),{toast:G}=(0,A.useToast)();(0,a.useEffect)(()=>{Y(),_(!0)},[]);let Y=async()=>{g(p.BVNStorage.getUserRequests("u_001"));try{let e=await fetch("/api/admin/system-settings/bvn-android");if(e.ok){let t=await e.json();f(t.link||""),N(t.description||"")}}catch(e){console.error("Failed to load settings:",e)}},W=async e=>{M(!1),T(!0);try{let t=await J({...$,pin:e});if(!t.ok)return void(0,k.handleServiceError)(t,G,"Submission Failed");G({title:"Success",description:"Request submitted successfully!"}),L(!1),B(null),Y()}catch(e){G({title:"Submission Error",description:e.message||"An error occurred",variant:"destructive"})}finally{T(!1)}},X=e=>{B(e),q(null),L(!0)},Q=e.filter(e=>{if(!E)return!0;let t=E.toLowerCase();return e.bvn.includes(t)||e.accountName.toLowerCase().includes(t)||e.kegowAccountNo.includes(t)}),Z={total:e.length,pending:e.filter(e=>"Pending"===e.status).length,approved:e.filter(e=>"Approved"===e.status).length,rejected:e.filter(e=>"Rejected"===e.status).length};return(0,t.jsxs)("div",{className:"min-h-screen bg-background p-6",children:[(0,t.jsx)(R.Toaster,{}),(0,t.jsx)(o.Dialog,{open:O,onOpenChange:_,children:(0,t.jsx)(o.DialogContent,{className:"sm:max-w-md bg-[#F9F7F3]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4 p-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full border-2 border-[#3457D5] flex items-center justify-center bg-[#CCCCFF]/20",children:(0,t.jsx)(h.Info,{className:"h-8 w-8 text-[#3457D5]"})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Warning"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"By submitting a BVN Android License request, you confirm that you have obtained the necessary legal authority to process this personal data, and you assume full liability for unlawful access. The Company and its Data Protection Compliance Organization (DPCO) will cooperate fully with regulators in cases of misuse."}),(0,t.jsx)(i.Button,{onClick:()=>_(!1),className:"bg-[#3457D5] hover:bg-[#3457D5]/90 text-white px-8",children:"Close"})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"BVN Android License Enrollment"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Submit and track your BVN enrollment requests"})]}),(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsx)(s.Card,{className:"bg-blue-50 border border-blue-200 mb-6",children:(0,t.jsxs)(s.CardContent,{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-blue-800 flex items-center gap-2 mb-3",children:[(0,t.jsx)(c.Smartphone,{className:"w-5 h-5"}),"Android BVN Enrollment App"]}),v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3 whitespace-pre-wrap",children:j||"Download the official UFriends BVN Enrollment App for Android."}),(0,t.jsx)(i.Button,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:(0,t.jsxs)("a",{href:v,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(x.Download,{className:"w-4 h-4 mr-2"}),"Download App"]})})]}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"App download link will be available soon."})]})})}),e.length>0&&(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary",children:Z.total}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total"})]})}),(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:Z.pending}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})}),(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:Z.approved}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Approved"})]})}),(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Z.rejected}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rejected"})]})})]})}),w?(0,t.jsx)(y,{onSubmit:e=>{z({...e,amount:Number(K||0),category:"bvn",action:"android-license"}),M(!0)},onCancel:()=>{L(!1),B(null)},initialData:P||void 0,submitService:J,isSubmitting:F}):D?(0,t.jsx)(C,{request:D,onResubmit:X,onClose:()=>q(null)}):(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsx)(s.CardTitle,{children:"Your Requests"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[e.length>0&&(0,t.jsx)(l.Input,{placeholder:"Search by BVN, name, or account...",value:E,onChange:e=>I(e.target.value),className:"w-full md:w-64"}),(0,t.jsxs)(i.Button,{onClick:()=>L(!0),className:"bg-primary hover:bg-primary/90 whitespace-nowrap",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4 mr-2"}),"New Request"]})]})]})}),(0,t.jsx)(s.CardContent,{children:0===Q.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(c.Smartphone,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:0===e.length?"No requests yet":"No requests match your search"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:0===e.length?"You haven't submitted any BVN Android Enrollment requests yet.":"Try adjusting your search terms."}),0===e.length&&(0,t.jsxs)(i.Button,{onClick:()=>L(!0),className:"bg-primary hover:bg-primary/90",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4 mr-2"}),"Submit New Request"]})]}):(0,t.jsx)("div",{className:"space-y-4",children:Q.map((e,a)=>{var l;return(0,t.jsx)(r.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*a},children:(0,t.jsx)(s.Card,{className:"hover:shadow-md transition-shadow",children:(0,t.jsx)(s.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"font-mono text-sm text-muted-foreground",children:["#",e.id.slice(0,8)]}),(l=e.status,(0,t.jsx)(n.Badge,{className:{Pending:"bg-yellow-100 text-yellow-800 border-yellow-300",Approved:"bg-green-100 text-green-800 border-green-300",Rejected:"bg-red-100 text-red-800 border-red-300"}[l],children:l}))]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"BVN:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.bvn})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Account:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.kegowAccountNo})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"State:"})," ",(0,t.jsx)("span",{className:"font-medium",children:e.stateOfResidence})]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Submitted: ",new Date(e.submittedAt).toLocaleDateString()," at"," ",new Date(e.submittedAt).toLocaleTimeString()]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>q(e),children:[(0,t.jsx)(u.Eye,{className:"w-4 h-4 mr-2"}),"View Details"]}),"Rejected"===e.status&&(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"text-primary bg-transparent",onClick:()=>X(e),children:[(0,t.jsx)(m.RefreshCw,{className:"w-4 h-4 mr-2"}),"Resubmit"]})]})]})})})},e.id)})})})]})})]}),(0,t.jsx)(S.PinPrompt,{isOpen:V,onClose:()=>M(!1),onConfirm:W,isLoading:F})]})}e.s(["default",()=>L],57963)}]);