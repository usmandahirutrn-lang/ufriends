(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,249066,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(618566);function r(){(0,s.useRouter)();let[e,r]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[c,n]=(0,a.useState)(null),[d,o]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[p,b]=(0,a.useState)({category:"",subservice:"",variant:"",description:""});async function v(){try{l(!0);let e=d?`/api/service-catalog?category=${encodeURIComponent(d)}`:"/api/service-catalog",t=await fetch(e);if(!t.ok)throw Error(`Failed: ${t.status}`);let a=await t.json();r(a),n(null)}catch(e){n(e?.message||"Failed to load catalog")}finally{l(!1)}}(0,a.useEffect)(()=>{v()},[d]);let g=(0,a.useMemo)(()=>Array.from(new Set(e.map(e=>e.category))).sort(),[e]);function j(){m(!1)}async function f(){let t={category:p.category.trim(),subservice:p.subservice.trim(),variant:(p.variant||"").trim(),description:p.description?.trim()||void 0},a=x?`/api/admin/catalog/${x.id}`:"/api/admin/catalog",s=x?"PUT":"POST",r=await fetch(a,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)return void alert((await r.json().catch(()=>({}))).error||`Request failed (${r.status})`);j(),await v();try{window.dispatchEvent(new CustomEvent("ufriends_catalog_updated")),localStorage.setItem("ufriends_service_catalog",JSON.stringify(e))}catch{}}async function y(t){if(!confirm(`Delete ${t.category} / ${t.subservice} / ${t.variant||"(no variant)"}?`))return;let a=await fetch(`/api/admin/catalog/${t.id}`,{method:"DELETE"});if(!a.ok)return void alert((await a.json().catch(()=>({}))).error||`Delete failed (${a.status})`);await v();try{window.dispatchEvent(new CustomEvent("ufriends_catalog_updated")),localStorage.setItem("ufriends_service_catalog",JSON.stringify(e))}catch{}}return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Service Catalog"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("select",{className:"border rounded px-2 py-1",value:d,onChange:e=>o(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"All Categories"}),g.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",onClick:function(){h(null),b({category:"",subservice:"",variant:"",description:""}),m(!0)},children:"Add"})]})]}),i?(0,t.jsx)("div",{className:"space-y-2",children:[...Array(6)].map((e,a)=>(0,t.jsx)("div",{className:"h-10 bg-gray-100 animate-pulse rounded"},a))}):c?(0,t.jsx)("div",{className:"text-red-600",children:c}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("th",{className:"text-left p-2 border",children:"Category"}),(0,t.jsx)("th",{className:"text-left p-2 border",children:"Subservice"}),(0,t.jsx)("th",{className:"text-left p-2 border",children:"Variant"}),(0,t.jsx)("th",{className:"text-left p-2 border",children:"Description"}),(0,t.jsx)("th",{className:"text-left p-2 border",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"p-2 border",children:e.category}),(0,t.jsx)("td",{className:"p-2 border",children:e.subservice}),(0,t.jsx)("td",{className:"p-2 border",children:e.variant||""}),(0,t.jsx)("td",{className:"p-2 border",children:e.description||""}),(0,t.jsxs)("td",{className:"p-2 border",children:[(0,t.jsx)("button",{className:"text-blue-700 mr-3",onClick:()=>{h(e),b({category:e.category,subservice:e.subservice,variant:e.variant||"",description:e.description||""}),m(!0)},children:"Edit"}),(0,t.jsx)("button",{className:"text-red-700",onClick:()=>y(e),children:"Delete"})]})]},e.id))})]})}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white rounded shadow-lg p-4 w-[480px]",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-3",children:x?"Edit Entry":"New Entry"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Category"}),(0,t.jsx)("input",{className:"w-full border rounded px-2 py-1",value:p.category,onChange:e=>b({...p,category:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Subservice"}),(0,t.jsx)("input",{className:"w-full border rounded px-2 py-1",value:p.subservice,onChange:e=>b({...p,subservice:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Variant (optional)"}),(0,t.jsx)("input",{className:"w-full border rounded px-2 py-1",value:p.variant,onChange:e=>b({...p,variant:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm mb-1",children:"Description (optional)"}),(0,t.jsx)("textarea",{className:"w-full border rounded px-2 py-1",rows:3,value:p.description,onChange:e=>b({...p,description:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{className:"px-3 py-1 rounded border",onClick:j,children:"Cancel"}),(0,t.jsx)("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:f,children:"Save"})]})]})})]})}e.s(["default",()=>r])}]);