module.exports=[814747,(t,e,i)=>{e.exports=t.x("path",()=>require("path"))},522734,(t,e,i)=>{e.exports=t.x("fs",()=>require("fs"))},22689,t=>{"use strict";var e=t.i(762294),i=t.i(267010);async function a({userId:t,type:a,title:r,body:n,email:s}){try{let o=await e.prisma.notification.create({data:{userId:t,type:a,title:r,body:n}});if(s){let a=await e.prisma.user.findUnique({where:{id:t},select:{email:!0}});a?.email&&(0,i.sendEmail)({to:a.email,subject:s.subject,html:s.html,text:s.text||n})}return o}catch(t){return console.error("Failed to send notification:",t),null}}async function r({type:t,title:a,body:r,email:n}){try{let s=await e.prisma.user.findMany({where:{role:"ADMIN"},select:{id:!0,email:!0}});return await Promise.all(s.map(async s=>{let o=await e.prisma.notification.create({data:{userId:s.id,type:t,title:a,body:r}});return n&&(0,i.sendEmail)({to:s.email,subject:n.subject,html:n.html,text:n.text||r}),o}))}catch(t){return console.error("Failed to send admin notification:",t),null}}t.s(["sendAdminNotification",()=>r,"sendNotification",()=>a])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5fc60764._.js.map