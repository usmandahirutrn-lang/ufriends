module.exports=[971175,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(546893),h=a.i(887682),i=a.i(280281),j=a.i(588237),k=a.i(254161),l=a.i(970246),m=a.i(677050),n=a.i(781560),o=a.i(328790),p=a.i(167453),q=a.i(862722),r=a.i(104720),s=a.i(965733);function t(){var a;let t,u,[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("digital"),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)("current"),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)(null),[Z,$]=(0,c.useState)(null),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)("digital"),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(!0),an=(0,c.useRef)(null),[ao,ap]=(0,c.useState)(!1),[aq,ar]=(0,c.useState)(!1),[as,at]=(0,c.useState)([]),[au,av]=(0,c.useState)(""),aw=["firstName","lastName","nin","dateOfBirth","gender","issueDate","photo","qrCode"],ax=(0,c.useMemo)(()=>[...new Set(Array.from(aj.matchAll(/\{\{\s*([a-zA-Z0-9_\.]+)\s*\}\}/g)).map(a=>a[1]))],[aj]),ay=(0,c.useMemo)(()=>aw.filter(a=>!ax.includes(a)),[aw,ax]),az=(0,c.useMemo)(()=>ax.filter(a=>!aw.includes(a)),[aw,ax]),aA=(0,c.useMemo)(()=>[...new Set(Array.from(F.matchAll(/\{\{\s*([a-zA-Z0-9_\.]+)\s*\}\}/g)).map(a=>`{{${a[1]}}}`))],[F]),aB=(0,c.useMemo)(()=>_&&x.find(a=>a.isActive&&a.type===_)||null,[x,_]),aC=async()=>{w(!0);try{let a=new URLSearchParams;z&&"all"!==z&&a.set("type",z),a.set("pageSize","50");let b=await (0,m.authFetch)(`/api/admin/nin-templates?${a.toString()}`);if(401===b.status){(0,l.toast)({title:"Unauthorized",description:"Please log in as admin.",variant:"destructive"}),w(!1);return}let c=await b.json();y(c.templates||[])}catch(a){(0,l.toast)({title:"Failed to load templates",description:String(a),variant:"destructive"})}finally{w(!1)}};(0,c.useEffect)(()=>{aC()},[z]);let aD=async()=>{if(!B||!F)return void(0,l.toast)({title:"Missing fields",description:"Name and content are required.",variant:"destructive"});w(!0);try{let a=await (0,m.authFetch)("/api/admin/nin-templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,type:D,templateContent:F,placeholders:aA,isActive:H})});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b.error||`Failed: ${a.status}`)}(0,l.toast)({title:"Template created",description:B}),C(""),G(""),I(!0),E("digital"),await aC()}catch(a){(0,l.toast)({title:"Create failed",description:String(a),variant:"destructive"})}finally{w(!1)}},aE=a=>{let b={firstName:"John",middleName:"A.",lastName:"Doe",nin:"12345678901",dateOfBirth:"1990-01-01",gender:"MALE",issueDate:new Date().toISOString().slice(0,10),photo:"/placeholder.jpg",qrCode:"SAMPLE-QR-CODE"},c=a.templateContent;for(let a of Object.keys(b)){let d=RegExp(`\\{\\{\\s*${a}\\s*\\}\\}`,"g");c=c.replace(d,b[a])}return aF(c)},aF=a=>a?a.replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gim,"").replace(/<iframe\b[^>]*>([\s\S]*?)<\/iframe>/gim,"").replace(/\bon\w+="[^"]*"/gim,"").replace(/\bon\w+='[^']*'/gim,"").replace(/\bjavascript:[^"']+/gim,""):"",aG=()=>{O(!0),Q(""),S("current"),W(null),Y(null),$(null)},aH=async()=>{if(!P)return void W("Enter a transaction reference");U(!0),W(null);try{let a=await (0,m.authFetch)(`/api/admin/service/logs/${encodeURIComponent(P)}`),b=await a.json();if(!a.ok||!b?.ok)throw Error(b?.error||`Failed (${a.status})`);let c=b.transaction?.meta||{};Y(c?.verificationData||null),$(c?.slipData||null),aa(c?.templateType||null),c?.verificationData||c?.slipData||W("No verification or slip data found on transaction")}catch(a){W(String(a?.message||a))}finally{U(!1)}},aI=async()=>{ar(!0);try{let a=new URLSearchParams;au&&a.set("prefix",au);let b=await (0,m.authFetch)(`/api/admin/assets?${a.toString()}`),c=await b.json();if(!b.ok||!c?.ok)throw Error(c?.error||`Failed (${b.status})`);at((c.files||[]).map(a=>({name:a.name,url:a.url,path:a.path})))}catch(a){(0,l.toast)({title:"Failed to load assets",description:String(a),variant:"destructive"})}finally{ar(!1)}},aJ=async()=>{if(ad){w(!0);try{let a=Array.from(aj.matchAll(/\{\{\s*([a-zA-Z0-9_\.]+)\s*\}\}/g)).map(a=>`{{${a[1]}}}`),b=[...new Set(a)],c=await (0,m.authFetch)(`/api/admin/nin-templates/${ad}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:af,type:ah,templateContent:aj,isActive:al,placeholders:b})});if(!c.ok){let a=await c.json().catch(()=>({}));throw Error(a.error||`Failed: ${c.status}`)}(0,l.toast)({title:"Template updated",description:af}),ac(!1),ae(null),await aC()}catch(a){(0,l.toast)({title:"Update failed",description:String(a),variant:"destructive"})}finally{w(!1)}}},aK=async a=>{try{let b=await (0,m.authFetch)(`/api/admin/nin-templates/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!a.isActive})});if(!b.ok)throw Error(`Failed: ${b.status}`);await aC()}catch(a){(0,l.toast)({title:"Update failed",description:String(a),variant:"destructive"})}},aL=async a=>{if(confirm(`Delete template "${a.name}"?`))try{let b=await (0,m.authFetch)(`/api/admin/nin-templates/${a.id}`,{method:"DELETE"});if(!b.ok)throw Error(`Failed: ${b.status}`);await aC()}catch(a){(0,l.toast)({title:"Delete failed",description:String(a),variant:"destructive"})}},aM=async a=>{w(!0);try{let b=Array.from(a.templateContent.matchAll(/\{\{\s*([a-zA-Z0-9_\.]+)\s*\}\}/g)).map(a=>`{{${a[1]}}}`),c=[...new Set(b)],d={name:`Copy of ${a.name}`,type:a.type,templateContent:a.templateContent,isActive:!1,placeholders:c},e=await (0,m.authFetch)("/api/admin/nin-templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!e.ok){let a=await e.json().catch(()=>({}));throw Error(a.error||`Failed: ${e.status}`)}(0,l.toast)({title:"Template duplicated",description:d.name}),await aC()}catch(a){(0,l.toast)({title:"Duplicate failed",description:String(a),variant:"destructive"})}finally{w(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(r.FileText,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"NIN Templates"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage templates used for NIN slip PDF generation"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Create Template"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Name"}),(0,b.jsx)(f.Input,{value:B,onChange:a=>C(a.target.value),placeholder:"e.g., Digital Slip v1"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Type"}),(0,b.jsxs)(h.Select,{value:D,onValueChange:a=>E(a),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"digital",children:"Digital"}),(0,b.jsx)(h.SelectItem,{value:"physical",children:"Physical"}),(0,b.jsx)(h.SelectItem,{value:"nims",children:"NIMS"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Template Content (HTML)"}),(0,b.jsx)(g.Textarea,{rows:8,value:F,onChange:a=>G(a.target.value),placeholder:"HTML with placeholders like {{firstName}}, {{lastName}}, {{nin}}"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,b.jsx)(i.Switch,{checked:H,onCheckedChange:I}),(0,b.jsx)("span",{className:"text-sm",children:"Active"})]}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-muted-foreground",children:["Detected placeholders: ",aA.join(", ")||"<none>"]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(e.Button,{onClick:aD,disabled:v,children:"Create Template"})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.CardTitle,{children:"Templates"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(h.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-40",children:(0,b.jsx)(h.SelectValue,{placeholder:"Filter type"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(h.SelectItem,{value:"digital",children:"Digital"}),(0,b.jsx)(h.SelectItem,{value:"physical",children:"Physical"}),(0,b.jsx)(h.SelectItem,{value:"nims",children:"NIMS"})]})]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:aC,disabled:v,children:[(0,b.jsx)(o.RefreshCcw,{className:"h-4 w-4 mr-2"})," Refresh"]})]})]})}),(0,b.jsxs)(d.CardContent,{children:[L&&(0,b.jsxs)("div",{className:"border rounded-md p-3 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:"Template Preview"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>M(!1),children:"Close"})]}),(0,b.jsx)("div",{className:"bg-white border rounded p-4 overflow-auto",style:{maxHeight:500},children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:J}})}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Note: Images must exist in `public/`. Placeholders are filled with sample data."})]}),(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Name"}),(0,b.jsx)(j.TableHead,{children:"Type"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{children:"Placeholders"}),(0,b.jsx)(j.TableHead,{children:"Updated"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsxs)(j.TableBody,{children:[x.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(j.TableCell,{className:"capitalize",children:a.type}),(0,b.jsx)(j.TableCell,{children:a.isActive?(0,b.jsxs)(k.Badge,{className:"bg-green-600 text-white",children:[(0,b.jsx)(p.CheckCircle2,{className:"h-3 w-3 mr-1"})," Active"]}):(0,b.jsxs)(k.Badge,{variant:"destructive",children:[(0,b.jsx)(q.XCircle,{className:"h-3 w-3 mr-1"})," Inactive"]})}),(0,b.jsx)(j.TableCell,{className:"text-xs",children:a.placeholders?.join(", ")||"<none>"}),(0,b.jsx)(j.TableCell,{className:"text-xs",children:new Date(a.updatedAt).toLocaleString()}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"secondary",size:"sm",onClick:()=>{ae(a.id),ag(a.name),ai(a.type),ak(a.templateContent),am(a.isActive),ac(!0)},children:"Edit"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>aM(a),children:"Duplicate"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{K(aE(a)),M(!0)},children:"Preview"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:aG,children:"Real Preview"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>aK(a),children:a.isActive?"Deactivate":"Activate"}),(0,b.jsx)(e.Button,{variant:"destructive",size:"sm",onClick:()=>aL(a),children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4"})})]})})]},a.id)),0===x.length&&(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:6,className:"text-center text-sm text-muted-foreground",children:"No templates found"})})]})]})]})]}),(0,b.jsx)(s.Dialog,{open:ab,onOpenChange:ac,children:(0,b.jsxs)(s.DialogContent,{className:"max-w-3xl",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{children:"Edit NIN Template"}),(0,b.jsx)(s.DialogDescription,{children:"Update template details and content. Placeholders auto-detect from HTML."})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Name"}),(0,b.jsx)(f.Input,{value:af,onChange:a=>ag(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Type"}),(0,b.jsxs)(h.Select,{value:ah,onValueChange:a=>ai(a),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"digital",children:"Digital"}),(0,b.jsx)(h.SelectItem,{value:"physical",children:"Physical"}),(0,b.jsx)(h.SelectItem,{value:"nims",children:"NIMS"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(i.Switch,{checked:al,onCheckedChange:am}),(0,b.jsx)("span",{className:"text-sm",children:"Active"})]}),(0,b.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Template Content (HTML)"}),(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,b.jsx)(g.Textarea,{ref:an,rows:8,value:aj,onChange:a=>ak(a.target.value)}),(0,b.jsxs)("div",{className:"border rounded p-3",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-2",children:"Placeholders"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["firstName","middleName","lastName","nin","dateOfBirth","gender","issueDate","photo","qrCode","phone","address","stateOfOrigin","lga","trackingId"].map(a=>(0,b.jsx)(e.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let b=an.current,c=`{{${a}}}`;if(b&&"number"==typeof b.selectionStart){let a=b.selectionStart,d=b.selectionEnd;ak(aj.slice(0,a)+c+aj.slice(d)),requestAnimationFrame(()=>{b.selectionStart=b.selectionEnd=a+c.length,b.focus()})}else ak(a=>a+c)},children:`{{${a}}}`},a))}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Input,{placeholder:"assets subfolder (optional)",value:au,onChange:a=>av(a.target.value)}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{ap(!0),aI()},children:"Assets"})]})})]})]})]}),(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Required placeholders: ",aw.join(", ")]}),ay.length>0&&(0,b.jsxs)("div",{className:"text-xs text-red-600",children:["Missing required placeholders: ",ay.join(", ")]}),az.length>0&&(0,b.jsxs)("div",{className:"text-xs text-amber-600",children:["Other detected placeholders: ",az.join(", ")]})]}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Detected placeholders: ",Array.from(aj.matchAll(/\{\{\s*([a-zA-Z0-9_\.]+)\s*\}\}/g)).map(a=>`{{${a[1]}}}`).filter((a,b,c)=>c.indexOf(a)===b).join(", ")||"<none>"]}),(0,b.jsxs)("div",{className:"mt-4 flex gap-2 justify-end",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>ac(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:aJ,disabled:v||!ad||ay.length>0,children:"Save Changes"})]}),(0,b.jsxs)("div",{className:"border rounded-md p-3 mt-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-2",children:"Live Preview (sample data)"}),(0,b.jsx)("div",{className:"bg-white border rounded p-4 overflow-auto",style:{maxHeight:300},children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:aE({id:ad||"",name:af,type:ah,templateContent:aj,placeholders:[],isActive:al,createdBy:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}})}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Images must exist in `public/`."})]})]})}),(0,b.jsx)(s.Dialog,{open:N,onOpenChange:O,children:(0,b.jsxs)(s.DialogContent,{className:"max-w-4xl",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{children:"Real Data Preview"}),(0,b.jsx)(s.DialogDescription,{children:"Render a template using actual verification/slip data from a transaction reference."})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Transaction Reference"}),(0,b.jsx)(f.Input,{value:P,onChange:a=>Q(a.target.value),placeholder:"e.g., NIN-169..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Preview Mode"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"current"===R?"default":"outline",size:"sm",onClick:()=>S("current"),children:"Use current template"}),(0,b.jsx)(e.Button,{variant:"stored"===R?"default":"outline",size:"sm",onClick:()=>S("stored"),children:"Use stored slip"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:aH,disabled:T,children:"Load"}),P&&(0,b.jsx)("a",{href:`/api/verification/nin-slip/${encodeURIComponent(P)}/pdf`,target:"_blank",rel:"noreferrer",className:"text-sm underline",children:"Open PDF endpoint"})]}),V&&(0,b.jsx)("div",{className:"text-sm text-red-600",children:V}),(0,b.jsxs)("div",{className:"border rounded-md p-3 mt-3",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-2",children:"Preview"}),(0,b.jsx)("div",{className:"bg-white border rounded p-4 overflow-auto",style:{maxHeight:400},children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:"stored"===R?aF(Z||"<div class='text-muted-foreground text-sm'>No stored slip HTML for this reference.</div>"):X?(a=aB?.templateContent||aj||F||"",t=a||"",Object.entries({"{{firstName}}":(u=(a=>{if(!a)return{};let b=a||{},c=b.result||b.data||b,d=c.firstName||c.firstname||c.first_name||c.givenNames||c.given_name||"",e=c.middleName||c.middlename||c.middle_name||c.otherNames||"",f=c.lastName||c.lastname||c.last_name||c.surname||"",g=c.nin||c.ninNumber||c.nin_number||c.trackingId||c.tracking_id||c.nimcNin||"",h=c.dateOfBirth||c.dob||c.birthDate||c.birth_date||"",i=(c.gender||c.sex||"").toString().toUpperCase(),j=c.phone||c.msisdn||c.telephone||"",k=c.address||c.residentialAddress||c.residential_address||c.homeAddress||"",l=c.stateOfOrigin||c.state_of_origin||c.state||"",m=c.lga||c.localGovt||c.local_government||"",n=c.trackingId||c.tracking_id||"",o=c.issueDate||c.issue_date||b.issueDate||"",p=c.photoUrl||c.photo||c.imageUrl||c.image||"",q=c.photoBase64||c.imageBase64||"",r=p||(q?`data:image/png;base64,${q}`:"")||"/placeholder.jpg",s=c.qrCode||c.qr||b.qrCode||"";return{firstName:d,middleName:e,lastName:f,nin:g,dateOfBirth:h,gender:i,phone:j,address:k,stateOfOrigin:l,lga:m,trackingId:n,issueDate:o||new Date().toISOString().slice(0,10),photo:r,qrCode:s}})(X)).firstName||"","{{lastName}}":u.lastName||"","{{middleName}}":u.middleName||"","{{nin}}":u.nin||"","{{dateOfBirth}}":u.dateOfBirth||"","{{gender}}":u.gender||"","{{phone}}":u.phone||"","{{address}}":u.address||"","{{photo}}":u.photo||"/placeholder.jpg","{{issueDate}}":u.issueDate||new Date().toISOString().slice(0,10),"{{stateOfOrigin}}":u.stateOfOrigin||"","{{lga}}":u.lga||"","{{trackingId}}":u.trackingId||"","{{qrCode}}":u.qrCode||""}).forEach(([a,b])=>{t=t.replace(RegExp(a,"g"),String(b))}),aF(t)):"<div class='text-muted-foreground text-sm'>Load a reference to render with current template.</div>"}})}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:'Note: "Use current template" renders with the editor content; "Use stored slip" shows server-processed HTML if available.'})]})]})}),(0,b.jsx)(s.Dialog,{open:ao,onOpenChange:ap,children:(0,b.jsxs)(s.DialogContent,{className:"max-w-3xl",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{children:"Assets"}),(0,b.jsx)(s.DialogDescription,{children:"Select an image to insert into the template"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(f.Input,{className:"flex-1",placeholder:"assets subfolder (optional)",value:au,onChange:a=>av(a.target.value)}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:aI,disabled:aq,children:[(0,b.jsx)(o.RefreshCcw,{className:"h-4 w-4 mr-2"})," Refresh"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[as.map(a=>(0,b.jsxs)("div",{className:"border rounded p-2 flex flex-col gap-2",children:[(0,b.jsx)("img",{src:a.url,alt:a.name,className:"h-24 w-full object-cover rounded"}),(0,b.jsx)("div",{className:"text-xs truncate",title:a.name,children:a.name}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{let b=`<img src='${a.url}' alt='${a.name}' />`,c=an.current;if(c&&"number"==typeof c.selectionStart){let a=c.selectionStart,d=c.selectionEnd;ak(aj.slice(0,a)+b+aj.slice(d)),requestAnimationFrame(()=>{c.selectionStart=c.selectionEnd=a+b.length,c.focus()})}else ak(a=>a+b);ap(!1)},children:"Insert <img>"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{let b=`style="background-image: url('${a.url}');"`,c=an.current;if(c&&"number"==typeof c.selectionStart){let a=c.selectionStart,d=c.selectionEnd;ak(aj.slice(0,a)+b+aj.slice(d)),requestAnimationFrame(()=>{c.selectionStart=c.selectionEnd=a+b.length,c.focus()})}else ak(a=>a+b);ap(!1)},children:"Insert bg"})]})]},a.path)),0===as.length&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground col-span-full",children:"No assets found. Upload images in Admin â†’ Assets."})]})]})})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=app_admin_nin_templates_page_tsx_5c07fdc6._.js.map