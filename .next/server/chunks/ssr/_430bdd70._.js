module.exports=[703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},588237,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},781560,a=>{"use strict";let b=(0,a.i(170106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],781560)},838632,a=>{"use strict";let b=(0,a.i(170106).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);a.s(["Image",()=>b],838632)},970246,a=>{"use strict";a.i(572131);let b=0,c=new Map,d=a=>{if(c.has(a))return;let b=setTimeout(()=>{c.delete(a),g({type:"REMOVE_TOAST",toastId:a})},1e6);c.set(a,b)},e=[],f={toasts:[]};function g(a){f=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?d(c):a.toasts.forEach(a=>{d(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(f,a),e.forEach(a=>{a(f)})}function h({...a}){let c=(b=(b+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>g({type:"DISMISS_TOAST",toastId:c});return g({type:"ADD_TOAST",toast:{...a,id:c,open:!0,onOpenChange:a=>{a||d()}}}),{id:c,dismiss:d,update:a=>g({type:"UPDATE_TOAST",toast:{...a,id:c}})}}a.s(["toast",()=>h])},328790,a=>{"use strict";let b=(0,a.i(170106).default)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);a.s(["RefreshCcw",()=>b],328790)},932463,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(588237),h=a.i(254161),i=a.i(970246),j=a.i(677050),k=a.i(328790);let l=(0,a.i(170106).default)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var m=a.i(781560),n=a.i(838632);function o(){let[a,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),x=async()=>{o(!0);try{let a=new URLSearchParams;r&&a.set("prefix",r);let b=await (0,j.authFetch)(`/api/admin/assets?${a.toString()}`),c=await b.json();if(!b.ok||!c?.ok)throw Error(c?.error||`Failed (${b.status})`);q(c.files||[])}catch(a){(0,i.toast)({title:"Failed to list assets",description:String(a),variant:"destructive"})}finally{o(!1)}};(0,c.useEffect)(()=>{x()},[r]);let y=async()=>{if(!v)return void(0,i.toast)({title:"No file selected",variant:"destructive"});u(!0);try{let a=new FormData;a.set("file",v),r&&a.set("dir",r);let b=await (0,j.authFetch)("/api/admin/assets",{method:"POST",body:a}),c=await b.json();if(!b.ok||!c?.ok)throw Error(c?.error||`Failed (${b.status})`);(0,i.toast)({title:"Uploaded",description:c.file?.url||v.name}),w(null),await x()}catch(a){(0,i.toast)({title:"Upload failed",description:String(a),variant:"destructive"})}finally{u(!1)}},z=async a=>{if(confirm(`Delete ${a.name}?`))try{let b=await (0,j.authFetch)("/api/admin/assets",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a.path})}),c=await b.json();if(!b.ok||!c?.ok)throw Error(c?.error||`Failed (${b.status})`);await x()}catch(a){(0,i.toast)({title:"Delete failed",description:String(a),variant:"destructive"})}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(n.Image,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Assets"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Upload and manage images used by templates"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Upload"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Folder (optional)"}),(0,b.jsx)(f.Input,{placeholder:"e.g. templates/nin",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Select file"}),(0,b.jsx)(f.Input,{type:"file",accept:"image/*",onChange:a=>w(a.target.files?.[0]||null)})]}),(0,b.jsxs)("div",{className:"flex items-end gap-2",children:[(0,b.jsxs)(e.Button,{onClick:y,disabled:t,children:[(0,b.jsx)(l,{className:"h-4 w-4 mr-2"})," Upload"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:x,disabled:a,children:[(0,b.jsx)(k.RefreshCcw,{className:"h-4 w-4 mr-2"})," Refresh"]})]})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:["Uploaded files are saved under ",(0,b.jsxs)(h.Badge,{variant:"secondary",children:["/public/assets",r?`/${r}`:""]})," and served at ",(0,b.jsxs)(h.Badge,{variant:"secondary",children:["/assets",r?`/${r}`:"","/filename"]}),"."]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Files"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Preview"}),(0,b.jsx)(g.TableHead,{children:"Name"}),(0,b.jsx)(g.TableHead,{children:"Size"}),(0,b.jsx)(g.TableHead,{children:"Updated"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsxs)(g.TableBody,{children:[p.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:(0,b.jsx)("img",{src:a.url,alt:a.name,className:"h-10 w-10 object-cover rounded"})}),(0,b.jsx)(g.TableCell,{className:"font-medium",children:a.name}),(0,b.jsxs)(g.TableCell,{className:"text-xs",children:[(a.size/1024).toFixed(1)," KB"]}),(0,b.jsx)(g.TableCell,{className:"text-xs",children:new Date(a.modifiedAt).toLocaleString()}),(0,b.jsx)(g.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noreferrer",className:"text-sm underline",children:"Open"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>navigator.clipboard.writeText(a.url),children:"Copy URL"}),(0,b.jsx)(e.Button,{variant:"destructive",size:"sm",onClick:()=>z(a),children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4"})})]})})]},a.path)),0===p.length&&(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:5,className:"text-center text-sm text-muted-foreground",children:"No files"})})]})]})})]})]})}a.s(["default",()=>o],932463)}];

//# sourceMappingURL=_430bdd70._.js.map