module.exports=[14002,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(917171),h=a.i(254161),i=a.i(965733),j=a.i(277687),k=a.i(177156),l=a.i(816201),m=a.i(862722),n=a.i(790166),o=a.i(724669),p=a.i(660246);function q(){let{toast:a}=(0,j.useToast)(),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)("credit"),[A,B]=(0,c.useState)("");(0,c.useEffect)(()=>{C()},[]);let C=async()=>{try{let a=await fetch("/api/admin/marketers");if(a.ok){let b=await a.json();r(b)}}catch(a){console.error("Failed to load marketers",a)}},D=async(b,c,d)=>{try{if((await fetch("/api/admin/marketers/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:b,marketerId:c,amount:d})})).ok)return C(),a({title:"Success",description:`Marketer ${b} successful`}),!0;throw Error("Action failed")}catch(b){return a({title:"Error",description:"Operation failed",variant:"destructive"}),!1}},E=(a,b)=>{t(a),z(b),x(!0)},F=async()=>{if(!s||!A)return;let a=Number.parseFloat(A);await D(y,s.id,a)&&(x(!1),B(""))},G=q.length,H=q.filter(a=>"approved"===a.status).length,I=q.filter(a=>"pending"===a.status).length;return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Marketer Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage UFriends marketer requests and track their performance"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(p.Users,{className:"w-4 h-4"}),"Total Requests"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:G})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(l.CheckCircle,{className:"w-4 h-4"}),"Approved"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:H})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(o.TrendingUp,{className:"w-4 h-4"}),"Pending"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:I})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)(d.CardTitle,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[(0,b.jsx)(n.DollarSign,{className:"w-4 h-4"}),"Total Balance"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold text-[#3457D5]",children:["₦",q.reduce((a,b)=>a+(b.withdrawableBalance||0),0).toLocaleString()]})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"All Marketer Requests"}),(0,b.jsx)(d.CardDescription,{children:"View and manage all marketer registration requests"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:0===q.length?(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No marketer requests found"}):q.map(a=>{var c;return(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.fullName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.email}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.phone})]}),(0,b.jsxs)("div",{className:"text-right",children:[(c=a.status,(0,b.jsx)(h.Badge,{variant:{approved:"default",pending:"secondary",rejected:"destructive"}[c]||"default",children:c})),a.marketerId&&(0,b.jsx)(h.Badge,{className:"ml-2 bg-[#3457D5]",children:a.marketerId})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"State"}),(0,b.jsx)("p",{className:"font-medium",children:a.state})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Marketing Type"}),(0,b.jsx)("p",{className:"font-medium",children:a.marketingType.join(", ")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Balance"}),(0,b.jsxs)("p",{className:"font-medium",children:["₦",(a.withdrawableBalance||0).toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Requested"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(a.createdAt).toLocaleDateString()})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:()=>{t(a),v(!0)},children:[(0,b.jsx)(k.Eye,{className:"w-4 h-4 mr-1"}),"View Details"]}),"pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>D("approve",a.id),children:[(0,b.jsx)(l.CheckCircle,{className:"w-4 h-4 mr-1"}),"Approve"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:()=>D("reject",a.id),children:[(0,b.jsx)(m.XCircle,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),"approved"===a.status&&"suspended"!==a.marketerStatus&&(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:()=>D("suspend",a.id),children:[(0,b.jsx)(m.XCircle,{className:"w-4 h-4 mr-1"}),"Suspend"]}),(0,b.jsxs)(e.Button,{size:"sm",className:"bg-[#3457D5] hover:bg-[#2a46b0]",onClick:()=>E(a,"credit"),children:[(0,b.jsx)(n.DollarSign,{className:"w-4 h-4 mr-1"}),"Credit"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:()=>E(a,"debit"),children:[(0,b.jsx)(n.DollarSign,{className:"w-4 h-4 mr-1"}),"Debit"]})]})]},a.id)})})})]}),(0,b.jsx)(i.Dialog,{open:u,onOpenChange:v,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Marketer Request Details"}),(0,b.jsx)(i.DialogDescription,{children:"Complete information about the marketer request"})]}),s&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Full Name"}),(0,b.jsx)("p",{className:"font-medium",children:s.fullName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Status"}),(0,b.jsx)("p",{className:"font-medium capitalize",children:s.status})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Phone"}),(0,b.jsx)("p",{className:"font-medium",children:s.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Email"}),(0,b.jsx)("p",{className:"font-medium",children:s.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"State"}),(0,b.jsx)("p",{className:"font-medium",children:s.state})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"LGA"}),(0,b.jsx)("p",{className:"font-medium",children:s.lga})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Marketing Types"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:s.marketingType.map(a=>(0,b.jsx)(h.Badge,{variant:"outline",children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Documents"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-2 mt-2",children:[(0,b.jsx)("a",{href:s.passportUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Passport Photo"}),(0,b.jsx)("a",{href:s.validIdUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Valid ID"})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Account Details"}),(0,b.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Withdrawable Balance:"}),(0,b.jsxs)("span",{className:"font-semibold",children:["₦",(s.withdrawableBalance||0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Commission Earned:"}),(0,b.jsxs)("span",{className:"font-semibold",children:["₦",(s.commission||0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Total Sales:"}),(0,b.jsxs)("span",{className:"font-semibold",children:["₦",(s.totalSales||0).toLocaleString()]})]})]})]})]})]})}),(0,b.jsx)(i.Dialog,{open:w,onOpenChange:x,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsxs)(i.DialogTitle,{children:["credit"===y?"Credit":"Debit"," Balance"]}),(0,b.jsxs)(i.DialogDescription,{children:["credit"===y?"Add funds to":"Deduct funds from"," marketer's balance"]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[s&&(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Current Balance"}),(0,b.jsxs)("p",{className:"text-xl font-bold",children:["₦",(s.withdrawableBalance||0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"amount",children:"Amount (₦)"}),(0,b.jsx)(f.Input,{id:"amount",type:"number",value:A,onChange:a=>B(a.target.value),placeholder:"Enter amount"})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,b.jsxs)(e.Button,{className:"credit"===y?"bg-[#3457D5] hover:bg-[#2a46b0]":"",variant:"debit"===y?"destructive":"default",onClick:F,children:["credit"===y?"Credit":"Debit"," Balance"]})]})]})})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=app_admin_marketers_page_tsx_ab06de60._.js.map