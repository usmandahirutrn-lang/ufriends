{"version":3,"sources":["turbopack:///[project]/node_modules/lucide-react/src/icons/check-check.ts","turbopack:///[project]/app/dashboard/notifications/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CheckCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA3IDE3bC01LTUiIC8+CiAgPHBhdGggZD0ibTIyIDEwLTcuNSA3LjVMMTMgMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CheckCheck = createLucideIcon('CheckCheck', [\n  ['path', { d: 'M18 6 7 17l-5-5', key: '116fxf' }],\n  ['path', { d: 'm22 10-7.5 7.5L13 16', key: 'ke71qq' }],\n]);\n\nexport default CheckCheck;\n","\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { Bell, CheckCheck, Loader2 } from \"lucide-react\"\r\nimport { authFetch } from \"@/lib/client-auth\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface Notification {\r\n    id: string\r\n    type: string\r\n    title: string\r\n    body: string\r\n    createdAt: string\r\n    readAt: string | null\r\n}\r\n\r\nexport default function NotificationsPage() {\r\n    const [notifications, setNotifications] = useState<Notification[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [markingAll, setMarkingAll] = useState(false)\r\n\r\n    const loadNotifications = async () => {\r\n        try {\r\n            const res = await authFetch(\"/api/notifications?limit=50\")\r\n            if (res.ok) {\r\n                const data = await res.json()\r\n                setNotifications(data.notifications || [])\r\n            }\r\n        } catch { } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const markAllRead = async () => {\r\n        setMarkingAll(true)\r\n        try {\r\n            await authFetch(\"/api/notifications\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ markAllRead: true }),\r\n            })\r\n            setNotifications((prev) => prev.map((n) => ({ ...n, readAt: new Date().toISOString() })))\r\n        } catch { } finally {\r\n            setMarkingAll(false)\r\n        }\r\n    }\r\n\r\n    const markAsRead = async (id: string) => {\r\n        try {\r\n            await authFetch(\"/api/notifications\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ ids: [id] }),\r\n            })\r\n            setNotifications((prev) => prev.map((n) => n.id === id ? { ...n, readAt: new Date().toISOString() } : n))\r\n        } catch { }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadNotifications()\r\n    }, [])\r\n\r\n    const formatTimeAgo = (dateStr: string) => {\r\n        const date = new Date(dateStr)\r\n        const now = new Date()\r\n        const diffMs = now.getTime() - date.getTime()\r\n        const diffMins = Math.floor(diffMs / 60000)\r\n        if (diffMins < 60) return `${diffMins} minutes ago`\r\n        const diffHours = Math.floor(diffMins / 60)\r\n        if (diffHours < 24) return `${diffHours} hours ago`\r\n        const diffDays = Math.floor(diffHours / 24)\r\n        return `${diffDays} days ago`\r\n    }\r\n\r\n    const unreadCount = notifications.filter((n) => !n.readAt).length\r\n\r\n    return (\r\n        <div className=\"space-y-6 p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"flex h-12 w-12 items-center justify-center rounded-xl bg-[#3457D5]\">\r\n                        <Bell className=\"h-6 w-6 text-white\" />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold text-[#3457D5]\">Notifications</h1>\r\n                        <p className=\"text-muted-foreground\">View all your notifications</p>\r\n                    </div>\r\n                </div>\r\n                {unreadCount > 0 && (\r\n                    <Button onClick={markAllRead} disabled={markingAll} variant=\"outline\">\r\n                        {markingAll ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <CheckCheck className=\"mr-2 h-4 w-4\" />}\r\n                        Mark all as read ({unreadCount})\r\n                    </Button>\r\n                )}\r\n            </div>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>All Notifications</CardTitle>\r\n                    <CardDescription>\r\n                        {notifications.length} notification{notifications.length !== 1 ? \"s\" : \"\"}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {loading ? (\r\n                        <div className=\"flex items-center justify-center py-8\">\r\n                            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n                        </div>\r\n                    ) : notifications.length === 0 ? (\r\n                        <div className=\"text-center py-8 text-muted-foreground\">\r\n                            <Bell className=\"mx-auto h-12 w-12 mb-4 opacity-50\" />\r\n                            <p>No notifications yet</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"divide-y\">\r\n                            {notifications.map((n) => (\r\n                                <div\r\n                                    key={n.id}\r\n                                    className={cn(\r\n                                        \"py-4 px-2 cursor-pointer hover:bg-muted/50 rounded-lg transition-colors\",\r\n                                        !n.readAt && \"bg-primary/5\"\r\n                                    )}\r\n                                    onClick={() => !n.readAt && markAsRead(n.id)}\r\n                                >\r\n                                    <div className=\"flex items-start justify-between gap-4\">\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <p className=\"font-medium\">{n.title}</p>\r\n                                                {!n.readAt && <Badge variant=\"secondary\" className=\"text-xs\">New</Badge>}\r\n                                            </div>\r\n                                            <p className=\"text-sm text-muted-foreground mt-1\">{n.body}</p>\r\n                                            <p className=\"text-xs text-muted-foreground mt-2\">{formatTimeAgo(n.createdAt)}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}