module.exports=[546893,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},588237,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},631659,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(340695),e=a.i(703130),f=a.i(205522),g=a.i(917171),h=a.i(546893),i=a.i(887682),j=a.i(965733),k=a.i(254161),l=a.i(588237),m=a.i(677050),n=a.i(292e3),o=a.i(816201);function p(){let[a,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),I=async()=>{try{let a=await (0,m.authFetch)("/api/disputes"),b=await a.json();b.ok&&p(b.data)}catch(a){console.error("Failed to fetch disputes",a)}finally{r(!1)}};(0,c.useEffect)(()=>{I()},[]),(0,c.useEffect)(()=>{u?(async()=>{F(!0);try{let a=await (0,m.authFetch)(`/api/user/transactions/recent?category=${u}`),b=await a.json();b.ok&&(D(b.data),G||z(""))}catch(a){console.error(a)}finally{F(!1)}})():D([])},[u]);let J=async a=>{a.preventDefault(),B(!0);try{(await (0,m.authFetch)("/api/disputes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:u,issue:w,reference:y})})).ok?(t(!1),v(""),x(""),z(""),H(!1),I()):alert("Failed to create dispute")}catch(a){console.error("Failed to submit dispute",a)}finally{B(!1)}};return(0,b.jsxs)("div",{className:"container py-8 max-w-6xl",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Dispute Center"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Track and manage your service complaints"})]}),(0,b.jsxs)(j.Dialog,{open:s,onOpenChange:t,children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{children:"Log a New Dispute"})}),(0,b.jsxs)(j.DialogContent,{className:"max-w-lg",children:[(0,b.jsx)(j.DialogHeader,{children:(0,b.jsx)(j.DialogTitle,{children:"Log a Service Dispute"})}),(0,b.jsxs)("form",{onSubmit:J,className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"service",children:"Service Category"}),(0,b.jsxs)(i.Select,{value:u,onValueChange:v,required:!0,children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select Service"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"BVN",children:"BVN Services"}),(0,b.jsx)(i.SelectItem,{value:"NIN",children:"NIN Services"}),(0,b.jsx)(i.SelectItem,{value:"CAC",children:"CAC Registration"}),(0,b.jsx)(i.SelectItem,{value:"AIRTIME",children:"Airtime"}),(0,b.jsx)(i.SelectItem,{value:"DATA",children:"Data"}),(0,b.jsx)(i.SelectItem,{value:"BILLS",children:"Bills"}),(0,b.jsx)(i.SelectItem,{value:"WALLET",children:"Wallet/Payment"}),(0,b.jsx)(i.SelectItem,{value:"OTHER",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.Label,{htmlFor:"reference",children:"Transaction"}),(0,b.jsx)(d.Button,{type:"button",variant:"link",className:"h-auto p-0 text-xs",onClick:()=>{H(!G),z("")},children:G?"Select Transaction":"Enter Reference Manually"})]}),G?(0,b.jsx)(f.Input,{id:"reference",value:y,onChange:a=>z(a.target.value),placeholder:"e.g. TX-123456"}):(0,b.jsxs)(i.Select,{value:y,onValueChange:z,children:[(0,b.jsx)(i.SelectTrigger,{disabled:!u||E,children:(0,b.jsx)(i.SelectValue,{placeholder:E?"Loading transactions...":u?0===C.length?"No recent transactions found":"Select a transaction":"Select a service first"})}),(0,b.jsxs)(i.SelectContent,{children:[C.map(a=>(0,b.jsx)(i.SelectItem,{value:a.reference,children:(0,b.jsxs)("div",{className:"flex flex-col text-left",children:[(0,b.jsxs)("span",{className:"font-medium",children:[a.subservice||a.category," - ₦",Number(a.amount).toLocaleString()]}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[new Date(a.createdAt).toLocaleDateString()," • ",a.reference," • ",a.status]})]})},a.id)),0===C.length&&(0,b.jsx)(i.SelectItem,{value:"none",disabled:!0,children:"No recent transactions"})]})]}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground",children:!G&&"Select the transaction related to your complaint."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"issue",children:"Issue Description"}),(0,b.jsx)(h.Textarea,{id:"issue",value:w,onChange:a=>x(a.target.value),placeholder:"Describe your issue in detail...",required:!0})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",disabled:A,children:A?"Submitting...":"Submit Dispute"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Disputes"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Detailed Status"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.AlertCircle,{className:"w-4 h-4 text-orange-500"}),a.filter(a=>"OPEN"===a.status).length," Open"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.CheckCircle,{className:"w-4 h-4 text-green-500"}),a.filter(a=>"RESOLVED"===a.status).length," Resolved"]})]})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"My Disputes"}),(0,b.jsx)(e.CardDescription,{children:"History of your reported issues"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Date"}),(0,b.jsx)(l.TableHead,{children:"Service"}),(0,b.jsx)(l.TableHead,{children:"Reference"}),(0,b.jsx)(l.TableHead,{children:"Issue"}),(0,b.jsx)(l.TableHead,{children:"Status"}),(0,b.jsx)(l.TableHead,{children:"Admin Notes"})]})}),(0,b.jsx)(l.TableBody,{children:q?(0,b.jsx)(l.TableRow,{children:(0,b.jsx)(l.TableCell,{colSpan:6,className:"text-center h-24",children:"Loading disputes..."})}):0===a.length?(0,b.jsx)(l.TableRow,{children:(0,b.jsx)(l.TableCell,{colSpan:6,className:"text-center h-24 text-muted-foreground",children:"No disputes found."})}):a.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{className:"font-medium",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)(l.TableCell,{children:a.service}),(0,b.jsx)(l.TableCell,{className:"font-mono text-xs",children:a.reference||"—"}),(0,b.jsx)(l.TableCell,{className:"max-w-[200px] truncate",title:a.issue,children:a.issue}),(0,b.jsx)(l.TableCell,{children:(a=>{switch(a){case"RESOLVED":return(0,b.jsx)(k.Badge,{className:"bg-green-600",children:"Resolved"});case"OPEN":return(0,b.jsx)(k.Badge,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Open"});case"IN_PROGRESS":return(0,b.jsx)(k.Badge,{variant:"outline",className:"border-blue-500 text-blue-500",children:"In Progress"});case"ESCALATED":return(0,b.jsx)(k.Badge,{variant:"destructive",children:"Escalated"});default:return(0,b.jsx)(k.Badge,{variant:"outline",children:a})}})(a.status)}),(0,b.jsx)(l.TableCell,{className:"text-sm text-muted-foreground",children:a.adminNotes||"—"})]},a.id))})]})})]})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=_85868f78._.js.map