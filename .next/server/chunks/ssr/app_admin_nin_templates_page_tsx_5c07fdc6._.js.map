{"version":3,"sources":["turbopack:///[project]/app/admin/nin/templates/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\r\nimport { Switch } from \"@/components/ui/switch\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { toast } from \"@/components/ui/use-toast\"\r\nimport { authFetch } from \"@/lib/client-auth\"\r\nimport { Trash2, RefreshCcw, CheckCircle2, XCircle, FileText } from \"lucide-react\"\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\r\n\r\ntype NinTemplate = {\r\n  id: string\r\n  name: string\r\n  type: \"digital\" | \"physical\" | \"nims\"\r\n  templateContent: string\r\n  placeholders: string[]\r\n  isActive: boolean\r\n  createdBy: string\r\n  createdAt: string\r\n  updatedAt: string\r\n}\r\n\r\nexport default function AdminNinTemplatesPage() {\r\n  const [loading, setLoading] = useState(false)\r\n  const [templates, setTemplates] = useState<NinTemplate[]>([])\r\n  const [typeFilter, setTypeFilter] = useState<string>(\"all\")\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [type, setType] = useState<\"digital\" | \"physical\" | \"nims\">(\"digital\")\r\n  const [templateContent, setTemplateContent] = useState(\"\")\r\n  const [isActive, setIsActive] = useState(true)\r\n  const [previewHtml, setPreviewHtml] = useState<string>(\"\")\r\n  const [isPreviewOpen, setIsPreviewOpen] = useState<boolean>(false)\r\n\r\n  // Real-data preview state\r\n  const [isRealPreviewOpen, setIsRealPreviewOpen] = useState<boolean>(false)\r\n  const [realReference, setRealReference] = useState<string>(\"\")\r\n  const [realMode, setRealMode] = useState<\"current\" | \"stored\">(\"current\")\r\n  const [realLoading, setRealLoading] = useState<boolean>(false)\r\n  const [realError, setRealError] = useState<string | null>(null)\r\n  const [realVerificationData, setRealVerificationData] = useState<any | null>(null)\r\n  const [storedSlipHtml, setStoredSlipHtml] = useState<string | null>(null)\r\n  const [realTemplateType, setRealTemplateType] = useState<\"digital\" | \"physical\" | \"nims\" | null>(null)\r\n\r\n  const [isEditOpen, setIsEditOpen] = useState<boolean>(false)\r\n  const [editId, setEditId] = useState<string | null>(null)\r\n  const [editName, setEditName] = useState<string>(\"\")\r\n  const [editType, setEditType] = useState<\"digital\" | \"physical\" | \"nims\">(\"digital\")\r\n  const [editContent, setEditContent] = useState<string>(\"\")\r\n  const [editActive, setEditActive] = useState<boolean>(true)\r\n  const editTextareaRef = useRef<HTMLTextAreaElement | null>(null)\r\n  // Asset picker\r\n  const [isAssetPickerOpen, setIsAssetPickerOpen] = useState<boolean>(false)\r\n  const [assetLoading, setAssetLoading] = useState<boolean>(false)\r\n  const [assets, setAssets] = useState<{ name: string; url: string; path: string }[]>([])\r\n  const [assetDir, setAssetDir] = useState<string>(\"\")\r\n\r\n  const requiredPlaceholders = [\r\n    \"firstName\",\r\n    \"lastName\",\r\n    \"nin\",\r\n    \"dateOfBirth\",\r\n    \"gender\",\r\n    \"issueDate\",\r\n    // Optional but recommended visual elements\r\n    \"photo\",\r\n    \"qrCode\",\r\n  ]\r\n\r\n  const detectedEditPlaceholders = useMemo(() => {\r\n    const names = Array.from(editContent.matchAll(/\\{\\{\\s*([a-zA-Z0-9_\\.]+)\\s*\\}\\}/g)).map((m) => m[1])\r\n    return [...new Set(names)]\r\n  }, [editContent])\r\n\r\n  const missingRequired = useMemo(\r\n    () => requiredPlaceholders.filter((p) => !detectedEditPlaceholders.includes(p)),\r\n    [requiredPlaceholders, detectedEditPlaceholders],\r\n  )\r\n\r\n  const unknownPlaceholders = useMemo(\r\n    () => detectedEditPlaceholders.filter((p) => !requiredPlaceholders.includes(p)),\r\n    [requiredPlaceholders, detectedEditPlaceholders],\r\n  )\r\n\r\n  const extractedPlaceholders = useMemo(() => {\r\n    const matches = Array.from(templateContent.matchAll(/\\{\\{\\s*([a-zA-Z0-9_\\.]+)\\s*\\}\\}/g)).map((m) => `{{${m[1]}}}`)\r\n    return [...new Set(matches)]\r\n  }, [templateContent])\r\n\r\n  const activeTemplateByType = useMemo(() => {\r\n    if (!realTemplateType) return null\r\n    return templates.find((t) => t.isActive && t.type === realTemplateType) || null\r\n  }, [templates, realTemplateType])\r\n\r\n  const fetchTemplates = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const params = new URLSearchParams()\r\n      if (typeFilter && typeFilter !== \"all\") params.set(\"type\", typeFilter)\r\n      params.set(\"pageSize\", \"50\")\r\n      const res = await authFetch(`/api/admin/nin-templates?${params.toString()}`)\r\n      if (res.status === 401) {\r\n        toast({ title: \"Unauthorized\", description: \"Please log in as admin.\", variant: \"destructive\" })\r\n        setLoading(false)\r\n        return\r\n      }\r\n      const data = await res.json()\r\n      setTemplates(data.templates || [])\r\n    } catch (err) {\r\n      toast({ title: \"Failed to load templates\", description: String(err), variant: \"destructive\" })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchTemplates()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [typeFilter])\r\n\r\n  const createTemplate = async () => {\r\n    if (!name || !templateContent) {\r\n      toast({ title: \"Missing fields\", description: \"Name and content are required.\", variant: \"destructive\" })\r\n      return\r\n    }\r\n    setLoading(true)\r\n    try {\r\n      const res = await authFetch(\"/api/admin/nin-templates\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name, type, templateContent, placeholders: extractedPlaceholders, isActive }),\r\n      })\r\n      if (!res.ok) {\r\n        const err = await res.json().catch(() => ({}))\r\n        throw new Error(err.error || `Failed: ${res.status}`)\r\n      }\r\n      toast({ title: \"Template created\", description: name })\r\n      setName(\"\")\r\n      setTemplateContent(\"\")\r\n      setIsActive(true)\r\n      setType(\"digital\")\r\n      await fetchTemplates()\r\n    } catch (err) {\r\n      toast({ title: \"Create failed\", description: String(err), variant: \"destructive\" })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const buildPreviewHtml = (tpl: NinTemplate) => {\r\n    const sample: Record<string, string> = {\r\n      firstName: \"John\",\r\n      middleName: \"A.\",\r\n      lastName: \"Doe\",\r\n      nin: \"12345678901\",\r\n      dateOfBirth: \"1990-01-01\",\r\n      gender: \"MALE\",\r\n      issueDate: new Date().toISOString().slice(0, 10),\r\n      photo: \"/placeholder.jpg\",\r\n      qrCode: \"SAMPLE-QR-CODE\",\r\n    }\r\n    let html = tpl.templateContent\r\n    for (const key of Object.keys(sample)) {\r\n      const re = new RegExp(`\\\\{\\\\{\\\\s*${key}\\\\s*\\\\}\\\\}`, \"g\")\r\n      html = html.replace(re, sample[key])\r\n    }\r\n    return sanitizeHtml(html)\r\n  }\r\n\r\n  const previewTemplate = (tpl: NinTemplate) => {\r\n    const html = buildPreviewHtml(tpl)\r\n    setPreviewHtml(html)\r\n    setIsPreviewOpen(true)\r\n  }\r\n\r\n  const normalizeVerificationData = (raw: any) => {\r\n    if (!raw) return {}\r\n    const r = raw || {}\r\n    const src = r.result || r.data || r\r\n    const firstName = src.firstName || src.firstname || src.first_name || src.givenNames || src.given_name || \"\"\r\n    const middleName = src.middleName || src.middlename || src.middle_name || src.otherNames || \"\"\r\n    const lastName = src.lastName || src.lastname || src.last_name || src.surname || \"\"\r\n    const nin = src.nin || src.ninNumber || src.nin_number || src.trackingId || src.tracking_id || src.nimcNin || \"\"\r\n    const dateOfBirth = src.dateOfBirth || src.dob || src.birthDate || src.birth_date || \"\"\r\n    const gender = (src.gender || src.sex || \"\").toString().toUpperCase()\r\n    const phone = src.phone || src.msisdn || src.telephone || \"\"\r\n    const address = src.address || src.residentialAddress || src.residential_address || src.homeAddress || \"\"\r\n    const stateOfOrigin = src.stateOfOrigin || src.state_of_origin || src.state || \"\"\r\n    const lga = src.lga || src.localGovt || src.local_government || \"\"\r\n    const trackingId = src.trackingId || src.tracking_id || \"\"\r\n    const issueDate = src.issueDate || src.issue_date || r.issueDate || \"\"\r\n    const photoUrl = src.photoUrl || src.photo || src.imageUrl || src.image || \"\"\r\n    const photoBase64 = src.photoBase64 || src.imageBase64 || \"\"\r\n    const photo = photoUrl || (photoBase64 ? `data:image/png;base64,${photoBase64}` : \"\") || \"/placeholder.jpg\"\r\n    const qrCode = src.qrCode || src.qr || r.qrCode || \"\"\r\n    return {\r\n      firstName,\r\n      middleName,\r\n      lastName,\r\n      nin,\r\n      dateOfBirth,\r\n      gender,\r\n      phone,\r\n      address,\r\n      stateOfOrigin,\r\n      lga,\r\n      trackingId,\r\n      issueDate: issueDate || new Date().toISOString().slice(0, 10),\r\n      photo,\r\n      qrCode,\r\n    }\r\n  }\r\n\r\n  // Simple frontend HTML sanitizer to prevent basic XSS in previews\r\n  const sanitizeHtml = (html: string): string => {\r\n    if (!html) return \"\"\r\n    // Remove script tags, onclick/onerror attributes, and iframes\r\n    return html\r\n      .replace(/<script\\b[^>]*>([\\s\\S]*?)<\\/script>/gim, \"\")\r\n      .replace(/<iframe\\b[^>]*>([\\s\\S]*?)<\\/iframe>/gim, \"\")\r\n      .replace(/\\bon\\w+=\"[^\"]*\"/gim, \"\")\r\n      .replace(/\\bon\\w+='[^']*'/gim, \"\")\r\n      .replace(/\\bjavascript:[^\"']+/gim, \"\")\r\n  }\r\n\r\n  // Helper to render template content with actual data\r\n  const renderWithData = (htmlContent: string, data: any): string => {\r\n    let content = htmlContent || \"\"\r\n    const normalized = normalizeVerificationData(data)\r\n    const replacements: Record<string, any> = {\r\n      \"{{firstName}}\": normalized.firstName || \"\",\r\n      \"{{lastName}}\": normalized.lastName || \"\",\r\n      \"{{middleName}}\": normalized.middleName || \"\",\r\n      \"{{nin}}\": normalized.nin || \"\",\r\n      \"{{dateOfBirth}}\": normalized.dateOfBirth || \"\",\r\n      \"{{gender}}\": normalized.gender || \"\",\r\n      \"{{phone}}\": normalized.phone || \"\",\r\n      \"{{address}}\": normalized.address || \"\",\r\n      \"{{photo}}\": normalized.photo || \"/placeholder.jpg\",\r\n      \"{{issueDate}}\": normalized.issueDate || new Date().toISOString().slice(0, 10),\r\n      \"{{stateOfOrigin}}\": normalized.stateOfOrigin || \"\",\r\n      \"{{lga}}\": normalized.lga || \"\",\r\n      \"{{trackingId}}\": normalized.trackingId || \"\",\r\n      \"{{qrCode}}\": normalized.qrCode || \"\",\r\n    }\r\n    Object.entries(replacements).forEach(([ph, val]) => {\r\n      content = content.replace(new RegExp(ph, \"g\"), String(val))\r\n    })\r\n    return sanitizeHtml(content)\r\n  }\r\n\r\n  const openRealPreview = () => {\r\n    setIsRealPreviewOpen(true)\r\n    setRealReference(\"\")\r\n    setRealMode(\"current\")\r\n    setRealError(null)\r\n    setRealVerificationData(null)\r\n    setStoredSlipHtml(null)\r\n  }\r\n\r\n  const loadRealPreview = async () => {\r\n    if (!realReference) {\r\n      setRealError(\"Enter a transaction reference\")\r\n      return\r\n    }\r\n    setRealLoading(true)\r\n    setRealError(null)\r\n    try {\r\n      const res = await authFetch(`/api/admin/service/logs/${encodeURIComponent(realReference)}`)\r\n      const json = await res.json()\r\n      if (!res.ok || !json?.ok) {\r\n        throw new Error(json?.error || `Failed (${res.status})`)\r\n      }\r\n      const meta = (json.transaction?.meta || {}) as any\r\n      setRealVerificationData(meta?.verificationData || null)\r\n      setStoredSlipHtml(meta?.slipData || null)\r\n      setRealTemplateType((meta?.templateType as any) || null)\r\n      if (!meta?.verificationData && !meta?.slipData) {\r\n        setRealError(\"No verification or slip data found on transaction\")\r\n      }\r\n    } catch (err: any) {\r\n      setRealError(String(err?.message || err))\r\n    } finally {\r\n      setRealLoading(false)\r\n    }\r\n  }\r\n\r\n  const openEdit = (tpl: NinTemplate) => {\r\n    setEditId(tpl.id)\r\n    setEditName(tpl.name)\r\n    setEditType(tpl.type)\r\n    setEditContent(tpl.templateContent)\r\n    setEditActive(tpl.isActive)\r\n    setIsEditOpen(true)\r\n  }\r\n\r\n  const fetchAssets = async () => {\r\n    setAssetLoading(true)\r\n    try {\r\n      const params = new URLSearchParams()\r\n      if (assetDir) params.set(\"prefix\", assetDir)\r\n      const res = await authFetch(`/api/admin/assets?${params.toString()}`)\r\n      const json = await res.json()\r\n      if (!res.ok || !json?.ok) throw new Error(json?.error || `Failed (${res.status})`)\r\n      setAssets((json.files || []).map((f: any) => ({ name: f.name, url: f.url, path: f.path })))\r\n    } catch (err) {\r\n      toast({ title: \"Failed to load assets\", description: String(err), variant: \"destructive\" })\r\n    } finally {\r\n      setAssetLoading(false)\r\n    }\r\n  }\r\n\r\n  const saveEdit = async () => {\r\n    if (!editId) return\r\n    setLoading(true)\r\n    try {\r\n      const matches = Array.from(editContent.matchAll(/\\{\\{\\s*([a-zA-Z0-9_\\.]+)\\s*\\}\\}/g)).map((m) => `{{${m[1]}}}`)\r\n      const placeholders = [...new Set(matches)]\r\n      const res = await authFetch(`/api/admin/nin-templates/${editId}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          name: editName,\r\n          type: editType,\r\n          templateContent: editContent,\r\n          isActive: editActive,\r\n          placeholders,\r\n        }),\r\n      })\r\n      if (!res.ok) {\r\n        const err = await res.json().catch(() => ({}))\r\n        throw new Error(err.error || `Failed: ${res.status}`)\r\n      }\r\n      toast({ title: \"Template updated\", description: editName })\r\n      setIsEditOpen(false)\r\n      setEditId(null)\r\n      await fetchTemplates()\r\n    } catch (err) {\r\n      toast({ title: \"Update failed\", description: String(err), variant: \"destructive\" })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const toggleActive = async (tpl: NinTemplate) => {\r\n    try {\r\n      const res = await authFetch(`/api/admin/nin-templates/${tpl.id}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ isActive: !tpl.isActive }),\r\n      })\r\n      if (!res.ok) throw new Error(`Failed: ${res.status}`)\r\n      await fetchTemplates()\r\n    } catch (err) {\r\n      toast({ title: \"Update failed\", description: String(err), variant: \"destructive\" })\r\n    }\r\n  }\r\n\r\n  const deleteTemplate = async (tpl: NinTemplate) => {\r\n    if (!confirm(`Delete template \"${tpl.name}\"?`)) return\r\n    try {\r\n      const res = await authFetch(`/api/admin/nin-templates/${tpl.id}`, { method: \"DELETE\" })\r\n      if (!res.ok) throw new Error(`Failed: ${res.status}`)\r\n      await fetchTemplates()\r\n    } catch (err) {\r\n      toast({ title: \"Delete failed\", description: String(err), variant: \"destructive\" })\r\n    }\r\n  }\r\n\r\n  const duplicateTemplate = async (tpl: NinTemplate) => {\r\n    setLoading(true)\r\n    try {\r\n      // Extract placeholders from original content\r\n      const matches = Array.from(tpl.templateContent.matchAll(/\\{\\{\\s*([a-zA-Z0-9_\\.]+)\\s*\\}\\}/g)).map((m) => `{{${m[1]}}}`)\r\n      const placeholders = [...new Set(matches)]\r\n      const body = {\r\n        name: `Copy of ${tpl.name}`,\r\n        type: tpl.type,\r\n        templateContent: tpl.templateContent,\r\n        isActive: false,\r\n        placeholders,\r\n      }\r\n      const res = await authFetch(`/api/admin/nin-templates`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      })\r\n      if (!res.ok) {\r\n        const err = await res.json().catch(() => ({}))\r\n        throw new Error(err.error || `Failed: ${res.status}`)\r\n      }\r\n      toast({ title: \"Template duplicated\", description: body.name })\r\n      await fetchTemplates()\r\n    } catch (err) {\r\n      toast({ title: \"Duplicate failed\", description: String(err), variant: \"destructive\" })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"p-2 rounded-lg bg-primary/10\">\r\n          <FileText className=\"h-6 w-6 text-primary\" />\r\n        </div>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">NIN Templates</h1>\r\n          <p className=\"text-muted-foreground\">Manage templates used for NIN slip PDF generation</p>\r\n        </div>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Create Template</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Name</label>\r\n              <Input value={name} onChange={(e) => setName(e.target.value)} placeholder=\"e.g., Digital Slip v1\" />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Type</label>\r\n              <Select value={type} onValueChange={(v) => setType(v as any)}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select type\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"digital\">Digital</SelectItem>\r\n                  <SelectItem value=\"physical\">Physical</SelectItem>\r\n                  <SelectItem value=\"nims\">NIMS</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <div className=\"space-y-2 mt-4\">\r\n            <label className=\"text-sm font-medium\">Template Content (HTML)</label>\r\n            <Textarea rows={8} value={templateContent} onChange={(e) => setTemplateContent(e.target.value)} placeholder=\"HTML with placeholders like {{firstName}}, {{lastName}}, {{nin}}\" />\r\n          </div>\r\n          <div className=\"flex items-center gap-2 mt-3\">\r\n            <Switch checked={isActive} onCheckedChange={setIsActive} />\r\n            <span className=\"text-sm\">Active</span>\r\n          </div>\r\n          <div className=\"mt-3 text-xs text-muted-foreground\">Detected placeholders: {extractedPlaceholders.join(\", \") || \"<none>\"}</div>\r\n          <div className=\"mt-4\">\r\n            <Button onClick={createTemplate} disabled={loading}>Create Template</Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <CardTitle>Templates</CardTitle>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Select value={typeFilter} onValueChange={setTypeFilter}>\r\n                <SelectTrigger className=\"w-40\">\r\n                  <SelectValue placeholder=\"Filter type\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All</SelectItem>\r\n                  <SelectItem value=\"digital\">Digital</SelectItem>\r\n                  <SelectItem value=\"physical\">Physical</SelectItem>\r\n                  <SelectItem value=\"nims\">NIMS</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n              <Button variant=\"outline\" onClick={fetchTemplates} disabled={loading}>\r\n                <RefreshCcw className=\"h-4 w-4 mr-2\" /> Refresh\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {isPreviewOpen && (\r\n            <div className=\"border rounded-md p-3 mb-4\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div className=\"text-sm font-medium\">Template Preview</div>\r\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setIsPreviewOpen(false)}>Close</Button>\r\n              </div>\r\n              <div className=\"bg-white border rounded p-4 overflow-auto\" style={{ maxHeight: 500 }}>\r\n                <div dangerouslySetInnerHTML={{ __html: previewHtml }} />\r\n              </div>\r\n              <div className=\"text-xs text-muted-foreground mt-2\">\r\n                Note: Images must exist in `public/`. Placeholders are filled with sample data.\r\n              </div>\r\n            </div>\r\n          )}\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Name</TableHead>\r\n                <TableHead>Type</TableHead>\r\n                <TableHead>Status</TableHead>\r\n                <TableHead>Placeholders</TableHead>\r\n                <TableHead>Updated</TableHead>\r\n                <TableHead className=\"text-right\">Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {templates.map((tpl) => (\r\n                <TableRow key={tpl.id}>\r\n                  <TableCell className=\"font-medium\">{tpl.name}</TableCell>\r\n                  <TableCell className=\"capitalize\">{tpl.type}</TableCell>\r\n                  <TableCell>\r\n                    {tpl.isActive ? (\r\n                      <Badge className=\"bg-green-600 text-white\"><CheckCircle2 className=\"h-3 w-3 mr-1\" /> Active</Badge>\r\n                    ) : (\r\n                      <Badge variant=\"destructive\"><XCircle className=\"h-3 w-3 mr-1\" /> Inactive</Badge>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell className=\"text-xs\">{tpl.placeholders?.join(\", \") || \"<none>\"}</TableCell>\r\n                  <TableCell className=\"text-xs\">{new Date(tpl.updatedAt).toLocaleString()}</TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <Button variant=\"secondary\" size=\"sm\" onClick={() => openEdit(tpl)}>Edit</Button>\r\n                      <Button variant=\"outline\" size=\"sm\" onClick={() => duplicateTemplate(tpl)}>Duplicate</Button>\r\n                      <Button variant=\"outline\" size=\"sm\" onClick={() => previewTemplate(tpl)}>Preview</Button>\r\n                      <Button variant=\"outline\" size=\"sm\" onClick={openRealPreview}>Real Preview</Button>\r\n                      <Button variant=\"outline\" size=\"sm\" onClick={() => toggleActive(tpl)}>\r\n                        {tpl.isActive ? \"Deactivate\" : \"Activate\"}\r\n                      </Button>\r\n                      <Button variant=\"destructive\" size=\"sm\" onClick={() => deleteTemplate(tpl)}>\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {templates.length === 0 && (\r\n                <TableRow>\r\n                  <TableCell colSpan={6} className=\"text-center text-sm text-muted-foreground\">No templates found</TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={isEditOpen} onOpenChange={setIsEditOpen}>\r\n        <DialogContent className=\"max-w-3xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>Edit NIN Template</DialogTitle>\r\n            <DialogDescription>Update template details and content. Placeholders auto-detect from HTML.</DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Name</label>\r\n              <Input value={editName} onChange={(e) => setEditName(e.target.value)} />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Type</label>\r\n              <Select value={editType} onValueChange={(v) => setEditType(v as any)}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select type\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"digital\">Digital</SelectItem>\r\n                  <SelectItem value=\"physical\">Physical</SelectItem>\r\n                  <SelectItem value=\"nims\">NIMS</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 mt-2\">\r\n            <Switch checked={editActive} onCheckedChange={setEditActive} />\r\n            <span className=\"text-sm\">Active</span>\r\n          </div>\r\n          <div className=\"space-y-2 mt-4\">\r\n            <label className=\"text-sm font-medium\">Template Content (HTML)</label>\r\n            <div className=\"grid gap-3 md:grid-cols-2\">\r\n              <Textarea ref={editTextareaRef} rows={8} value={editContent} onChange={(e) => setEditContent(e.target.value)} />\r\n              <div className=\"border rounded p-3\">\r\n                <div className=\"text-sm font-medium mb-2\">Placeholders</div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {[\"firstName\", \"middleName\", \"lastName\", \"nin\", \"dateOfBirth\", \"gender\", \"issueDate\", \"photo\", \"qrCode\", \"phone\", \"address\", \"stateOfOrigin\", \"lga\", \"trackingId\"].map((ph) => (\r\n                    <Button\r\n                      key={ph}\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        const textarea = editTextareaRef.current\r\n                        const insert = `{{${ph}}}`\r\n                        if (textarea && typeof textarea.selectionStart === \"number\") {\r\n                          const start = textarea.selectionStart\r\n                          const end = textarea.selectionEnd\r\n                          const before = editContent.slice(0, start)\r\n                          const after = editContent.slice(end)\r\n                          const next = before + insert + after\r\n                          setEditContent(next)\r\n                          requestAnimationFrame(() => {\r\n                            textarea.selectionStart = textarea.selectionEnd = start + insert.length\r\n                            textarea.focus()\r\n                          })\r\n                        } else {\r\n                          setEditContent((prev) => prev + insert)\r\n                        }\r\n                      }}\r\n                    >{`{{${ph}}}`}</Button>\r\n                  ))}\r\n                </div>\r\n                <div className=\"mt-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Input placeholder=\"assets subfolder (optional)\" value={assetDir} onChange={(e) => setAssetDir(e.target.value)} />\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => { setIsAssetPickerOpen(true); fetchAssets() }}>Assets</Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* Validation hints */}\r\n          <div className=\"mt-3 space-y-2\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              Required placeholders: {requiredPlaceholders.join(\", \")}\r\n            </div>\r\n            {missingRequired.length > 0 && (\r\n              <div className=\"text-xs text-red-600\">\r\n                Missing required placeholders: {missingRequired.join(\", \")}\r\n              </div>\r\n            )}\r\n            {unknownPlaceholders.length > 0 && (\r\n              <div className=\"text-xs text-amber-600\">\r\n                Other detected placeholders: {unknownPlaceholders.join(\", \")}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"mt-2 text-xs text-muted-foreground\">\r\n            Detected placeholders: {Array.from(editContent.matchAll(/\\{\\{\\s*([a-zA-Z0-9_\\.]+)\\s*\\}\\}/g)).map((m) => `{{${m[1]}}}`).filter((v, i, a) => a.indexOf(v) === i).join(\", \") || \"<none>\"}\r\n          </div>\r\n          <div className=\"mt-4 flex gap-2 justify-end\">\r\n            <Button variant=\"outline\" onClick={() => setIsEditOpen(false)}>Cancel</Button>\r\n            <Button onClick={saveEdit} disabled={loading || !editId || missingRequired.length > 0}>Save Changes</Button>\r\n          </div>\r\n          <div className=\"border rounded-md p-3 mt-4\">\r\n            <div className=\"text-sm font-medium mb-2\">Live Preview (sample data)</div>\r\n            <div className=\"bg-white border rounded p-4 overflow-auto\" style={{ maxHeight: 300 }}>\r\n              <div\r\n                dangerouslySetInnerHTML={{\r\n                  __html: (() => {\r\n                    const tpl: NinTemplate = {\r\n                      id: editId || \"\",\r\n                      name: editName,\r\n                      type: editType,\r\n                      templateContent: editContent,\r\n                      placeholders: [],\r\n                      isActive: editActive,\r\n                      createdBy: \"\",\r\n                      createdAt: new Date().toISOString(),\r\n                      updatedAt: new Date().toISOString(),\r\n                    }\r\n                    return buildPreviewHtml(tpl)\r\n                  })(),\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground mt-2\">Images must exist in `public/`.</div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Real-data Preview Dialog */}\r\n      <Dialog open={isRealPreviewOpen} onOpenChange={setIsRealPreviewOpen}>\r\n        <DialogContent className=\"max-w-4xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>Real Data Preview</DialogTitle>\r\n            <DialogDescription>Render a template using actual verification/slip data from a transaction reference.</DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"grid gap-4 md:grid-cols-2\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Transaction Reference</label>\r\n              <Input value={realReference} onChange={(e) => setRealReference(e.target.value)} placeholder=\"e.g., NIN-169...\" />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Preview Mode</label>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button variant={realMode === \"current\" ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setRealMode(\"current\")}>Use current template</Button>\r\n                <Button variant={realMode === \"stored\" ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setRealMode(\"stored\")}>Use stored slip</Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button onClick={loadRealPreview} disabled={realLoading}>Load</Button>\r\n            {realReference && (\r\n              <a href={`/api/verification/nin-slip/${encodeURIComponent(realReference)}/pdf`} target=\"_blank\" rel=\"noreferrer\" className=\"text-sm underline\">\r\n                Open PDF endpoint\r\n              </a>\r\n            )}\r\n          </div>\r\n          {realError && <div className=\"text-sm text-red-600\">{realError}</div>}\r\n          <div className=\"border rounded-md p-3 mt-3\">\r\n            <div className=\"text-sm font-medium mb-2\">Preview</div>\r\n            <div className=\"bg-white border rounded p-4 overflow-auto\" style={{ maxHeight: 400 }}>\r\n              <div\r\n                dangerouslySetInnerHTML={{\r\n                  __html:\r\n                    realMode === \"stored\"\r\n                      ? sanitizeHtml(storedSlipHtml || \"<div class='text-muted-foreground text-sm'>No stored slip HTML for this reference.</div>\")\r\n                      : (realVerificationData\r\n                        ? (() => {\r\n                          const baseContent = activeTemplateByType?.templateContent || editContent || templateContent || \"\"\r\n                          return renderWithData(baseContent, realVerificationData)\r\n                        })()\r\n                        : \"<div class='text-muted-foreground text-sm'>Load a reference to render with current template.</div>\")\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground mt-2\">Note: \"Use current template\" renders with the editor content; \"Use stored slip\" shows server-processed HTML if available.</div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Asset Picker Dialog */}\r\n      <Dialog open={isAssetPickerOpen} onOpenChange={setIsAssetPickerOpen}>\r\n        <DialogContent className=\"max-w-3xl\">\r\n          <DialogHeader>\r\n            <DialogTitle>Assets</DialogTitle>\r\n            <DialogDescription>Select an image to insert into the template</DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"flex items-center gap-2 mb-3\">\r\n            <Input className=\"flex-1\" placeholder=\"assets subfolder (optional)\" value={assetDir} onChange={(e) => setAssetDir(e.target.value)} />\r\n            <Button variant=\"outline\" onClick={fetchAssets} disabled={assetLoading}><RefreshCcw className=\"h-4 w-4 mr-2\" /> Refresh</Button>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n            {assets.map((a) => (\r\n              <div key={a.path} className=\"border rounded p-2 flex flex-col gap-2\">\r\n                <img src={a.url} alt={a.name} className=\"h-24 w-full object-cover rounded\" />\r\n                <div className=\"text-xs truncate\" title={a.name}>{a.name}</div>\r\n                <div className=\"flex gap-2\">\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => {\r\n                    const insert = `<img src='${a.url}' alt='${a.name}' />`\r\n                    const textarea = editTextareaRef.current\r\n                    if (textarea && typeof textarea.selectionStart === \"number\") {\r\n                      const start = textarea.selectionStart\r\n                      const end = textarea.selectionEnd\r\n                      const before = editContent.slice(0, start)\r\n                      const after = editContent.slice(end)\r\n                      const next = before + insert + after\r\n                      setEditContent(next)\r\n                      requestAnimationFrame(() => {\r\n                        textarea.selectionStart = textarea.selectionEnd = start + insert.length\r\n                        textarea.focus()\r\n                      })\r\n                    } else {\r\n                      setEditContent((prev) => prev + insert)\r\n                    }\r\n                    setIsAssetPickerOpen(false)\r\n                  }}>Insert &lt;img&gt;</Button>\r\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => {\r\n                    const insert = `style=\\\"background-image: url('${a.url}');\\\"`\r\n                    const textarea = editTextareaRef.current\r\n                    const attr = insert\r\n                    if (textarea && typeof textarea.selectionStart === \"number\") {\r\n                      const start = textarea.selectionStart\r\n                      const end = textarea.selectionEnd\r\n                      const before = editContent.slice(0, start)\r\n                      const after = editContent.slice(end)\r\n                      const next = before + attr + after\r\n                      setEditContent(next)\r\n                      requestAnimationFrame(() => {\r\n                        textarea.selectionStart = textarea.selectionEnd = start + attr.length\r\n                        textarea.focus()\r\n                      })\r\n                    } else {\r\n                      setEditContent((prev) => prev + attr)\r\n                    }\r\n                    setIsAssetPickerOpen(false)\r\n                  }}>Insert bg</Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {assets.length === 0 && (\r\n              <div className=\"text-sm text-muted-foreground col-span-full\">No assets found. Upload images in Admin â†’ Assets.</div>\r\n            )}\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}