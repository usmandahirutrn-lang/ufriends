module.exports=[596872,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(917171),h=a.i(254161),i=a.i(965733),j=a.i(887682),k=a.i(546893),l=a.i(277687),m=a.i(677050),n=a.i(177156),o=a.i(816201),p=a.i(862722),q=a.i(773320),r=a.i(781560),s=a.i(581464);function t(){let{toast:a}=(0,l.useToast)(),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)("all");(0,c.useEffect)(()=>{P()},[]),(0,c.useEffect)(()=>{Q()},[t,L,N]);let P=async()=>{try{let a=await (0,m.authFetch)("/api/admin/pos/requests"),b=await a.json().catch(()=>({}));a.ok&&Array.isArray(b?.requests)&&u(b.requests)}catch{}},Q=()=>{let a=[...t];"all"!==L&&(a=a.filter(a=>a.provider===L)),"all"!==N&&(a=a.filter(a=>a.status===N)),w(a)},R=async b=>{await (0,m.authFetch)(`/api/admin/pos/requests/${b.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"PROCESSING"})}),await P(),a({title:"Request Approved",description:"The POS request has been approved successfully."})},S=async b=>{await (0,m.authFetch)(`/api/admin/pos/requests/${b.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"FAILED"})}),await P(),a({title:"Request Rejected",description:"The POS request has been rejected.",variant:"destructive"})},T=async()=>{x&&F?(await (0,m.authFetch)(`/api/admin/pos/requests/${x.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"COMPLETED",adminNotes:H})}),await P(),C(!1),G(null),I(""),a({title:"Evidence Uploaded",description:"The request has been marked as completed."})):a({title:"Error",description:"Please upload evidence file",variant:"destructive"})},U=async()=>{"admin123"!==J?a({title:"Error",description:"Incorrect password",variant:"destructive"}):x&&(await (0,m.authFetch)(`/api/admin/pos/requests/${x.id}`,{method:"DELETE"}),await P(),E(!1),K(""),a({title:"Request Deleted",description:"The POS request has been deleted successfully."}))};return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"POS Requests Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage and process POS terminal requests from users"})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Filter,{className:"w-5 h-5"}),"Filters"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Provider"}),(0,b.jsxs)(j.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Providers"}),(0,b.jsx)(j.SelectItem,{value:"Opay",children:"Opay"}),(0,b.jsx)(j.SelectItem,{value:"Moniepoint",children:"Moniepoint"}),(0,b.jsx)(j.SelectItem,{value:"FCMB",children:"FCMB"}),(0,b.jsx)(j.SelectItem,{value:"Nomba",children:"Nomba"}),(0,b.jsx)(j.SelectItem,{value:"Other",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Status"}),(0,b.jsxs)(j.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(j.SelectItem,{value:"Pending",children:"Pending"}),(0,b.jsx)(j.SelectItem,{value:"Approved",children:"Approved"}),(0,b.jsx)(j.SelectItem,{value:"Rejected",children:"Rejected"}),(0,b.jsx)(j.SelectItem,{value:"Completed",children:"Completed"})]})]})]})]})})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Total Requests"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:t.length})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(a=>"Pending"===a.status).length})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Approved"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.filter(a=>"Approved"===a.status).length})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Completed"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(a=>"Completed"===a.status).length})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"All POS Requests"}),(0,b.jsx)(d.CardDescription,{children:"View and manage all POS terminal requests"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:0===v.length?(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No requests found"}):v.map(a=>{var c;return(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.formData.fullName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.formData.email}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.formData.phone})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)(h.Badge,{className:"bg-[#3457D5]",children:a.provider}),(0,b.jsx)("div",{className:"mt-2",children:(c=a.status,(0,b.jsx)(h.Badge,{variant:{Pending:"secondary",Approved:"default",Rejected:"destructive",Completed:"outline"}[c]||"default",children:c}))})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Business:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.formData.businessName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"POS Type:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.formData.posType})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Location:"})," ",(0,b.jsxs)("span",{className:"font-medium",children:[a.formData.lga,", ",a.formData.state]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Date:"})," ",(0,b.jsx)("span",{className:"font-medium",children:new Date(a.createdAt).toLocaleDateString()})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:()=>{y(a),A(!0)},children:[(0,b.jsx)(n.Eye,{className:"w-4 h-4 mr-1"}),"View Details"]}),"Pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>R(a),children:[(0,b.jsx)(o.CheckCircle,{className:"w-4 h-4 mr-1"}),"Approve"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:()=>S(a),children:[(0,b.jsx)(p.XCircle,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),"Approved"===a.status&&(0,b.jsxs)(e.Button,{size:"sm",className:"bg-[#3457D5] hover:bg-[#2a46b0]",onClick:()=>{y(a),I(a.adminNotes||""),C(!0)},children:[(0,b.jsx)(q.Upload,{className:"w-4 h-4 mr-1"}),"Upload Evidence"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:()=>{y(a),E(!0)},children:[(0,b.jsx)(r.Trash2,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},a.id)})})})]}),(0,b.jsx)(i.Dialog,{open:z,onOpenChange:A,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"POS Request Details"}),(0,b.jsx)(i.DialogDescription,{children:"Complete information about the POS request"})]}),x&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Full Name"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.fullName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Phone"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Email"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"BVN"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.bvn||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Business Name"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.businessName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"POS Type"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.posType})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Business Address"}),(0,b.jsx)("p",{className:"font-medium",children:x.formData.businessAddress})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Uploaded Documents"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-2 mt-2",children:[x.documents.validId&&(0,b.jsx)("a",{href:x.documents.validId,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Valid ID"}),x.documents.utilityBill&&(0,b.jsx)("a",{href:x.documents.utilityBill,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Utility Bill"}),x.documents.cacCertificate&&(0,b.jsx)("a",{href:x.documents.cacCertificate,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View CAC Certificate"}),x.documents.passportPhoto&&(0,b.jsx)("a",{href:x.documents.passportPhoto,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View Passport Photo"})]})]}),x.evidenceUrl&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Evidence of Completion"}),(0,b.jsx)("a",{href:x.evidenceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm block mt-1",children:"View Evidence"})]}),x.adminNotes&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-gray-600",children:"Admin Notes"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:x.adminNotes})]})]})]})}),(0,b.jsx)(i.Dialog,{open:B,onOpenChange:C,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Upload Evidence of Completion"}),(0,b.jsx)(i.DialogDescription,{children:"Upload proof that the POS has been delivered or processed"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"evidence",children:"Evidence File (Receipt, Tracking Info, etc.)"}),(0,b.jsx)(f.Input,{id:"evidence",type:"file",accept:"image/*,.pdf",onChange:a=>G(a.target.files?.[0]||null)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"notes",children:"Admin Notes"}),(0,b.jsx)(k.Textarea,{id:"notes",value:H,onChange:a=>I(a.target.value),placeholder:"Add any notes about the completion...",rows:4})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{className:"bg-[#3457D5] hover:bg-[#2a46b0]",onClick:T,children:"Upload & Complete"})]})]})}),(0,b.jsx)(i.Dialog,{open:D,onOpenChange:E,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Confirm Deletion"}),(0,b.jsx)(i.DialogDescription,{children:"This action cannot be undone. Enter admin password to confirm."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"password",children:"Admin Password"}),(0,b.jsx)(f.Input,{id:"password",type:"password",value:J,onChange:a=>K(a.target.value),placeholder:"Enter password"})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:U,children:"Delete Request"})]})]})})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=app_admin_pos-requests_page_tsx_c89dbf44._.js.map