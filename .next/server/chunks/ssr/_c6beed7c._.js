module.exports=[277687,a=>{"use strict";var b=a.i(572131);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["toast",()=>i,"useToast",()=>j])},528094,a=>{"use strict";var b=a.i(572131),c=a.i(30553),d=a.i(187924),e=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),f=b.forwardRef((a,b)=>(0,d.jsx)(c.Primitive.span,{...a,ref:b,style:{...e,...a.style}}));f.displayName="VisuallyHidden",a.s(["Root",()=>f,"VISUALLY_HIDDEN_STYLES",()=>e,"VisuallyHidden",()=>f])},703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},917171,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(497895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],917171)},77994,a=>{"use strict";var b=a.i(572131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},533441,a=>{"use strict";var b=a.i(234157);a.s(["Check",()=>b.default])},723228,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(917171),h=a.i(887682),i=a.i(254161),j=a.i(277687),k=a.i(677050);function l(){let{toast:a}=(0,j.useToast)(),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(0,k.authFetch)("/api/service-catalog").then(async a=>m(await a.json())).catch(b=>a({title:"Error",description:String(b),variant:"destructive"}))},[a]);let z=(0,c.useMemo)(()=>Array.from(new Set(l.map(a=>a.category))),[l]),A=(0,c.useMemo)(()=>Array.from(new Set(l.filter(a=>a.category===n).map(a=>a.subservice))),[l,n]);(0,c.useEffect)(()=>{q("")},[n]);let B=async()=>{y(!0);try{let a=new URLSearchParams;r&&a.set("start",r),t&&a.set("end",t),n&&a.set("category",n),p&&a.set("subservice",p);let b=await (0,k.authFetch)(`/api/admin/finance/summary?${a.toString()}`),c=await b.json();if(!b.ok||c.error)throw Error(c.error||"Failed to load summary");w(c.summary)}catch(b){a({title:"Load failed",description:String(b),variant:"destructive"})}finally{y(!1)}};(0,c.useEffect)(()=>{B()},[]);let C=a=>`â‚¦${Number(a??0).toLocaleString(void 0,{maximumFractionDigits:2})}`;return(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Finance Summary"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Start Date"}),(0,b.jsx)(f.Input,{type:"date",className:"mt-2",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"End Date"}),(0,b.jsx)(f.Input,{type:"date",className:"mt-2",value:t,onChange:a=>u(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Category"}),(0,b.jsxs)(h.Select,{value:n,onValueChange:a=>o("__ALL__"===a?"":a),children:[(0,b.jsx)(h.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(h.SelectValue,{placeholder:"All categories"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"__ALL__",children:"All"}),z.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Subservice"}),(0,b.jsxs)(h.Select,{value:p,onValueChange:a=>q("__ALL__"===a?"":a),disabled:!n,children:[(0,b.jsx)(h.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(h.SelectValue,{placeholder:"All subservices"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"__ALL__",children:"All"}),A.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]})]})]}),(0,b.jsx)("div",{className:"flex gap-3",children:(0,b.jsx)(e.Button,{onClick:B,disabled:x,children:x?"Loading...":"Apply Filters"})}),v&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"Total Revenue"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:C(v.totalRevenue)})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"Total Cost"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:C(v.totalCost)})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"Total Profit"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:C(v.totalProfit)}),(0,b.jsx)(i.Badge,{className:"mt-2",variant:v.totalProfit>=0?"default":"destructive",children:v.totalProfit>=0?"Profit":"Loss"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"Transactions"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:v.count})})]})]})]})]})})}a.s(["default",()=>l])}];

//# sourceMappingURL=_c6beed7c._.js.map