module.exports=[540288,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(917171),h=a.i(887682),i=a.i(588237),j=a.i(254161),k=a.i(965733),l=a.i(546893),m=a.i(277687),n=a.i(571987);function o({dispute:a,open:d,onOpenChange:f,onUpdate:i}){let[j,o]=(0,c.useState)(a.status),[p,q]=(0,c.useState)(a.assignedTo||""),[r,s]=(0,c.useState)(a.notes||""),{toast:t}=(0,m.useToast)();return(0,b.jsx)(k.Dialog,{open:d,onOpenChange:f,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsx)(k.DialogTitle,{children:"Dispute Details"})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"User Name"}),(0,b.jsx)("p",{className:"mt-2 font-medium",children:a.user})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Email"}),(0,b.jsx)("p",{className:"mt-2 font-medium",children:a.userEmail})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Reference ID"}),(0,b.jsx)("p",{className:"mt-2 font-mono text-sm",children:a.refId})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Date & Time"}),(0,b.jsx)("p",{className:"mt-2 font-medium",children:a.date})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Service"}),(0,b.jsx)("p",{className:"mt-2 font-medium",children:a.service})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Issue Description"}),(0,b.jsx)("p",{className:"mt-2 rounded-lg border bg-muted p-3",children:a.issue})]}),a.screenshot&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Screenshot"}),(0,b.jsx)("div",{className:"mt-2 rounded-lg border p-4",children:(0,b.jsx)(n.default,{src:a.screenshot||"/placeholder.svg",alt:"Dispute screenshot",width:300,height:200,className:"rounded-lg object-cover"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Status"}),(0,b.jsxs)(h.Select,{value:j,onValueChange:a=>o(a),children:[(0,b.jsx)(h.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"open",children:"Open"}),(0,b.jsx)(h.SelectItem,{value:"in-progress",children:"In Progress"}),(0,b.jsx)(h.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(h.SelectItem,{value:"escalated",children:"Escalated"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Assign Staff"}),(0,b.jsxs)(h.Select,{value:p,onValueChange:q,children:[(0,b.jsx)(h.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select a staff member"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"Ahmed Musa",children:"Ahmed Musa"}),(0,b.jsx)(h.SelectItem,{value:"Fatima Bello",children:"Fatima Bello"}),(0,b.jsx)(h.SelectItem,{value:"Chidi Okafor",children:"Chidi Okafor"}),(0,b.jsx)(h.SelectItem,{value:"Aisha Ibrahim",children:"Aisha Ibrahim"}),(0,b.jsx)(h.SelectItem,{value:"Blessing Eze",children:"Blessing Eze"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Admin Notes"}),(0,b.jsx)(l.Textarea,{placeholder:"Add notes about this dispute...",value:r,onChange:a=>s(a.target.value),className:"mt-2",rows:4})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>{i({...a,status:"resolved",notes:r}),t({title:"Dispute Resolved",description:"Dispute has been marked as resolved."}),f(!1)},className:"bg-green-600 hover:bg-green-700",children:"Mark as Resolved"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:()=>{i({...a,status:"escalated",notes:r}),t({title:"Dispute Escalated",description:"Dispute has been escalated to senior management.",variant:"destructive"}),f(!1)},children:"Escalate"}),(0,b.jsx)(e.Button,{variant:"secondary",onClick:()=>{i({...a,status:j,assignedTo:p,notes:r}),t({title:"Dispute Updated",description:"Dispute has been updated successfully."}),f(!1)},children:"Save Changes"}),(0,b.jsx)(e.Button,{variant:"ghost",onClick:()=>f(!1),children:"Close"})]})]})]})})}var p=a.i(618155),q=a.i(923665),r=a.i(758042),s=a.i(994222),t=a.i(54419),u=a.i(659854),v=a.i(48662);let w=[{category:"BVN",count:12},{category:"NIN",count:8},{category:"CAC",count:15},{category:"VTU",count:6},{category:"Bills",count:9},{category:"Verification",count:4}];function x(){return(0,b.jsx)(v.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(p.BarChart,{data:w,children:[(0,b.jsx)(t.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(r.XAxis,{dataKey:"category"}),(0,b.jsx)(s.YAxis,{}),(0,b.jsx)(u.Tooltip,{}),(0,b.jsx)(q.Bar,{dataKey:"count",fill:"#E63946"})]})})}var y=a.i(587532),z=a.i(292e3),A=a.i(816201),B=a.i(724669),C=a.i(596221),D=a.i(677050),E=a.i(823292);function F(){let[a,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)("all"),w=async()=>{try{m(!0);let a=new URLSearchParams;"all"!==u&&a.set("status",u.toUpperCase()),s&&a.set("search",s);let b=await (0,D.authFetch)(`/api/admin/disputes?${a.toString()}`),c=await b.json();c.ok&&k(c.data)}catch(a){console.error("Failed to load disputes",a),E.toast.error("Failed to load disputes")}finally{m(!1)}};(0,c.useEffect)(()=>{w()},[u]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{w()},500);return()=>clearTimeout(a)},[s]);let F=async b=>{try{(await (0,D.authFetch)("/api/admin/disputes",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b.id,status:b.status,adminNotes:b.notes})})).ok?(E.toast.success("Dispute updated"),k(a.map(a=>a.id===b.id?b:a))):E.toast.error("Failed to update dispute")}catch(a){console.error(a),E.toast.error("Error updating dispute")}},G=a.filter(a=>"open"===a.status).length,H=a.filter(a=>"resolved"===a.status).length,I=a.filter(a=>"escalated"===a.status).length;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dispute & Support Center"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage customer complaints and support tickets."})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Open Disputes"}),(0,b.jsx)(z.AlertCircle,{className:"h-4 w-4 text-orange-600"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:G}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requires immediate attention"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Resolved"}),(0,b.jsx)(A.CheckCircle,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:H}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successfully closed"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Escalated"}),(0,b.jsx)(B.TrendingUp,{className:"h-4 w-4 text-red-600"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:I}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Needs senior attention"})]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Disputes by Category"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(x,{})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Filters"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Search"}),(0,b.jsxs)("div",{className:"relative mt-2",children:[(0,b.jsx)(y.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"User, service, or ref ID...",value:s,onChange:a=>t(a.target.value),className:"pl-10"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Status"}),(0,b.jsxs)(h.Select,{value:u,onValueChange:v,children:[(0,b.jsx)(h.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Statuses"}),(0,b.jsx)(h.SelectItem,{value:"open",children:"Open"}),(0,b.jsx)(h.SelectItem,{value:"in-progress",children:"In Progress"}),(0,b.jsx)(h.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(h.SelectItem,{value:"escalated",children:"Escalated"})]})]})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{t(""),v("all")},className:"w-full",children:"Clear Filters"})})]})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{children:["All Disputes (",a.length," results)"]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Date"}),(0,b.jsx)(i.TableHead,{children:"User"}),(0,b.jsx)(i.TableHead,{children:"Service"}),(0,b.jsx)(i.TableHead,{children:"Ref ID"}),(0,b.jsx)(i.TableHead,{children:"Issue"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Action"})]})}),(0,b.jsx)(i.TableBody,{children:l?(0,b.jsx)(i.TableRow,{children:(0,b.jsxs)(i.TableCell,{colSpan:7,className:"h-24 text-center",children:[(0,b.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin inline"})," Loading..."]})}):0===a.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:7,className:"h-24 text-center text-muted-foreground",children:"No disputes found."})}):a.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-medium",children:a.date}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{children:a.user}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.userEmail})]})}),(0,b.jsx)(i.TableCell,{children:a.service}),(0,b.jsx)(i.TableCell,{className:"font-mono text-sm",children:a.refId}),(0,b.jsx)(i.TableCell,{className:"max-w-xs truncate",title:a.issue,children:a.issue}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(j.Badge,{variant:"resolved"===a.status?"default":"open"===a.status?"secondary":"escalated"===a.status?"destructive":"outline",className:"resolved"===a.status?"bg-green-600":"open"===a.status?"bg-orange-600":"",children:a.status})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>{p(a),r(!0)},children:"View"})})]},a.id))})]})})]}),n&&(0,b.jsx)(o,{dispute:n,open:q,onOpenChange:r,onUpdate:F})]})}a.s(["default",()=>F],540288)}];

//# sourceMappingURL=app_admin_disputes_page_tsx_29ea6bc9._.js.map