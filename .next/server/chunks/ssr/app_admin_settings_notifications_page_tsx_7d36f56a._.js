module.exports=[691690,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(917171),h=a.i(546893),i=a.i(280281),j=a.i(254161),k=a.i(965733),l=a.i(915618),m=a.i(510448),n=a.i(781560),o=a.i(177156),p=a.i(677050),q=a.i(823292);function r(){let[a,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)({title:"",message:"",type:"info",includeUserName:!1}),E=async()=>{try{let a=await (0,p.authFetch)("/api/popup-messages");if(a.ok){let b=await a.json();r(b.messages||[])}}catch(a){q.toast.error("Failed to load messages")}finally{t(!1)}};(0,c.useEffect)(()=>{E()},[]);let F=async()=>{if(C.title&&C.message)try{let a=await (0,p.authFetch)("/api/popup-messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create",message:{...C,isActive:!0}})});if(a.ok){let b=await a.json();r(b.messages||[]),D({title:"",message:"",type:"info",includeUserName:!1}),v(!1),q.toast.success("Message created")}}catch(a){q.toast.error("Failed to create message")}},G=async()=>{if(A&&C.title&&C.message)try{let a=await (0,p.authFetch)("/api/popup-messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:A.id,updates:C})});if(a.ok){let b=await a.json();r(b.messages||[]),x(!1),B(null),q.toast.success("Message updated")}}catch(a){q.toast.error("Failed to update message")}},H=async a=>{try{let b=await (0,p.authFetch)("/api/popup-messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:a})});if(b.ok){let a=await b.json();r(a.messages||[]),q.toast.success("Message deleted")}}catch(a){q.toast.error("Failed to delete message")}},I=async a=>{try{let b=await (0,p.authFetch)("/api/popup-messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"toggle",id:a})});if(b.ok){let a=await b.json();r(a.messages||[])}}catch(a){q.toast.error("Failed to toggle message")}},J=a=>{switch(a){case"info":return"bg-blue-100 text-blue-700";case"warning":return"bg-yellow-100 text-yellow-700";case"success":return"bg-green-100 text-green-700";case"error":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return(0,b.jsxs)("div",{className:"space-y-6 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Notification Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage popup messages shown to users on dashboard access"})]}),(0,b.jsxs)(e.Button,{className:"bg-[#3457D5] hover:bg-[#2a4ab8]",onClick:()=>v(!0),children:[(0,b.jsx)(l.Plus,{className:"w-4 h-4 mr-2"}),"Create Message"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Messages"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-[#3457D5]",children:a.length})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Active Messages"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-600",children:a.filter(a=>a.isActive).length})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"With User Name"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-[#CCCCFF]",children:a.filter(a=>a.includeUserName).length})]})})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Popup Messages"}),(0,b.jsx)(d.CardDescription,{children:"All notification messages displayed to users"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)("p",{children:"No popup messages created yet"}),(0,b.jsx)(e.Button,{variant:"outline",className:"mt-4 bg-transparent",onClick:()=>v(!0),children:"Create First Message"})]}):a.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.title}),(0,b.jsx)(j.Badge,{className:J(a.type),children:a.type}),a.includeUserName&&(0,b.jsx)(j.Badge,{variant:"outline",className:"bg-blue-50",children:"Includes User Name"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.message})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(i.Switch,{checked:a.isActive,onCheckedChange:()=>I(a.id)})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Updated: ",new Date(a.updatedAt).toLocaleDateString()]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{B(a),z(!0)},children:(0,b.jsx)(o.Eye,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{B(a),D({title:a.title,message:a.message,type:a.type,includeUserName:a.includeUserName}),x(!0)},children:(0,b.jsx)(m.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{size:"sm",variant:"destructive",onClick:()=>H(a.id),children:(0,b.jsx)(n.Trash2,{className:"w-4 h-4"})})]})]})]},a.id))})})]}),(0,b.jsx)(k.Dialog,{open:u,onOpenChange:v,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Create Popup Message"}),(0,b.jsx)(k.DialogDescription,{children:"Create a new notification message for users"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"title",children:"Message Title"}),(0,b.jsx)(f.Input,{id:"title",placeholder:"e.g., Welcome Back!",value:C.title,onChange:a=>D({...C,title:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"message",children:"Message Content"}),(0,b.jsx)(h.Textarea,{id:"message",placeholder:"Enter the message content...",rows:4,value:C.message,onChange:a=>D({...C,message:a.target.value})}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Use ","{userName}"," to include the user's name in the message"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"type",children:"Message Type"}),(0,b.jsxs)("select",{id:"type",className:"w-full px-3 py-2 border rounded-md bg-background",value:C.type,onChange:a=>D({...C,type:a.target.value}),children:[(0,b.jsx)("option",{value:"info",children:"Info"}),(0,b.jsx)("option",{value:"warning",children:"Warning"}),(0,b.jsx)("option",{value:"success",children:"Success"}),(0,b.jsx)("option",{value:"error",children:"Error"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Switch,{checked:C.includeUserName,onCheckedChange:a=>D({...C,includeUserName:a})}),(0,b.jsx)(g.Label,{className:"cursor-pointer",children:"Include user's name in message"})]}),(0,b.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-2",children:"Preview:"}),(0,b.jsxs)("div",{className:`p-3 rounded ${J(C.type)}`,children:[(0,b.jsx)("p",{className:"font-semibold",children:C.title||"Message Title"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:C.message||"Message content will appear here..."})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>v(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{className:"flex-1 bg-[#3457D5] hover:bg-[#2a4ab8]",onClick:F,children:"Create Message"})]})]})]})}),(0,b.jsx)(k.Dialog,{open:w,onOpenChange:x,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Edit Popup Message"}),(0,b.jsx)(k.DialogDescription,{children:"Update the notification message"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"edit-title",children:"Message Title"}),(0,b.jsx)(f.Input,{id:"edit-title",placeholder:"e.g., Welcome Back!",value:C.title,onChange:a=>D({...C,title:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"edit-message",children:"Message Content"}),(0,b.jsx)(h.Textarea,{id:"edit-message",placeholder:"Enter the message content...",rows:4,value:C.message,onChange:a=>D({...C,message:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"edit-type",children:"Message Type"}),(0,b.jsxs)("select",{id:"edit-type",className:"w-full px-3 py-2 border rounded-md bg-background",value:C.type,onChange:a=>D({...C,type:a.target.value}),children:[(0,b.jsx)("option",{value:"info",children:"Info"}),(0,b.jsx)("option",{value:"warning",children:"Warning"}),(0,b.jsx)("option",{value:"success",children:"Success"}),(0,b.jsx)("option",{value:"error",children:"Error"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Switch,{checked:C.includeUserName,onCheckedChange:a=>D({...C,includeUserName:a})}),(0,b.jsx)(g.Label,{className:"cursor-pointer",children:"Include user's name in message"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>x(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{className:"flex-1 bg-[#3457D5] hover:bg-[#2a4ab8]",onClick:G,children:"Update Message"})]})]})]})}),(0,b.jsx)(k.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Message Preview"}),(0,b.jsx)(k.DialogDescription,{children:"How this message will appear to users"})]}),A&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:`p-6 rounded-lg ${J(A.type)}`,children:[(0,b.jsx)("p",{className:"font-bold text-lg mb-2",children:A.title}),(0,b.jsx)("p",{className:"text-sm",children:A.includeUserName?A.message.replace("{userName}","John Doe"):A.message})]}),(0,b.jsxs)("div",{className:"bg-muted p-3 rounded text-xs space-y-1",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Type:"})," ",A.type]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Status:"})," ",A.isActive?"Active":"Inactive"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Include User Name:"})," ",A.includeUserName?"Yes":"No"]})]}),(0,b.jsx)(e.Button,{className:"w-full",onClick:()=>z(!1),children:"Close"})]})]})})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=app_admin_settings_notifications_page_tsx_7d36f56a._.js.map