module.exports=[703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},588237,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},724669,a=>{"use strict";let b=(0,a.i(170106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],724669)},902274,a=>{"use strict";var b=a.i(572131),c=a.i(935112),d=a.i(320353),e=b,f=a.i(298621),g=a.i(603190),h=a.i(676805),i=a.i(952517);function j(){return(j=Object.assign.bind()).apply(null,arguments)}function k(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function l(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class m extends e.PureComponent{renderIcon(a,b){var{inactiveColor:c}=this.props,d=32/6,f=32/3,g=a.inactive?c:a.color,i=null!=b?b:a.type;if("none"===i)return null;if("plainline"===i)return e.createElement("line",{strokeWidth:4,fill:"none",stroke:g,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===i)return e.createElement("path",{strokeWidth:4,fill:"none",stroke:g,d:"M0,".concat(16,"h").concat(f,"\n            A").concat(d,",").concat(d,",0,1,1,").concat(2*f,",").concat(16,"\n            H").concat(32,"M").concat(2*f,",").concat(16,"\n            A").concat(d,",").concat(d,",0,1,1,").concat(f,",").concat(16),className:"recharts-legend-icon"});if("rect"===i)return e.createElement("path",{stroke:"none",fill:g,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(e.isValidElement(a.legendIcon)){var j=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?k(Object(c),!0).forEach(function(b){l(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):k(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},a);return delete j.legendIcon,e.cloneElement(a.legendIcon,j)}return e.createElement(h.Symbols,{fill:g,cx:16,cy:16,size:32,sizeType:"diameter",type:i})}renderItems(){var{payload:a,iconSize:b,layout:c,formatter:d,inactiveColor:h,iconType:k}=this.props,l={x:0,y:0,width:32,height:32},m={display:"horizontal"===c?"inline-block":"block",marginRight:10},n={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map((a,c)=>{var o=a.formatter||d,p=(0,f.clsx)({"recharts-legend-item":!0,["legend-item-".concat(c)]:!0,inactive:a.inactive});if("none"===a.type)return null;var q=a.inactive?h:a.color,r=o?o(a.value,a,c):a.value;return e.createElement("li",j({className:p,style:m,key:"legend-item-".concat(c)},(0,i.adaptEventsOfChild)(this.props,a,c)),e.createElement(g.Surface,{width:b,height:b,viewBox:l,style:n,"aria-label":"".concat(r," legend icon")},this.renderIcon(a,k)),e.createElement("span",{className:"recharts-legend-item-text",style:{color:q}},r))})}render(){var{payload:a,layout:b,align:c}=this.props;return a&&a.length?e.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===b?c:"left"}},this.renderItems()):null}}l(m,"displayName","Legend"),l(m,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var n=a.i(768932),o=a.i(363643),p=a.i(977368),q=a.i(324993),r=a.i(738620),s=a.i(298382),t=a.i(121402),u=["contextPayload"];function v(){return(v=Object.assign.bind()).apply(null,arguments)}function w(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function x(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?w(Object(c),!0).forEach(function(b){y(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):w(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function y(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function z(a){return a.value}function A(a){var{contextPayload:c}=a,d=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,u),e=(0,o.getUniqPayload)(c,a.payloadUniqBy,z),f=x(x({},d),{},{payload:e});return b.isValidElement(a.content)?b.cloneElement(a.content,f):"function"==typeof a.content?b.createElement(a.content,f):b.createElement(m,f)}function B(a){var c=(0,p.useAppDispatch)();return(0,b.useEffect)(()=>{c((0,t.setLegendSettings)(a))},[c,a]),null}function C(a){var c=(0,p.useAppDispatch)();return(0,b.useEffect)(()=>(c((0,t.setLegendSize)(a)),()=>{c((0,t.setLegendSize)({width:0,height:0}))}),[c,a]),null}function D(a){var e=(0,p.useAppSelector)(q.selectLegendPayload),f=(0,d.useLegendPortal)(),g=(0,s.useMargin)(),{width:h,height:i,wrapperStyle:j,portal:k}=a,[l,m]=(0,r.useElementOffset)([e]),n=(0,s.useChartWidth)(),o=(0,s.useChartHeight)();if(null==n||null==o)return null;var t=n-(g.left||0)-(g.right||0),u=E.getWidthOrHeight(a.layout,i,h,t),w=k?j:x(x({position:"absolute",width:(null==u?void 0:u.width)||h||"auto",height:(null==u?void 0:u.height)||i||"auto"},function(a,b,c,d,e,f){var g,h,{layout:i,align:j,verticalAlign:k}=b;return a&&(void 0!==a.left&&null!==a.left||void 0!==a.right&&null!==a.right)||(g="center"===j&&"vertical"===i?{left:((d||0)-f.width)/2}:"right"===j?{right:c&&c.right||0}:{left:c&&c.left||0}),a&&(void 0!==a.top&&null!==a.top||void 0!==a.bottom&&null!==a.bottom)||(h="middle"===k?{top:((e||0)-f.height)/2}:"bottom"===k?{bottom:c&&c.bottom||0}:{top:c&&c.top||0}),x(x({},g),h)}(j,a,g,n,o,l)),j),y=null!=k?k:f;if(null==y)return null;var z=b.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:m},b.createElement(B,{layout:a.layout,align:a.align,verticalAlign:a.verticalAlign,itemSorter:a.itemSorter}),b.createElement(C,{width:l.width,height:l.height}),b.createElement(A,v({},a,u,{margin:g,chartWidth:n,chartHeight:o,contextPayload:e})));return(0,c.createPortal)(z,y)}class E extends b.PureComponent{static getWidthOrHeight(a,b,c,d){return"vertical"===a&&(0,n.isNumber)(b)?{height:b}:"horizontal"===a?{width:c||d}:null}render(){return b.createElement(D,this.props)}}y(E,"displayName","Legend"),y(E,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"}),a.s(["Legend",()=>E],902274)},288367,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(790166),f=a.i(660246),g=a.i(104720),h=a.i(724669),i=a.i(588237),j=a.i(254161),k=a.i(677050);function l(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{(async()=>{try{f(!0);let a=await (0,k.authFetch)("/api/admin/audit-logs?take=10"),b=await a.json().catch(()=>({}));if(a.ok&&b?.ok&&Array.isArray(b.logs)){let a=b.logs.map(a=>({id:a.id,date:new Date(a.createdAt).toISOString().slice(0,16).replace("T"," "),user:a.actorId||"system",category:a.resourceType||a.action||"Audit",service:a.action||"",status:"Completed"}));d(a)}}catch(a){}finally{f(!1)}})()},[]),(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Date"}),(0,b.jsx)(i.TableHead,{children:"User"}),(0,b.jsx)(i.TableHead,{children:"Category"}),(0,b.jsx)(i.TableHead,{children:"Service"}),(0,b.jsx)(i.TableHead,{children:"Status"})]})}),(0,b.jsxs)(i.TableBody,{children:[(e?[]:a).map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-medium",children:a.date}),(0,b.jsx)(i.TableCell,{children:a.user}),(0,b.jsx)(i.TableCell,{children:a.category}),(0,b.jsx)(i.TableCell,{children:a.service}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(j.Badge,{variant:"Completed"===a.status?"default":"Pending"===a.status||"Processing"===a.status?"secondary":"destructive",children:a.status})})]},a.id)),!e&&0===a.length&&(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:5,className:"text-sm text-muted-foreground",children:"No recent activity"})})]})]})}var m=a.i(885837),n=a.i(825317),o=a.i(432674);function p(){let[a,i]=(0,c.useState)({totalRevenue:0,totalRequests:0,profitMargin:0,activeUsers:0}),[j,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(()=>{let a=new Date;return a.setDate(a.getDate()-90),a.toISOString().slice(0,10)}),[w,x]=(0,c.useState)(()=>new Date().toISOString().slice(0,10));return(0,c.useEffect)(()=>{(async()=>{try{let a=await (0,k.authFetch)(`/api/admin/reports/metrics?from=${u}&to=${w}&limit=5`);if(a.ok){let b=await a.json();i(b?.summary||{totalRevenue:0,totalRequests:0,profitMargin:0,activeUsers:0}),p(Array.isArray(b?.revenueOverTime)?b.revenueOverTime:[]),r(Array.isArray(b?.topServices)?b.topServices:[]),t(Array.isArray(b?.userGrowth)?b.userGrowth:[])}}catch(a){console.error("Failed to fetch admin metrics",a)}})()},[u,w]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Overview"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your services today."})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Requests"}),(0,b.jsx)(g.FileText,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.totalRequests.toLocaleString()}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Recent activity across all services"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Revenue"}),(0,b.jsx)(e.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["â‚¦",a.totalRevenue.toLocaleString()]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Aggregated over the selected period"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Profit Margin"}),(0,b.jsx)(h.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[a.profitMargin,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Gross margin for the period"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Active Users"}),(0,b.jsx)(f.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.activeUsers.toLocaleString()}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users active in the period"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,b.jsx)(m.RevenueOverTimeChart,{data:j}),(0,b.jsx)(n.TopServicesByRevenueChart,{data:q.map(a=>({service:a.service,revenue:a.revenue}))})]}),(0,b.jsx)(o.UserGrowthChart,{data:s}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Recent Activity"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(l,{})})]})]})}a.s(["default",()=>p],288367)}];

//# sourceMappingURL=_4a4f35a4._.js.map