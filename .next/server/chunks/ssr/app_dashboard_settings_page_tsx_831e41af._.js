module.exports=[257417,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(346271),f=a.i(703130),g=a.i(340695),h=a.i(205522),i=a.i(917171),j=a.i(280281),k=a.i(621958),l=a.i(807706),m=a.i(307379),n=a.i(950463),o=a.i(823292),p=a.i(546842),q=a.i(523312),r=a.i(603314),s=a.i(114548),t=a.i(943108),u=a.i(677050);function v(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(n.Skeleton,{className:"h-10 w-48"}),(0,b.jsx)(n.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(n.Skeleton,{className:"h-96 w-full"})]}),children:(0,b.jsx)(w,{})})}function w(){let[a,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),y=(0,d.useSearchParams)(),[z,A]=(0,c.useState)("profile"),[B,C]=(0,c.useState)({name:"",email:"",phone:"",avatar:""}),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)({emailAlerts:!0,smsNotifications:!1,inAppNotifications:!0}),[H,I]=(0,c.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[J,K]=(0,c.useState)({currentPin:"",newPin:"",confirmPin:""});(0,c.useEffect)(()=>{x(!0);let a=y.get("tab");a&&A(a),(async()=>{try{let a=await (0,u.authFetch)("/api/me");if(a.ok){let b=await a.json();C({name:b.profile?.name||b.user?.profile?.name||"",email:b.user?.email||"",phone:b.profile?.phone||b.user?.profile?.phone||"",avatar:b.profile?.avatarUrl||""}),E(b.hasPin)}}catch(a){console.error("Failed to load profile",a)}finally{v(!1)}})()},[]);let L=async()=>{try{let a=await (0,u.authFetch)("/api/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B.name,phone:B.phone})});if(a.ok)o.toast.success("Profile settings saved successfully!");else{let b=await a.json();o.toast.error(b.error||"Failed to save profile settings")}}catch(a){o.toast.error("An error occurred while saving profile")}},M=async()=>{if(!H.currentPassword||!H.newPassword||!H.confirmPassword)return void o.toast.error("Please fill in all password fields");if(H.newPassword!==H.confirmPassword)return void o.toast.error("New passwords do not match!");if(H.newPassword.length<8)return void o.toast.error("Password must be at least 8 characters!");try{let a=await (0,u.authFetch)("/api/me/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:H.currentPassword,newPassword:H.newPassword})});if(a.ok)o.toast.success("Password changed successfully!"),I({currentPassword:"",newPassword:"",confirmPassword:""});else{let b=await a.json();o.toast.error(b.error||"Failed to change password")}}catch(a){o.toast.error("An error occurred while changing password")}},N=async()=>{if(!J.newPin||!J.confirmPin)return void o.toast.error("Please fill in all PIN fields");if(J.newPin!==J.confirmPin)return void o.toast.error("New PINs do not match!");if(4!==J.newPin.length||!/^\d+$/.test(J.newPin))return void o.toast.error("PIN must be exactly 4 digits!");try{let a={newPin:J.newPin};if(D)if(!J.currentPin)return void o.toast.error("Current PIN is required to change PIN");else a.currentPin=J.currentPin;else{if(!H.currentPassword)return void o.toast.error("Please enter your current password in the Security tab to verify your identity");a.currentPassword=H.currentPassword}let b=await (0,u.authFetch)("/api/me/pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(b.ok)o.toast.success("Transaction PIN updated successfully!"),K({currentPin:"",newPin:"",confirmPin:""}),E(!0);else{let a=await b.json();o.toast.error(a.error||"Failed to update PIN")}}catch(a){o.toast.error("An error occurred while updating PIN")}};return a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(n.Skeleton,{className:"h-10 w-48"}),(0,b.jsx)(n.Skeleton,{className:"h-12 w-full"}),(0,b.jsx)(n.Skeleton,{className:"h-96 w-full"})]}):(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Account Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your account preferences and security"})]}),(0,b.jsxs)(k.Tabs,{value:z,onValueChange:A,className:"space-y-6",children:[(0,b.jsxs)(k.TabsList,{className:"grid w-full grid-cols-2 lg:w-auto lg:grid-cols-4",children:[(0,b.jsxs)(k.TabsTrigger,{value:"profile",className:"gap-2",children:[(0,b.jsx)(p.User,{className:"h-4 w-4"}),"Profile"]}),(0,b.jsxs)(k.TabsTrigger,{value:"security",className:"gap-2",children:[(0,b.jsx)(r.Shield,{className:"h-4 w-4"}),"Security"]}),(0,b.jsxs)(k.TabsTrigger,{value:"notifications",className:"gap-2",children:[(0,b.jsx)(q.Bell,{className:"h-4 w-4"}),"Notifications"]}),(0,b.jsxs)(k.TabsTrigger,{value:"pin",className:"gap-2",children:[(0,b.jsx)(t.Lock,{className:"h-4 w-4"}),D?"Change PIN":"Setup PIN"]})]}),(0,b.jsx)(k.TabsContent,{value:"profile",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Profile Information"}),(0,b.jsx)(f.CardDescription,{children:"Update your personal information"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)(l.Avatar,{className:"h-24 w-24",children:[(0,b.jsx)(l.AvatarImage,{src:B.avatar||"/placeholder.svg"}),(0,b.jsx)(l.AvatarFallback,{className:"bg-[#3457D5] text-2xl text-white",children:B.name.split(" ").map(a=>a[0]).join("")})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",children:"Change Avatar"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"JPG, PNG or GIF. Max size 2MB."})]})]}),(0,b.jsx)(m.Separator,{}),(0,b.jsxs)("form",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"name",children:"Full Name"}),(0,b.jsx)(h.Input,{id:"name",value:B.name,onChange:a=>C({...B,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(h.Input,{id:"email",type:"email",value:B.email,onChange:a=>C({...B,email:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"phone",children:"Phone Number"}),(0,b.jsx)(h.Input,{id:"phone",value:B.phone,onChange:a=>C({...B,phone:a.target.value})})]}),(0,b.jsxs)(g.Button,{onClick:L,className:"bg-[#3457D5] text-white gap-2",type:"button",children:[(0,b.jsx)(s.Save,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})})}),(0,b.jsx)(k.TabsContent,{value:"security",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Change Password"}),(0,b.jsx)(f.CardDescription,{children:"Update your password to keep your account secure"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"currentPassword",children:"Current Password"}),(0,b.jsx)(h.Input,{id:"currentPassword",type:"password",value:H.currentPassword,onChange:a=>I({...H,currentPassword:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"newPassword",children:"New Password"}),(0,b.jsx)(h.Input,{id:"newPassword",type:"password",value:H.newPassword,onChange:a=>I({...H,newPassword:a.target.value})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 8 characters"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,b.jsx)(h.Input,{id:"confirmPassword",type:"password",value:H.confirmPassword,onChange:a=>I({...H,confirmPassword:a.target.value})})]}),(0,b.jsxs)(g.Button,{onClick:M,className:"bg-[#3457D5] text-white gap-2",type:"button",children:[(0,b.jsx)(s.Save,{className:"h-4 w-4"}),"Update Password"]})]})})]})})}),(0,b.jsx)(k.TabsContent,{value:"notifications",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Notification Preferences"}),(0,b.jsx)(f.CardDescription,{children:"Manage how you receive notifications"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(i.Label,{htmlFor:"emailAlerts",className:"text-base",children:"Email Alerts"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive email notifications for transactions"})]}),(0,b.jsx)(j.Switch,{id:"emailAlerts",checked:F.emailAlerts,onCheckedChange:a=>G({...F,emailAlerts:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(i.Label,{htmlFor:"smsNotifications",className:"text-base",children:"SMS Notifications"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive SMS alerts for important updates"})]}),(0,b.jsx)(j.Switch,{id:"smsNotifications",checked:F.smsNotifications,onCheckedChange:a=>G({...F,smsNotifications:a})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-border p-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(i.Label,{htmlFor:"inAppNotifications",className:"text-base",children:"In-App Notifications"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show notifications within the app"})]}),(0,b.jsx)(j.Switch,{id:"inAppNotifications",checked:F.inAppNotifications,onCheckedChange:a=>G({...F,inAppNotifications:a})})]})]}),(0,b.jsxs)(g.Button,{onClick:()=>{o.toast.success("Notification settings saved successfully!"),console.log("[v0] Notifications saved:",F)},className:"bg-[#3457D5] text-white gap-2",children:[(0,b.jsx)(s.Save,{className:"h-4 w-4"}),"Save Preferences"]})]})]})})}),(0,b.jsx)(k.TabsContent,{value:"pin",children:(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:D?"Change Transaction PIN":"Setup Transaction PIN"}),(0,b.jsx)(f.CardDescription,{children:D?"Update your 4-digit PIN for secure transactions":"Create a 4-digit PIN to secure your transactions"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{className:"space-y-4",children:[D?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"currentPin",children:"Current PIN"}),(0,b.jsx)(h.Input,{id:"currentPin",type:"password",inputMode:"numeric",maxLength:4,value:J.currentPin,onChange:a=>K({...J,currentPin:a.target.value.replace(/\D/g,"")}),placeholder:"Enter current PIN"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"verifyPassword",children:"Current Password"}),(0,b.jsx)(h.Input,{id:"verifyPassword",type:"password",value:H.currentPassword,onChange:a=>I({...H,currentPassword:a.target.value}),placeholder:"Verify your password to set PIN"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Required once to verify your identity for first-time PIN setup."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"newPin",children:"New PIN"}),(0,b.jsx)(h.Input,{id:"newPin",type:"password",inputMode:"numeric",maxLength:4,value:J.newPin,onChange:a=>K({...J,newPin:a.target.value.replace(/\D/g,"")}),placeholder:"Enter new 4-digit PIN"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"PIN must be exactly 4 digits"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"confirmPin",children:"Confirm New PIN"}),(0,b.jsx)(h.Input,{id:"confirmPin",type:"password",inputMode:"numeric",maxLength:4,value:J.confirmPin,onChange:a=>K({...J,confirmPin:a.target.value.replace(/\D/g,"")}),placeholder:"Confirm new PIN"})]}),(0,b.jsxs)(g.Button,{onClick:N,className:"bg-[#3457D5] text-white gap-2",type:"button",children:[(0,b.jsx)(t.Lock,{className:"h-4 w-4"}),D?"Update PIN":"Create PIN"]})]})})]})})})]})]})}a.s(["default",()=>v])}];

//# sourceMappingURL=app_dashboard_settings_page_tsx_831e41af._.js.map