module.exports=[703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},917171,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(497895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],917171)},284505,a=>{"use strict";let b=(0,a.i(170106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],284505)},902274,a=>{"use strict";var b=a.i(572131),c=a.i(935112),d=a.i(320353),e=b,f=a.i(298621),g=a.i(603190),h=a.i(676805),i=a.i(952517);function j(){return(j=Object.assign.bind()).apply(null,arguments)}function k(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function l(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class m extends e.PureComponent{renderIcon(a,b){var{inactiveColor:c}=this.props,d=32/6,f=32/3,g=a.inactive?c:a.color,i=null!=b?b:a.type;if("none"===i)return null;if("plainline"===i)return e.createElement("line",{strokeWidth:4,fill:"none",stroke:g,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===i)return e.createElement("path",{strokeWidth:4,fill:"none",stroke:g,d:"M0,".concat(16,"h").concat(f,"\n            A").concat(d,",").concat(d,",0,1,1,").concat(2*f,",").concat(16,"\n            H").concat(32,"M").concat(2*f,",").concat(16,"\n            A").concat(d,",").concat(d,",0,1,1,").concat(f,",").concat(16),className:"recharts-legend-icon"});if("rect"===i)return e.createElement("path",{stroke:"none",fill:g,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(e.isValidElement(a.legendIcon)){var j=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?k(Object(c),!0).forEach(function(b){l(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):k(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},a);return delete j.legendIcon,e.cloneElement(a.legendIcon,j)}return e.createElement(h.Symbols,{fill:g,cx:16,cy:16,size:32,sizeType:"diameter",type:i})}renderItems(){var{payload:a,iconSize:b,layout:c,formatter:d,inactiveColor:h,iconType:k}=this.props,l={x:0,y:0,width:32,height:32},m={display:"horizontal"===c?"inline-block":"block",marginRight:10},n={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map((a,c)=>{var o=a.formatter||d,p=(0,f.clsx)({"recharts-legend-item":!0,["legend-item-".concat(c)]:!0,inactive:a.inactive});if("none"===a.type)return null;var q=a.inactive?h:a.color,r=o?o(a.value,a,c):a.value;return e.createElement("li",j({className:p,style:m,key:"legend-item-".concat(c)},(0,i.adaptEventsOfChild)(this.props,a,c)),e.createElement(g.Surface,{width:b,height:b,viewBox:l,style:n,"aria-label":"".concat(r," legend icon")},this.renderIcon(a,k)),e.createElement("span",{className:"recharts-legend-item-text",style:{color:q}},r))})}render(){var{payload:a,layout:b,align:c}=this.props;return a&&a.length?e.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===b?c:"left"}},this.renderItems()):null}}l(m,"displayName","Legend"),l(m,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var n=a.i(768932),o=a.i(363643),p=a.i(977368),q=a.i(324993),r=a.i(738620),s=a.i(298382),t=a.i(121402),u=["contextPayload"];function v(){return(v=Object.assign.bind()).apply(null,arguments)}function w(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function x(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?w(Object(c),!0).forEach(function(b){y(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):w(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function y(a,b,c){var d;return(b="symbol"==typeof(d=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(b,"string"))?d:d+"")in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function z(a){return a.value}function A(a){var{contextPayload:c}=a,d=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,u),e=(0,o.getUniqPayload)(c,a.payloadUniqBy,z),f=x(x({},d),{},{payload:e});return b.isValidElement(a.content)?b.cloneElement(a.content,f):"function"==typeof a.content?b.createElement(a.content,f):b.createElement(m,f)}function B(a){var c=(0,p.useAppDispatch)();return(0,b.useEffect)(()=>{c((0,t.setLegendSettings)(a))},[c,a]),null}function C(a){var c=(0,p.useAppDispatch)();return(0,b.useEffect)(()=>(c((0,t.setLegendSize)(a)),()=>{c((0,t.setLegendSize)({width:0,height:0}))}),[c,a]),null}function D(a){var e=(0,p.useAppSelector)(q.selectLegendPayload),f=(0,d.useLegendPortal)(),g=(0,s.useMargin)(),{width:h,height:i,wrapperStyle:j,portal:k}=a,[l,m]=(0,r.useElementOffset)([e]),n=(0,s.useChartWidth)(),o=(0,s.useChartHeight)();if(null==n||null==o)return null;var t=n-(g.left||0)-(g.right||0),u=E.getWidthOrHeight(a.layout,i,h,t),w=k?j:x(x({position:"absolute",width:(null==u?void 0:u.width)||h||"auto",height:(null==u?void 0:u.height)||i||"auto"},function(a,b,c,d,e,f){var g,h,{layout:i,align:j,verticalAlign:k}=b;return a&&(void 0!==a.left&&null!==a.left||void 0!==a.right&&null!==a.right)||(g="center"===j&&"vertical"===i?{left:((d||0)-f.width)/2}:"right"===j?{right:c&&c.right||0}:{left:c&&c.left||0}),a&&(void 0!==a.top&&null!==a.top||void 0!==a.bottom&&null!==a.bottom)||(h="middle"===k?{top:((e||0)-f.height)/2}:"bottom"===k?{bottom:c&&c.bottom||0}:{top:c&&c.top||0}),x(x({},g),h)}(j,a,g,n,o,l)),j),y=null!=k?k:f;if(null==y)return null;var z=b.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:m},b.createElement(B,{layout:a.layout,align:a.align,verticalAlign:a.verticalAlign,itemSorter:a.itemSorter}),b.createElement(C,{width:l.width,height:l.height}),b.createElement(A,v({},a,u,{margin:g,chartWidth:n,chartHeight:o,contextPayload:e})));return(0,c.createPortal)(z,y)}class E extends b.PureComponent{static getWidthOrHeight(a,b,c,d){return"vertical"===a&&(0,n.isNumber)(b)?{height:b}:"horizontal"===a?{width:c||d}:null}render(){return b.createElement(D,this.props)}}y(E,"displayName","Legend"),y(E,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"}),a.s(["Legend",()=>E],902274)},941675,a=>{"use strict";let b=(0,a.i(170106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],941675)},972646,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(703130),e=a.i(340695),f=a.i(205522),g=a.i(917171),h=a.i(284505),i=a.i(104720),j=a.i(941675),k=a.i(885837),l=a.i(825317),m=a.i(432674),n=a.i(677050);function o(){let[a,o]=(0,c.useState)(()=>{let a=new Date;return`${a.getFullYear()}-01-01`}),[p,q]=(0,c.useState)(()=>new Date().toISOString().split("T")[0]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({totalRevenue:0,totalRequests:0,profitMargin:0,activeUsers:0}),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),D=async()=>{try{s(!0);let b=await (0,n.authFetch)(`/api/admin/reports/metrics?from=${a}&to=${p}&limit=5`);if(b.ok){let a=await b.json();u(a?.summary||{totalRevenue:0,totalRequests:0,profitMargin:0,activeUsers:0}),w(Array.isArray(a?.revenueOverTime)?a.revenueOverTime:[]),y(Array.isArray(a?.topServices)?a.topServices:[]),A(Array.isArray(a?.topUsers)?a.topUsers:[]),C(Array.isArray(a?.userGrowth)?a.userGrowth:[])}}catch(a){console.error("Failed to fetch admin metrics",a)}finally{s(!1)}};return(0,c.useEffect)(()=>{D()},[a,p]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Reports & Analytics"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive insights and data analysis"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>{let b=`/api/admin/reports/export?format=csv&from=${a}&to=${p}`;window.open(b,"_blank")},variant:"outline",children:[(0,b.jsx)(h.Download,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),(0,b.jsxs)(e.Button,{onClick:()=>{let b=`/api/admin/reports/export?format=pdf&from=${a}&to=${p}`;window.open(b,"_blank")},children:[(0,b.jsx)(i.FileText,{className:"mr-2 h-4 w-4"}),"Export PDF"]})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Calendar,{className:"h-5 w-5"}),"Date Range"]}),(0,b.jsx)(d.CardDescription,{children:"Select the date range for your report"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"date-from",children:"From"}),(0,b.jsx)(f.Input,{id:"date-from",type:"date",value:a,onChange:a=>o(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"date-to",children:"To"}),(0,b.jsx)(f.Input,{id:"date-to",type:"date",value:p,onChange:a=>q(a.target.value)})]})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardDescription,{children:"Total Revenue"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["₦",t.totalRevenue.toLocaleString()]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"+12.5% from last period"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardDescription,{children:"Total Requests"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:t.totalRequests.toLocaleString()}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"+8.3% from last period"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardDescription,{children:"Profit Margin"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[t.profitMargin,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2.1% from last period"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardDescription,{children:"Active Users"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:t.activeUsers.toLocaleString()}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"+15.7% from last period"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,b.jsx)(k.RevenueOverTimeChart,{data:v}),(0,b.jsx)(l.TopServicesByRevenueChart,{data:x.map(a=>({service:a.service,revenue:a.revenue}))})]}),(0,b.jsx)(m.UserGrowthChart,{data:B}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Top Services by Revenue"}),(0,b.jsx)(d.CardDescription,{children:"Best performing services in the selected period"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("th",{className:"pb-3 text-left text-sm font-medium text-muted-foreground",children:"Service"}),(0,b.jsx)("th",{className:"pb-3 text-right text-sm font-medium text-muted-foreground",children:"Requests"}),(0,b.jsx)("th",{className:"pb-3 text-right text-sm font-medium text-muted-foreground",children:"Revenue"}),(0,b.jsx)("th",{className:"pb-3 text-right text-sm font-medium text-muted-foreground",children:"Profit"})]})}),(0,b.jsx)("tbody",{children:x.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b last:border-0",children:[(0,b.jsx)("td",{className:"py-3 text-sm",children:a.service}),(0,b.jsx)("td",{className:"py-3 text-right text-sm",children:a.requests.toLocaleString()}),(0,b.jsxs)("td",{className:"py-3 text-right text-sm",children:["₦",a.revenue.toLocaleString()]}),(0,b.jsxs)("td",{className:"py-3 text-right text-sm text-green-600",children:["₦",(a.profit||0).toLocaleString()]})]},c))})]})})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Top Users by Spending"}),(0,b.jsx)(d.CardDescription,{children:"Most valuable customers in the selected period"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("th",{className:"pb-3 text-left text-sm font-medium text-muted-foreground",children:"User"}),(0,b.jsx)("th",{className:"pb-3 text-left text-sm font-medium text-muted-foreground",children:"Email"}),(0,b.jsx)("th",{className:"pb-3 text-right text-sm font-medium text-muted-foreground",children:"Requests"}),(0,b.jsx)("th",{className:"pb-3 text-right text-sm font-medium text-muted-foreground",children:"Spent"}),(0,b.jsx)("th",{className:"pb-3 text-right text-sm font-medium text-muted-foreground",children:"Profit"})]})}),(0,b.jsx)("tbody",{children:z.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b last:border-0",children:[(0,b.jsx)("td",{className:"py-3 text-sm font-medium",children:a.name}),(0,b.jsx)("td",{className:"py-3 text-sm text-muted-foreground",children:a.email}),(0,b.jsx)("td",{className:"py-3 text-right text-sm",children:a.requests}),(0,b.jsxs)("td",{className:"py-3 text-right text-sm",children:["₦",a.spent.toLocaleString()]}),(0,b.jsxs)("td",{className:"py-3 text-right text-sm text-green-600",children:["₦",(a.profit||0).toLocaleString()]})]},c))})]})})})]})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=_6fdd6481._.js.map