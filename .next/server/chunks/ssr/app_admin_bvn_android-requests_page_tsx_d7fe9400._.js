module.exports=[47640,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(703130),f=a.i(340695),g=a.i(254161),h=a.i(205522),i=a.i(917171),j=a.i(546893),k=a.i(965733),l=a.i(1631),m=a.i(177156),n=a.i(533441),o=a.i(633508),p=a.i(452495),q=a.i(781560),r=a.i(304952),s=a.i(277687),t=a.i(680981),u=a.i(677050);let v="Admin Uthman";function w(){let[a,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("All"),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),{toast:N}=(0,s.useToast)();(0,c.useEffect)(()=>{O()},[]);let O=async()=>{w(r.BVNStorage.getRequests());try{let a=await fetch("/api/admin/system-settings/bvn-android");if(a.ok){let b=await a.json();y(b.link||""),A(b.description||"")}}catch(a){console.error("Failed to load settings:",a)}},P=async()=>{M(!0);try{if(!(await (0,u.authFetch)("/api/admin/system-settings/bvn-android",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:x,description:z})})).ok)throw Error("Failed to save settings");r.BVNStorage.addAuditLog({action:"Updated Android App Settings",admin:v,target:"Android App Link/Desc",timestamp:new Date().toISOString()}),N({title:"Success",description:"Android app settings updated successfully!"})}catch(a){N({title:"Error",description:"Failed to save settings",variant:"destructive"})}finally{M(!1)}},Q=a=>{r.BVNStorage.updateRequest(a.id,{status:"Approved",reviewedBy:v,reviewedAt:new Date().toISOString()}),r.BVNStorage.addAuditLog({action:"Approved BVN Android Request",admin:v,target:a.accountName,timestamp:new Date().toISOString()}),N({title:"Request Approved",description:`Request for ${a.accountName} has been approved.`}),O(),G(null)},R=a=>(0,b.jsx)(g.Badge,{className:{Pending:"bg-yellow-100 text-yellow-800 border-yellow-300",Approved:"bg-green-100 text-green-800 border-green-300",Rejected:"bg-red-100 text-red-800 border-red-300"}[a],children:a}),S=a.filter(a=>{if("All"!==D&&a.status!==D)return!1;if(B){let b=B.toLowerCase();return a.bvn.includes(b)||a.accountName.toLowerCase().includes(b)||a.agentLocation.toLowerCase().includes(b)}return!0}).sort((a,b)=>new Date(b.submittedAt).getTime()-new Date(a.submittedAt).getTime()),T={total:a.length,pending:a.filter(a=>"Pending"===a.status).length,approved:a.filter(a=>"Approved"===a.status).length,rejected:a.filter(a=>"Rejected"===a.status).length};return(0,b.jsxs)("div",{className:"min-h-screen bg-background p-6",children:[(0,b.jsx)(t.Toaster,{}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"BVN Android Requests Management"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Review and manage BVN enrollment requests"})]}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,b.jsxs)(e.Card,{className:"border-blue-300 bg-blue-50 mb-6",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"text-lg text-blue-700 flex items-center gap-2",children:[(0,b.jsx)(l.Smartphone,{className:"w-5 h-5"}),"Android App Configuration"]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"appLink",children:"App Download URL"}),(0,b.jsx)(h.Input,{id:"appLink",type:"url",placeholder:"Enter or paste Android app link",value:x,onChange:a=>y(a.target.value),className:"w-full"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"appDesc",children:"Description"}),(0,b.jsx)(j.Textarea,{id:"appDesc",placeholder:"Enter instructions, version info, or other details for the user...",value:z,onChange:a=>A(a.target.value),rows:3,className:"bg-white"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{onClick:P,disabled:L,className:"bg-blue-600 hover:bg-blue-700 text-white",children:L?"Saving...":"Save Settings"}),x&&(0,b.jsx)(f.Button,{variant:"outline",asChild:!0,children:(0,b.jsxs)("a",{href:x,target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(p.ExternalLink,{className:"w-4 h-4 mr-2"}),"Test Link"]})})]})]})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-primary",children:T.total}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:T.pending}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:T.approved}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Approved"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:T.rejected}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rejected"})]})})]})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,b.jsx)(e.Card,{className:"mb-6",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:["All","Pending","Approved","Rejected"].map(a=>(0,b.jsx)(f.Button,{variant:D===a?"default":"outline",size:"sm",onClick:()=>E(a),children:a},a))}),(0,b.jsx)(h.Input,{placeholder:"Search by BVN, name, or agent...",value:B,onChange:a=>C(a.target.value),className:"w-full md:w-64"})]})})})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:0===S.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-12 text-center",children:[(0,b.jsx)(l.Smartphone,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No requests found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:0===a.length?"No BVN requests have been submitted yet.":"No requests match your current filters."})]})}):(0,b.jsx)("div",{className:"space-y-4",children:S.map((a,c)=>(0,b.jsx)(d.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*c},children:(0,b.jsx)(e.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"font-mono text-sm text-muted-foreground",children:["#",a.id.slice(0,8)]}),R(a.status)]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Agent:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.agentLocation})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"BVN:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.bvn})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Account:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.kegowAccountNo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Name:"})," ",(0,b.jsx)("span",{className:"font-medium",children:a.accountName})]})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Submitted: ",new Date(a.submittedAt).toLocaleDateString()," at"," ",new Date(a.submittedAt).toLocaleTimeString()]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>G(a),children:[(0,b.jsx)(m.Eye,{className:"w-4 h-4 mr-2"}),"View"]}),"Pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 bg-transparent",onClick:()=>Q(a),children:[(0,b.jsx)(n.Check,{className:"w-4 h-4 mr-2"}),"Approve"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 bg-transparent",onClick:()=>{G(a),I(!0)},children:[(0,b.jsx)(o.X,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 bg-transparent",onClick:()=>{let b;return b=r.BVNStorage.getRequests().filter(b=>b.id!==a.id),void(r.BVNStorage.saveRequests(b),r.BVNStorage.addAuditLog({action:"Deleted BVN Android Request",admin:v,target:a.accountName,timestamp:new Date().toISOString()}),N({title:"Request Deleted",description:`Request for ${a.accountName} has been deleted.`}),O(),G(null))},children:(0,b.jsx)(q.Trash2,{className:"w-4 h-4"})})]})]})})})},a.id))})})]}),(0,b.jsx)(k.Dialog,{open:!!F&&!H,onOpenChange:()=>G(null),children:(0,b.jsxs)(k.DialogContent,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Request Details"}),(0,b.jsx)(k.DialogDescription,{children:"Full information for this BVN enrollment request"})]}),F&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status:"}),R(F.status)]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Reference ID:"}),(0,b.jsx)("div",{className:"font-medium",children:F.id})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Agent Location:"}),(0,b.jsx)("div",{className:"font-medium",children:F.agentLocation})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"BVN:"}),(0,b.jsx)("div",{className:"font-medium",children:F.bvn})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Kegow Account:"}),(0,b.jsx)("div",{className:"font-medium",children:F.kegowAccountNo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Account Name:"}),(0,b.jsx)("div",{className:"font-medium",children:F.accountName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"First Name:"}),(0,b.jsx)("div",{className:"font-medium",children:F.firstName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Last Name:"}),(0,b.jsx)("div",{className:"font-medium",children:F.lastName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Email:"}),(0,b.jsx)("div",{className:"font-medium",children:F.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Phone:"}),(0,b.jsx)("div",{className:"font-medium",children:F.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"State:"}),(0,b.jsx)("div",{className:"font-medium",children:F.stateOfResidence})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Address:"}),(0,b.jsx)("div",{className:"font-medium",children:F.address})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date of Birth:"}),(0,b.jsx)("div",{className:"font-medium",children:new Date(F.dob).toLocaleDateString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"LGA:"}),(0,b.jsx)("div",{className:"font-medium",children:F.lga})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"City:"}),(0,b.jsx)("div",{className:"font-medium",children:F.city})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Address State:"}),(0,b.jsx)("div",{className:"font-medium",children:F.addressState})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Submitted:"}),(0,b.jsx)("div",{className:"font-medium",children:new Date(F.submittedAt).toLocaleString()})]}),F.reviewedAt&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Reviewed:"}),(0,b.jsx)("div",{className:"font-medium",children:new Date(F.reviewedAt).toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Reviewed By:"}),(0,b.jsx)("div",{className:"font-medium",children:F.reviewedBy})]})]}),F.rejectionReason&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Rejection Reason:"}),(0,b.jsx)("div",{className:"font-medium text-red-600",children:F.rejectionReason})]})]})]}),(0,b.jsx)(k.DialogFooter,{children:F?.status==="Pending"&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>Q(F),children:[(0,b.jsx)(n.Check,{className:"w-4 h-4 mr-2"}),"Approve"]}),(0,b.jsxs)(f.Button,{variant:"outline",className:"text-red-600 bg-transparent",onClick:()=>{I(!0)},children:[(0,b.jsx)(o.X,{className:"w-4 h-4 mr-2"}),"Reject"]})]})})]})}),(0,b.jsx)(k.Dialog,{open:H,onOpenChange:I,children:(0,b.jsxs)(k.DialogContent,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Reject Request"}),(0,b.jsx)(k.DialogDescription,{children:"Please provide a reason for rejecting this request."})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"rejectionReason",children:"Rejection Reason"}),(0,b.jsx)(j.Textarea,{id:"rejectionReason",placeholder:"Enter the reason for rejection...",value:J,onChange:a=>K(a.target.value),rows:4})]})}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>{I(!1),K("")},children:"Cancel"}),(0,b.jsx)(f.Button,{variant:"destructive",onClick:()=>{F&&J.trim()?(r.BVNStorage.updateRequest(F.id,{status:"Rejected",rejectionReason:J,reviewedBy:v,reviewedAt:new Date().toISOString()}),r.BVNStorage.addAuditLog({action:"Rejected BVN Android Request",admin:v,target:F.accountName,timestamp:new Date().toISOString()}),N({title:"Request Rejected",description:`Request for ${F.accountName} has been rejected.`}),O(),G(null),I(!1),K("")):N({title:"Error",description:"Please provide a rejection reason.",variant:"destructive"})},children:"Reject Request"})]})]})})]})}a.s(["default",()=>w])}];

//# sourceMappingURL=app_admin_bvn_android-requests_page_tsx_d7fe9400._.js.map