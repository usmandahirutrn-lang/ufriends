module.exports=[646584,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(340695),e=a.i(703130),f=a.i(205522),g=a.i(917171),h=a.i(46143),i=a.i(887682),j=a.i(546893),k=a.i(965733),l=a.i(773320),m=a.i(797063),n=a.i(238246),o=a.i(249213),p=a.i(153023),q=a.i(362154),r=a.i(277687),s=a.i(680981),t=a.i(370975),u=a.i(464286),v=a.i(487228);let w=[{value:"Name Correction",label:"Name Correction"},{value:"Date of Birth Correction",label:"Date of Birth Correction"},{value:"Phone Number Update",label:"Phone Number Update"},{value:"Address Update",label:"Address Update"},{value:"Gender Correction",label:"Gender Correction"},{value:"Email Correction",label:"Email Correction"},{value:"Others",label:"Others"}],x=["NIN","Voter's Card","Driver's License","International Passport"];function y(){let{showKYCModal:a,setShowKYCModal:y,requireKYC:z}=(0,o.useKYCCheck)(),{toast:A}=(0,r.useToast)(),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(""),[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)("NIN"),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(null),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(!1),[at,au]=(0,c.useState)(!1),[av,aw]=(0,c.useState)(!1),[ax,ay]=(0,c.useState)(null),[az,aA]=(0,c.useState)(q.BVNModificationStorage.getUserRequests("u_001")),aB=(0,c.useMemo)(()=>String(D||"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")||"unknown",[D]),{price:aC,isLoading:aD,error:aE,submitService:aF}=(0,t.default)("bvn","modification","basic",{modificationType:aB,verificationType:ah});(0,c.useEffect)(()=>{C(!0)},[]);let aG=async a=>{aw(!1),au(!0);try{let b=await aF({...ax,pin:a});if(!b.ok)return void(0,v.handleServiceError)(b,A,"Submission Failed");A({title:"Success",description:"BVN Modification Request submitted successfully!"}),E(""),G(""),I(""),K(""),M(""),O(""),Q(""),S(""),U(""),W(""),Y(""),$(""),aa(""),ac(""),ae(""),ag(""),ak(""),am(null),ao(""),aq(!1),as(!1)}catch(a){A({title:"Submission Error",description:a.message||"An error occurred",variant:"destructive"})}finally{au(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#F9F7F3] p-4 md:p-8",children:[(0,b.jsx)(s.Toaster,{}),(0,b.jsx)(k.Dialog,{open:B,onOpenChange:C,children:(0,b.jsx)(k.DialogContent,{className:"sm:max-w-md",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4 p-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full border-2 border-[#3457D5] bg-[#CCCCFF]/20 flex items-center justify-center",children:(0,b.jsx)(m.Info,{className:"h-8 w-8 text-[#3457D5]"})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Warning"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"By submitting a BVN modification request, you confirm that you have obtained the necessary legal authority to process this personal data, and you assume full liability for unlawful access. The Company and its Data Protection Compliance Organization (DPCO) will cooperate fully with regulators in cases of misuse."}),(0,b.jsx)(d.Button,{onClick:()=>C(!1),className:"bg-[#3457D5] hover:bg-[#3457D5]/90 text-white px-8",children:"I Understand"})]})})}),(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)(e.Card,{className:"shadow-lg border-[#CCCCFF]/30",children:(0,b.jsxs)(e.CardContent,{className:"p-6 md:p-8",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold mb-2 text-gray-900",children:"BVN Modification Request"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-8",children:"Submit a request to correct or update your BVN information securely."}),(0,b.jsxs)("form",{className:"space-y-6",onSubmit:a=>{if(a.preventDefault(),!z())return;if(!ap||!ar)return void A({title:"Error",description:"Please accept consent and terms to continue",variant:"destructive"});let b=`${H} ${J} ${L}`.trim(),c=`${V} ${X} ${Z}`.trim();ay({amount:Number(aC||0),modificationType:D,currentBVN:F,currentName:b,currentDOB:N||void 0,currentPhone:P||void 0,currentEmail:R||void 0,currentAddress:T||void 0,newName:c||void 0,newDOB:_||void 0,newPhone:ab||void 0,newEmail:ad||void 0,newAddress:af||void 0,verificationType:ah,nin:"NIN"===ah?aj:void 0,idFileName:al?.name,comment:an||void 0,category:"bvn",action:"modification",idempotencyKey:crypto.randomUUID()}),aw(!0)},children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-sm font-medium",children:"Modification Type"}),(0,b.jsxs)(i.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full border-[#CCCCFF] focus:border-[#3457D5]",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select modification type"})}),(0,b.jsx)(i.SelectContent,{children:w.map(a=>(0,b.jsx)(i.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Label,{className:"text-sm font-semibold",children:"Current Details"}),(0,b.jsx)(f.Input,{type:"text",placeholder:"Current BVN (11 digits)",maxLength:11,value:F,onChange:a=>G(a.target.value.replace(/\D/g,"")),className:"border-[#CCCCFF] focus:border-[#3457D5]",required:!0}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,b.jsx)(f.Input,{type:"text",placeholder:"First Name",value:H,onChange:a=>I(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]",required:!0}),(0,b.jsx)(f.Input,{type:"text",placeholder:"Middle Name",value:J,onChange:a=>K(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),(0,b.jsx)(f.Input,{type:"text",placeholder:"Surname/Last Name",value:L,onChange:a=>M(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]",required:!0})]}),D.includes("Date of Birth")&&(0,b.jsx)(f.Input,{type:"date",placeholder:"Current Date of Birth",value:N,onChange:a=>O(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),D.includes("Phone")&&(0,b.jsx)(f.Input,{type:"tel",placeholder:"Current Phone Number",maxLength:11,value:P,onChange:a=>Q(a.target.value.replace(/\D/g,"")),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),D.includes("Email")&&(0,b.jsx)(f.Input,{type:"email",placeholder:"Current Email",value:R,onChange:a=>S(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),D.includes("Address")&&(0,b.jsx)(f.Input,{type:"text",placeholder:"Current Address",value:T,onChange:a=>U(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"})]}),D&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g.Label,{className:"text-sm font-semibold",children:"New Details"}),D.includes("Name")&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,b.jsx)(f.Input,{type:"text",placeholder:"New First Name",value:V,onChange:a=>W(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),(0,b.jsx)(f.Input,{type:"text",placeholder:"New Middle Name",value:X,onChange:a=>Y(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),(0,b.jsx)(f.Input,{type:"text",placeholder:"New Surname/Last Name",value:Z,onChange:a=>$(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"})]}),D.includes("Date of Birth")&&(0,b.jsx)(f.Input,{type:"date",placeholder:"New Date of Birth",value:_,onChange:a=>aa(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),D.includes("Phone")&&(0,b.jsx)(f.Input,{type:"tel",placeholder:"New Phone Number",maxLength:11,value:ab,onChange:a=>ac(a.target.value.replace(/\D/g,"")),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),D.includes("Email")&&(0,b.jsx)(f.Input,{type:"email",placeholder:"New Email",value:ad,onChange:a=>ae(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"}),D.includes("Address")&&(0,b.jsx)(f.Input,{type:"text",placeholder:"New Address",value:af,onChange:a=>ag(a.target.value),className:"border-[#CCCCFF] focus:border-[#3457D5]"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-sm font-medium",children:"Verification Type"}),(0,b.jsxs)(i.Select,{value:ah,onValueChange:a=>ai(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full border-[#CCCCFF] focus:border-[#3457D5]",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsx)(i.SelectContent,{children:x.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))})]})]}),"NIN"===ah?(0,b.jsx)(f.Input,{type:"text",placeholder:"Enter NIN (11 digits)",maxLength:11,value:aj,onChange:a=>ak(a.target.value.replace(/\D/g,"")),className:"border-[#CCCCFF] focus:border-[#3457D5]"}):(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)(g.Label,{htmlFor:"id-upload",className:"cursor-pointer",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-[#CCCCFF] rounded-lg hover:border-[#3457D5] transition-colors bg-[#CCCCFF]/10",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(l.Upload,{className:"h-8 w-8 mx-auto mb-2 text-[#3457D5]"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:al?al.name:"Upload ID Document"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Click to browse"})]})}),(0,b.jsx)("input",{id:"id-upload",type:"file",className:"hidden",accept:"image/*,.pdf",onChange:a=>{a.target.files&&a.target.files[0]&&am(a.target.files[0])}})]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-sm font-medium",children:"Comment / Notes (Optional)"}),(0,b.jsx)(j.Textarea,{placeholder:"Short explanation for the modification request",value:an,onChange:a=>ao(a.target.value),rows:3,className:"border-[#CCCCFF] focus:border-[#3457D5]"})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t border-[#CCCCFF]/50 pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Estimated Price"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:aD?"Loading...":null!=aC?`₦${aC}`:"—"})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(h.Checkbox,{id:"consent",checked:ap,onCheckedChange:a=>aq(!0===a),className:"mt-1 border-[#3457D5] data-[state=checked]:bg-[#3457D5]"}),(0,b.jsx)(g.Label,{htmlFor:"consent",className:"text-sm text-gray-700 cursor-pointer leading-relaxed",children:"By checking this box, you confirm the ID owner's consent for verification."})]}),(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(h.Checkbox,{id:"terms",checked:ar,onCheckedChange:a=>as(!0===a),className:"mt-1 border-[#3457D5] data-[state=checked]:bg-[#3457D5]"}),(0,b.jsxs)(g.Label,{htmlFor:"terms",className:"text-sm text-gray-700 cursor-pointer leading-relaxed",children:["I agree to the"," ",(0,b.jsx)(n.default,{href:"/terms",className:"text-[#3457D5] hover:underline",children:"Terms of Service"})," ","and"," ",(0,b.jsx)(n.default,{href:"/privacy",className:"text-[#3457D5] hover:underline",children:"Privacy Policy"})]})]})]}),(0,b.jsx)(d.Button,{type:"submit",className:"w-full bg-[#3457D5] hover:bg-[#3457D5]/90 text-white font-medium py-6",disabled:!ap||!ar||at,children:at?"Processing...":"Submit Modification Request"}),aE&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-2",children:String(aE)})]})]})}),(0,b.jsx)(e.Card,{className:"mt-8 shadow-lg border-[#CCCCFF]/30",children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Your Modification History"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-[#CCCCFF]/50",children:[(0,b.jsx)("th",{className:"text-left py-3 px-2 font-medium text-gray-700",children:"Ref ID"}),(0,b.jsx)("th",{className:"text-left py-3 px-2 font-medium text-gray-700",children:"BVN"}),(0,b.jsx)("th",{className:"text-left py-3 px-2 font-medium text-gray-700",children:"Type"}),(0,b.jsx)("th",{className:"text-left py-3 px-2 font-medium text-gray-700",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-3 px-2 font-medium text-gray-700",children:"Status"})]})}),(0,b.jsx)("tbody",{children:0===az.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No modification requests yet."})}):az.map(a=>{var c;return(0,b.jsxs)("tr",{className:"border-b border-[#CCCCFF]/30",children:[(0,b.jsxs)("td",{className:"py-3 px-2 font-mono text-xs text-gray-600",children:["#",a.id.slice(0,8)]}),(0,b.jsx)("td",{className:"py-3 px-2 text-gray-700",children:a.currentBVN}),(0,b.jsx)("td",{className:"py-3 px-2 text-gray-700",children:a.modificationType}),(0,b.jsx)("td",{className:"py-3 px-2 text-gray-600",children:new Date(a.submittedAt).toLocaleDateString()}),(0,b.jsx)("td",{className:"py-3 px-2",children:(c=a.status,(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${{Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"}[c]||""}`,children:c}))})]},a.id)})})]})})]})})]}),(0,b.jsx)(p.KYCRequiredModal,{open:a,onOpenChange:y}),(0,b.jsx)(u.PinPrompt,{isOpen:av,onClose:()=>aw(!1),onConfirm:aG,isLoading:at})]})}a.s(["default",()=>y])}];

//# sourceMappingURL=app_services_bvn_modification_page_tsx_7721f79c._.js.map